parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"N69c":[function(require,module,exports) {
(function(){var t;t=function(t){var e,r,a,n;return e=/(?:([\S]*):\s?)?http:\/\/ogp.me\/ns#/,a=/(?:([\S]*):\s?)?http:\/\/ogp.me\/ns\/product#/,r=["url","title","image","image:url","image:width","image:height","description","locale","site_name"],n=["upc","ean","brand","mfr_part_no","size","color","availability","category","price:amount","price:currency","material","pattern","target_gender","age_group"],t.parse=function(){var e,r,a;return e=document.querySelectorAll("meta[property]"),r={},a=t.concatAllProperties(),Array.prototype.forEach.call(e,function(e){var n,o,c,u;return o=null!=(c=e.attributes.property)?c.value:void 0,n=null!=(u=e.attributes.name)?u.value:void 0,t.validProperty(o,a)?t.setData(e,t.sanitize(o),r):t.validProperty(n,a)?t.setData(e,n,r):void 0}),r},t.setData=function(t,e,r){var a,n;n=null!=(a=t.attributes.content)?a.value:void 0,Array.isArray(r[e])?r[e].push(n):r[e]?(r[e]=[r[e]],r[e].push(n)):r[e]=n},t.parsePrefix=function(t){var r;return r={og:"og",product:"og:product"},t.length>0&&t.forEach(function(t){var n,o;n=t.value.match(e),o=t.value.match(a),n&&2===n.length&&n[1]?r.og=n[1]:n&&t.name.match(/xmlns:/)&&(r.og=t.name.replace(/xmlns:/,"")),o&&2===o.length&&o[1]?r.product=o[1]:o&&t.name.match(/xmlns:/)?r.product=t.name.replace(/xmlns:/,""):r.product=r.og+":product"}),r},t.selectPrefix=function(){var e,r,a;return r=document.querySelector("html"),e=document.querySelector("head"),0===(a=t.extractPrefix(e)).length&&(a=t.extractPrefix(r)),a},t.extractPrefix=function(t){var e;return e=[],Array.prototype.forEach.call(t.attributes,function(t){var r,a;if(r={},null!=(a=t.value)?a.match(/ogp\.me/):void 0)return r.name=t.name,r.value=t.value,e.push(r)}),e},t.concatAllProperties=function(){var e;return e=t.parsePrefix(t.selectPrefix()),t.concatProperties(e.og,r).concat(t.concatProperties(e.product,n))},t.concatProperties=function(t,e){var r;return r=[],e.forEach(function(e){return r.push(t+":"+e)}),r},t.sanitize=function(t){if(t)return t.replace(/^(og|product):/,"")},t.validProperty=function(t,e){return t&&-1!==e.indexOf(t)},t}(t||{}),module.exports=t}).call(this);
},{}],"QpWr":[function(require,module,exports) {
var n=9007199254740991,r="[object Arguments]",t="[object Function]",e="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;function o(n,r,t){switch(t.length){case 0:return n.call(r);case 1:return n.call(r,t[0]);case 2:return n.call(r,t[0],t[1]);case 3:return n.call(r,t[0],t[1],t[2])}return n.apply(r,t)}function c(n,r){for(var t=-1,e=Array(n);++t<n;)e[t]=r(t);return e}function a(n,r){return function(t){return n(r(t))}}var i=Object.prototype,l=i.hasOwnProperty,f=i.toString,v=i.propertyIsEnumerable,p=a(Object.keys,Object),s=Math.max,y=!v.call({valueOf:1},"valueOf");function h(n,r){var t=S(n)||F(n)?c(n.length,String):[],e=t.length,u=!!e;for(var o in n)!r&&!l.call(n,o)||u&&("length"==o||m(o,e))||t.push(o);return t}function g(n,r,t){var e=n[r];l.call(n,r)&&x(e,t)&&(void 0!==t||r in n)||(n[r]=t)}function b(n){if(!w(n))return p(n);var r=[];for(var t in Object(n))l.call(n,t)&&"constructor"!=t&&r.push(t);return r}function d(n,r){return r=s(void 0===r?n.length-1:r,0),function(){for(var t=arguments,e=-1,u=s(t.length-r,0),c=Array(u);++e<u;)c[e]=t[r+e];e=-1;for(var a=Array(r+1);++e<r;)a[e]=t[e];return a[r]=c,o(n,this,a)}}function j(n,r,t,e){t||(t={});for(var u=-1,o=r.length;++u<o;){var c=r[u],a=e?e(t[c],n[c],c,t,n):void 0;g(t,c,void 0===a?n[c]:a)}return t}function O(n){return d(function(r,t){var e=-1,u=t.length,o=u>1?t[u-1]:void 0,c=u>2?t[2]:void 0;for(o=n.length>3&&"function"==typeof o?(u--,o):void 0,c&&A(t[0],t[1],c)&&(o=u<3?void 0:o,u=1),r=Object(r);++e<u;){var a=t[e];a&&n(r,a,e,o)}return r})}function m(r,t){return!!(t=null==t?n:t)&&("number"==typeof r||u.test(r))&&r>-1&&r%1==0&&r<t}function A(n,r,t){if(!M(t))return!1;var e=typeof r;return!!("number"==e?k(t)&&m(r,t.length):"string"==e&&r in t)&&x(t[r],n)}function w(n){var r=n&&n.constructor;return n===("function"==typeof r&&r.prototype||i)}function x(n,r){return n===r||n!=n&&r!=r}function F(n){return E(n)&&l.call(n,"callee")&&(!v.call(n,"callee")||f.call(n)==r)}var S=Array.isArray;function k(n){return null!=n&&I(n.length)&&!G(n)}function E(n){return P(n)&&k(n)}function G(n){var r=M(n)?f.call(n):"";return r==t||r==e}function I(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=n}function M(n){var r=typeof n;return!!n&&("object"==r||"function"==r)}function P(n){return!!n&&"object"==typeof n}var $=O(function(n,r){if(y||w(r)||k(r))j(r,q(r),n);else for(var t in r)l.call(r,t)&&g(n,t,r[t])});function q(n){return k(n)?h(n):b(n)}module.exports=$;
},{}],"p8GN":[function(require,module,exports) {
"use strict";function r(o){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.logErrors=exports.logError=exports.hasErrorLogger=exports.createError=void 0;var o=function(r,o){return"[".concat(r,"]: ").concat(o)};exports.createError=o;var e="object"===("undefined"==typeof console?"undefined":r(console))&&console.error;exports.hasErrorLogger=e;var t=function(r){return e&&"string"==typeof r&&console.error("".concat(r))};exports.logError=t;var n=function(r){return r.forEach(t)};exports.logErrors=n;var c={createError:o,logErrors:n,logError:t};exports.default=c;
},{}],"Th1d":[function(require,module,exports) {
(function(){var e,t;t=require("./utils.coffee"),e=function(e){return e.isMobile=null,e.iframe=null,e.orientation=null,e.iFrameName="virtusize-widget-iframe",e.page={viewport:null,dom:null,visible:!0,style:null,scrollPosition:0},e.init=function(){var t,n;return e.page.viewport=document.querySelector("head meta[name=viewport]"),e.page.dom=Array.prototype.filter.call(document.querySelectorAll("body > *"),function(e){var t,n;return t=getComputedStyle(e),n=e.tagName.toLowerCase(),"none"!==t.display&&"hidden"!==t.visibility&&t.opacity>0&&"script"!==n&&"style"!==n}),e.page.style=null!=(null!=(t=document.body)?t.style:void 0)?document.body.style:null,e.page.htmlstyle=null!=(null!=(n=document.querySelector("html"))?n.style:void 0)?document.querySelector("html").style:null,e.orientation=e.getOrientation(window)},e.registerHandlers=function(){return e.unregisterHandlers(),window.addEventListener("orientationchange",e.onOrientationChange,!1),window.addEventListener("resize",e.onResize,!1)},e.unregisterHandlers=function(){return window.removeEventListener("orientationchange",e.onOrientationChange),window.removeEventListener("resize",e.onResize)},e.getIFrame=function(n){var i;return i=document.createElement("iframe"),t.setAttributes(i,{id:e.iFrameName,name:e.iFrameName,frameborder:0,title:"Fit Illustrator by Virtusize",role:"application",src:n}),document.body.appendChild(i),t.setStyle(i,{zIndex:2147483646,position:"absolute",left:0,top:0,background:"white",border:"none"}),i},e.openWidget=function(t){var n;return n=require("./view.coffee"),this.init(),e.hidePage(),e.registerHandlers(),e.iframe=e.getIFrame(n.constructWidgetURI(t)),document.body.appendChild(e.iframe),window.setTimeout(function(){return e.setIFrameDimensions(window)},100),window.setTimeout(function(){return e.setIFrameDimensions(window)},2100),window.setTimeout(function(){return e.setIFrameDimensions(window)},5100)},e.openWidgetWindow=function(e){var t;return t=require("./view.coffee"),e.win=t.openWindow(t.constructWidgetURI(e))},e.closeWidget=function(){return e.iframe.remove(),e.iframe=null,e.unregisterHandlers(),e.showPage()},e.showPage=function(){var t,n;if(!e.page.visible)return t=document.querySelector("head"),null!=e.page.viewport?(n=document.querySelector("head meta[name=viewport]"),t.removeChild(n),t.appendChild(e.page.viewport)):document.querySelector("head meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0"),document.body.style=e.page.style,document.querySelector("html").style=e.page.htmlstyle,Array.prototype.forEach.call(e.page.dom,function(e){if(Object.prototype.hasOwnProperty.call(e.dataset,"vsCachedDisplay")&&(e.style.display=e.dataset.vsCachedDisplay,delete e.dataset.vsCachedDisplay,!e.style||""===e.style||0===(e.style.length||0)))return e.removeAttribute("style")}),e.page.visible=!0,window.scrollTo(0,e.page.scrollposition)},e.hidePage=function(){if(e.page.visible)return e.page.scrollposition=null!==window.pageYOffset?window.pageYOffset:null!==document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,Array.prototype.forEach.call(e.page.dom,function(e){return e.dataset.vsCachedDisplay=e.style.display,e.style.display="none"}),document.querySelector("html").style="overflow: visible !important;",document.body.style=null,document.body.style.backgroundColor="white",e.setViewport("landscape"),e.page.visible=!1},e.setIFrameDimensions=function(n){return t.setAttributes(e.iframe,{width:n.innerWidth,height:Math.max(n.innerHeight,460)})},e.onOrientationChange=function(){return e.orientation=e.getOrientation(window),e.setViewport(e.orientation)},e.onResize=function(){return window.setTimeout(function(){return e.setIFrameDimensions(window)},200)},e.setViewport=function(){return document.querySelector("head meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0")},e.getOrientation=function(e){return e.matchMedia?e.matchMedia("(orientation: landscape)").matches?"landscape":"portrait":e.innerWidth?e.innerWidth>e.innerHeight?"landscape":"portrait":e.document.documentElement.clientWidth>e.document.documentElement.clientHeight?"landscape":"portrait"},e.getResolution=function(e){return e.screen.width>e.screen.height?e.screen.width+"x"+e.screen.height:e.screen.height+"x"+e.screen.width},e}(e||{}),module.exports=e}).call(this);
},{"./utils.coffee":"ARb9","./view.coffee":"j1Se"}],"xweW":[function(require,module,exports) {
"use strict";var e,t=n(require("lodash.assign"));function n(e){return e&&e.__esModule?e:{default:e}}e=function(e){return e.write=function(e,n,r){var o,i;return null!=n&&"function"!=typeof n?("number"==typeof(r=(0,t.default)({expires:1,path:"/"},r)).expires&&(o=r.expires,(i=r.expires=new Date).setDate(i.getDate()+o)),document.cookie=[encodeURIComponent(e),"=",String(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")):null},e.read=function(e){var t,n,r,o,i;for(n=0,r=(t=document.cookie?document.cookie.split("; "):[]).length;n<r;n++)if(i=t[n].split("="),o=decodeURIComponent(i.shift()),null!=e&&e===o)return i.join("=");return null},e.remove=function(n,r){return!e.read(null===n)&&(e.write(n,"",(0,t.default)({},r,{expires:-1})),!e.read(n))},e}(e||{}),module.exports=e;
},{"lodash.assign":"QpWr"}],"KA7j":[function(require,module,exports) {
"use strict";var e=t(require("./cookie.coffee")),r=t(require("./utils.coffee"));function t(e){return e&&e.__esModule?e:{default:e}}var n,i=[].indexOf;n=function(t){return t.cookieExpiresInDays=730,t.cookieKey="vs.bid",t.setOnContext=function(e,r,n){return n.vs.bid=t.readOrCreate(),e(!1,n)},t.readOrCreate=function(e){var r;return(r=e||t.read())||(r=t.uuid()),t.remove(),t.write(r),r},t.read=function(){return e.default.read(t.cookieKey)},t.write=function(n){return e.default.write(t.cookieKey,n,{domain:r.default.tld(window.location.hostname),expires:t.cookieExpiresInDays})},t.remove=function(){return e.default.remove(t.cookieKey,{domain:r.default.tld(window.location.hostname)})},t.uuid=function(){var e,r,t,n,i;for(n=(e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("")).length,i=[],r=t=0;t<=22;r=++t)i[r]=e[0|Math.random()*n];return i.join("")+"."+(new Date).getTime().toString(36)},t.isWithin=function(e){var r,t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(null==e)return!1;r="0123456789abcdefghijklmnopqrstuvwxyz".split("").splice(0,n);try{if(t=e.slice(-1),i.call(r,t)>=0)return!0}catch(o){return!1}return!1},t}(n||{}),module.exports=n;
},{"./cookie.coffee":"xweW","./utils.coffee":"ARb9"}],"ES9q":[function(require,module,exports) {
"use strict";var e,t=r(require("./utils.coffee")),n=r(require("./bid.coffee"));function r(e){return e&&e.__esModule?e:{default:e}}e=function(e){return e.setupReceiveMessage=function(n,r,i){var a,o;return o=t.default.session,a=function(t){if(t.origin!==o&&!t.origin.match(/\.virtusize\.(com|kr|jp)/))return!1;if(void 0!==t.data&&null!==t.data&&t.data)try{return e.receiveEvent(JSON.parse(t.data),i)}catch(n){return!1}},window.removeEventListener("message",a),window.addEventListener("message",a,!1),n(!1,i)},e.receiveEvent=function(t,r){var i,a,o;if(null!=(o=e.selectWidget(t,function(){var e,t;for(i in t=[],e=r.vs.widgets)a=e[i],t.push(a);return t}()))){switch(t.name){case"util-set-cookie":r.vs.environment.cookiesDisabled=!1,o.open();break;case"widget-requested-close":o.close();break;case"backend-checked-product":o.productChecked(t.data)}"user-saw-widget-button"!==t.name&&o.handleEvent(t.name,t.data)}switch(t.name){case"util-checked-environment":return r.vs.environment=t.data,r.vs.bid=n.default.readOrCreate(r.vs.environment.bid);case"user-requested-wardrobe":return o.open()}},e.backendRequest=function(e,n,r,i){var a,o;return a={url:n,method:e,name:"integration-called-backend",contentType:i||"application/x-www-form-urlencoded",data:r},o=require("./view.coffee"),document.querySelector('iframe[name="'+o.utilIFrameName+'"]').contentWindow.postMessage(JSON.stringify(a),t.default.session)},e.selectWidget=function(e,t){var n,r,i,a,o;if(1===t.length)return t[0];if(null!=e.productId){for(n=0,i=t.length;n<i;n++)if(o=t[n],e.productId===o.getProductId())return o}else for(r=0,a=t.length;r<a;r++)if(!0===(o=t[r]).isActive())return o},e}(e||{}),module.exports=e;
},{"./utils.coffee":"ARb9","./bid.coffee":"KA7j","./view.coffee":"j1Se"}],"IYdi":[function(require,module,exports) {
"use strict";var e,t=n(require("lodash.assign")),r=n(require("./proxy.coffee")),i=n(require("./utils.coffee")),o=n(require("./integration.coffee")),a=n(require("./mobile.coffee"));function n(e){return e&&e.__esModule?e:{default:e}}e=function(e){return"/a/api/v3/","/a/api/v3/events","/a/api/v3/cloudinary-upload",e.createEvent=function(n,u){var s,d;return s={type:"user",source:"integration",name:n,apiKey:(d=o.default.VirtusizeSingleton.get()).apiKey,storeId:u.getStoreId(),storeName:u.getStoreName(),storeDomain:i.default.origin,integrationVersion:d.integrationVersion,snippetVersion:d.snippetVersion,storeProductType:u.getStoreProductTypeName(),storeProductExternalId:u.getProductId(),browserResolution:a.default.getResolution(window),browserOrientation:a.default.getOrientation(window),userCohort:i.default.readOrCreateCohort(),widgetType:e.guessWidgetType()},s=(0,t.default)({},s,u.getUserEventData()),r.default.backendRequest("POST","/a/api/v3/events",s,"application/json")},e.createProductMetaData=function(e){return r.default.backendRequest("POST","/a/api/v3/cloudinary-upload",e,"application/json")},e.createProductCheck=function(e){var t,a,n;return n=o.default.VirtusizeSingleton.get(),a=i.default.servicesDomain+"/product/check",t={apiKey:n.apiKey,externalId:e.getProductId(),version:e.getProductVersion()},r.default.backendRequest("GET",a,t,"application/json")},e.request=function(e,t,i){return r.default.backendRequest(e,"/a/api/v3/"+t,i,"application/json")},e.guessWidgetType=function(){var e;return e="desktop",o.default.VirtusizeSingleton.get().isMobile()&&(e="mobile"),e},e}(e||{}),module.exports=e;
},{"lodash.assign":"QpWr","./proxy.coffee":"ES9q","./utils.coffee":"ARb9","./integration.coffee":"O6BQ","./mobile.coffee":"Th1d"}],"G2tK":[function(require,module,exports) {
"use strict";var e,t=s(require("lodash.assign")),n=s(require("./utils.coffee")),i=s(require("./api.coffee")),r=s(require("./view.coffee")),a=s(require("./errors"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}e=function(e){return e.VirtusizeWidget=function(){function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.setButtonSelector(i.buttonSelector),this.setButtons(this.buttonSelector),this.setProductVersion(i.productVersion),this.done=i.done,this.active=!1,this.validProduct=!1,this.callbacks={},this.setRegion(i.region),this.setDomain(i.domain),this.setI18nDomain(i.i18nDomain),this.setLoaderLabel(i.loaderLabel),this.setLanguage(i.language),this.setProductId(i.productId),this.setProductImageUrl(i.productImageUrl),i.apps&&(this.setContainers(null!=(t=i.apps.containers)?t:{}),this.setAppVersion(i.apps.version)),this.setAvailableSizes(i.availableSizes),this.setSizeAliases(i.sizeAliases),this.setAddToCartEnabled(null!=(n=i.addToCartEnabled)&&n),this.detached=!1,this.type=i.type,this.sizeSelector=i.sizeSelector,this.containerSelector=i.containerSelector,this.closeSelector=i.closeSelector,this.zIndex=i.zIndex,this.errors=[],this.initialize()}return c(e,[{key:"initialize",value:function(){return r.default.setupDomButtons(this),i.default.createProductCheck(this),this.on("integration-registered-callback",function(e){if("user-added-item-to-cart"===e.eventName)return this.setAddToCartEnabled(!0)}),this.on("integration-unregistered-callback",function(e){if("user-added-item-to-cart"===e.eventName)return this.setAddToCartEnabled(!1)})}},{key:"productChecked",value:function(e){var t,a,s=this;if(this.setValidProduct(e.validProduct),this.setStoreProductId(e.productDataId),this.setStoreProductTypeId(e.productTypeId),this.setStoreProductTypeName(e.productTypeName),this.setStoreId(e.storeId),this.setStoreName(e.storeName),this.setFetchMetaData(e.fetchMetaData),this.setUserEventData(e.userData),i.default.createEvent("user-saw-product",this),this.isValidProduct()){if(r.default.showButtons(this),null!=this.done&&this.done.apply(this,[!1]),i.default.createEvent("user-saw-widget-button",this),this.handleEvent("user-saw-widget-button"),(t=this.getContainers())&&(a={inpage:"118px",inpageLite:"118px",smartTable:"394px"},Object.keys(t).forEach(function(e){var n,i;return i=r.default.addLoader(s.domain,s.loaderLabel),null!=(n=document.querySelector(t[e]))&&(n.style.minHeight=a[e]),null!=n?n.appendChild(i):void 0}),this.showApps()),this.doFetchMetaData())return n.default.sendProductMetadata(this)}else if(null!=this.done)return this.done.apply(this,["invalid product"])}},{key:"getStoreName",value:function(){return this.StoreName}},{key:"setStoreName",value:function(e){return this.StoreName=e}},{key:"getStoreId",value:function(){return this.storeId}},{key:"setStoreId",value:function(e){return this.storeId=e}},{key:"getButtonSelector",value:function(){return this.buttonSelector}},{key:"setButtonSelector",value:function(e){return this.buttonSelector=e}},{key:"getButtons",value:function(){return this.buttons}},{key:"setButtons",value:function(e){if(this.buttons=[],e)return this.buttons=document.querySelectorAll(e)}},{key:"getProductVersion",value:function(){return this.productVersion}},{key:"setProductVersion",value:function(e){return this.productVersion=e}},{key:"getProductImageUrl",value:function(){return this.productImageUrl}},{key:"setProductImageUrl",value:function(e){return this.productImageUrl=e}},{key:"getProductId",value:function(){return this.productId}},{key:"setProductId",value:function(e){return this.productId=null!=e?(""+e).trim():0}},{key:"getStoreProductId",value:function(){return this.storeProductId}},{key:"setStoreProductId",value:function(e){return this.storeProductId=e}},{key:"getStoreProductTypeId",value:function(){return this.storeProductTypeId}},{key:"getStoreProductTypeName",value:function(){return this.storeProductTypeName}},{key:"setStoreProductTypeId",value:function(e){return this.storeProductTypeId=e}},{key:"setStoreProductTypeName",value:function(e){return this.storeProductTypeName=e}},{key:"isValidProduct",value:function(){return this.validProduct}},{key:"setValidProduct",value:function(e){return this.validProduct=e}},{key:"isActive",value:function(){return this.active}},{key:"setActive",value:function(e){return this.active=e}},{key:"setInitialPanel",value:function(e){return this.initialPanel=e}},{key:"getInitialPanel",value:function(){return this.initialPanel}},{key:"doFetchMetaData",value:function(){return this.fetchMetaData}},{key:"setFetchMetaData",value:function(e){return this.fetchMetaData=e}},{key:"getUserEventData",value:function(){return this.userEventData}},{key:"setUserEventData",value:function(e){return this.userEventData=e}},{key:"isAddToCartEnabled",value:function(){return this.addToCartEnabled}},{key:"setAddToCartEnabled",value:function(e){return this.addToCartEnabled=e}},{key:"getLanguage",value:function(){return this.language}},{key:"setLanguage",value:function(e){return this.language=e||"default"}},{key:"getRegion",value:function(){return this.region}},{key:"setRegion",value:function(e){return this.region=e||"default"}},{key:"getLoaderLabel",value:function(){return this.loaderLabel}},{key:"setLoaderLabel",value:function(e){return this.loaderLabel=e||""}},{key:"getDomain",value:function(){return this.domain}},{key:"setDomain",value:function(e){return this.domain=e||"virtusize.com"}},{key:"getI18nDomain",value:function(){return this.i18nDomain}},{key:"setI18nDomain",value:function(e){var t;return t="i18n.virtusize."+this.getDomain().split(".").pop(),this.i18nDomain=e||t}},{key:"getContainers",value:function(){return this.containers}},{key:"setContainers",value:function(e){return this.containers=Object.prototype.hasOwnProperty.call(e,"inpage")||Object.prototype.hasOwnProperty.call(e,"inpageLite")||Object.prototype.hasOwnProperty.call(e,"smartTable")?e:null}},{key:"getAppVersion",value:function(){return this.appVersion}},{key:"setAppVersion",value:function(e){return this.appVersion=e||"testing"}},{key:"getAvailableSizes",value:function(){return this.availableSizes}},{key:"setAvailableSizes",value:function(e){return Array.isArray(e)?this.availableSizes=e:null==e?this.availableSizes=null:void 0}},{key:"getSizeAliases",value:function(){return this.sizeAliases}},{key:"setSizeAliases",value:function(e){if("object"===o(e)&&!Array.isArray(e))return this.sizeAliases=e}},{key:"on",value:function(e,t){var n;(n=this.callbacks[e]||[]).push(t),this.callbacks[e]=n,this.handleEvent("integration-registered-callback",{eventName:e})}},{key:"off",value:function(e,t){var n,i,r,a;if(null!=e)if(this.handleEvent("integration-unregistered-callback",{eventName:e}),null!=t){for(i=r=0,a=(n=this.callbacks[e]||[]).length;r<a;i=++r)n[i]===t&&n.splice(i,1);this.callbacks[e]=n}else this.callbacks[e]=[]}},{key:"handleEvent",value:function(e,t){var n,i,r,a,s,o;if(r=this.callbacks,Array.isArray(r[e])){for(o=[],a=0,s=(i=r[e]).length;a<s;a++){n=i[a];try{o.push(n.apply(this,[t]))}catch(u){continue}}return o}}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=(0,t.default)({detached:!1},e),this.detached=e.detached,this.setInitialPanel(e.initialPanel),this.setActive(!0),r.default.openWidget(this),this.handleEvent("user-opened-widget")}},{key:"close",value:function(){return this.setActive(!1),r.default.closeWidget(this),this.detached=!1,this.handleEvent("user-closed-widget")}},{key:"showApps",value:function(){var e,t,i,r,a,s,o,u,l,c,d;return window.vs.apps={storeId:this.getStoreId(),storeProductId:this.getStoreProductId(),containerSelector:this.getContainers()},window.virtusize={storeId:this.getStoreId(),storeProductId:this.getStoreProductId(),containerSelector:this.getContainers(),externalUserId:null!=(l=window.vs)?l.userId:void 0},o=this.open.bind(this),r=this.on.bind(this),s=this.domain,a=this.getContainers(),e="https://"+s,i="https://"+this.getI18nDomain(),u=(t=n.default.staticDomain)+"/a/apps/"+this.getAppVersion(),(d=document.createElement("link")).setAttribute("rel","stylesheet"),d.setAttribute("href",u+"/apps.css"),document.head.appendChild(d),c=function(e){var t,n;return null!=(t=null!=(n=e.querySelector(".vs-preloader"))?n.parentNode:void 0)?t.removeChild(n):void 0},n.default.loadScript(u+"/apps.js",function(){return window.vs.apps.open({containers:a,openWidget:o,addIntegrationListener:r,removePreloader:function(e){return c(e)},cdnUrl:t,apiUrl:e+"/a/api/v3",apiVisorUrl:e+"/a/visor/v1/api",i18nUrl:i,sessionUrl:e,resourceUrl:e+"/proxy/vs-proxy.html"})})}},{key:"validate",value:function(){return this.errors=[],this.productId||this.errors.push(a.default.createError("VirtusizeWidget","productId is undefined")),this.errors}}]),e}(),e}(e||{}),module.exports=e;
},{"lodash.assign":"QpWr","./utils.coffee":"ARb9","./api.coffee":"IYdi","./view.coffee":"j1Se","./errors":"p8GN"}],"BEEO":[function(require,module,exports) {
"use strict";var e=i(require("lodash.assign")),r=i(require("./api.coffee")),t=i(require("./errors"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}var a,o={}.hasOwnProperty;a=function(i){return i.Item=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,r),this.productId=null,this.size=null,this.sizeAlias=null,this.variantId=null,this.imageUrl=null,this.color=null,this.gender=null,this.unitPrice=null,this.quantity=null,this.url=null,this.errors=[],(0,e.default)(this,t)}return u(r,[{key:"serialize",value:function(){var e,r,t;for(e in r={quantity:1,unitPrice:0},this,this)o.call(this,e)&&(t=this[e],"errors"!==e&&null!=t&&("productId"===e&&(e="externalProductId"),!t||"externalProductId"!==e&&"variantId"!==e||(t="".concat(t)),r[e]=t));return r}},{key:"shorten",value:function(){var e,r,t;for(e in r={},this,this)o.call(this,e)&&(t=this[e],"errors"!==e&&null!=t&&(r[this.shortName(e)]=t));return r}},{key:"shortName",value:function(e){switch(e){case"productId":return"p";case"size":return"s";case"sizeAlias":return"a";case"variantId":return"v";case"imageUrl":return"i";case"color":return"c";case"gender":return"g";case"unitPrice":return"u";case"quantity":return"q";case"url":return"r";case"currency":return"d";default:return e}}},{key:"validate",value:function(){return this.errors=[],this.productId||this.errors.push(t.default.createError("OrderItem","productId is undefined")),this.size||this.errors.push(t.default.createError("OrderItem","size is undefined")),this.imageUrl||this.errors.push(t.default.createError("OrderItem","imageUrl is undefined")),this.unitPrice&&"number"!=typeof this.unitPrice&&this.errors.push(t.default.createError("OrderItem","unitPrice must be a number")),this.quantity&&"number"!=typeof this.quantity&&this.errors.push(t.default.createError("OrderItem","quantity must be a number")),this.errors}}]),r}(),i.Order=function(){function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,n),this.apiKey=null,this.orderId=null,this.userId=null,this.region=null,this.totalItems=null,this.currentChunk=null,this.items=[],this.errors=[],null!=r.items&&(this.addItems(r.items),delete r.items),(0,e.default)(this,r),this.initialize()}return u(n,[{key:"initialize",value:function(){return this.postOrderAPI()}},{key:"postOrderAPI",value:function(){return r.default.request("POST","orders/",{apiKey:this.apiKey,externalOrderId:this.orderId?"".concat(this.orderId):void 0,externalUserId:"".concat(this.userId),region:this.region,items:this.items.map(function(e){return e.serialize()})})}},{key:"getApiKey",value:function(){return this.apiKey}},{key:"setApiKey",value:function(e){return this.apiKey=e}},{key:"getOrderId",value:function(){return this.orderId}},{key:"setOrderId",value:function(e){return this.orderId=e}},{key:"getUserId",value:function(){return this.userId}},{key:"setUserId",value:function(e){return this.userId=e}},{key:"getRegion",value:function(){return this.region}},{key:"setRegion",value:function(e){return this.region=e}},{key:"getItems",value:function(){return this.items}},{key:"setItems",value:function(e){return this.items=e}},{key:"addItems",value:function(e){var r,t,i,s;for(s=[],t=0,i=e.length;t<i;t++)r=e[t],s.push(this.addItem(r));return s}},{key:"addItem",value:function(e){return this.items.push(new i.Item(e))}},{key:"itemChunks",value:function(e){var r,t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(t=[],r=0;r<e.length;)t.push(e.slice(r,r+i)),r+=i;return t}},{key:"shorten",value:function(e){var r,t,i,s,n,u,a;for(s in this.totalItems=this.items.length,t=null!=e?e:this.items,u={},this,this)o.call(this,s)&&(a=this[s],"errors"!==s&&null!=a&&(u[this.shortName(s)]=a));for(u.c&&(u.c=u.c.shorten()),u.i=[],i=0,n=t.length;i<n;i++)r=t[i],u.i.push(r.shorten());return 0===u.i.length&&delete u.i,u}},{key:"shortenChunks",value:function(e){var r,t,i,s,n,u;for(t=this.itemChunks(this.items,e),this.totalChunks=t.length,u=[],i=s=0,n=t.length;s<n;i=++s)r=t[i],this.currentChunk=i,u.push(this.shorten(r));return u}},{key:"shortName",value:function(e){switch(e){case"apiKey":return"a";case"orderId":return"o";case"userId":return"u";case"region":return"r";case"cost":return"c";case"totalItems":return"ti";case"totalChunks":return"tc";case"currentChunk":return"cc";case"items":return"i";default:return e}}},{key:"validate",value:function(){var e,r,i,s,n;for(this.errors=[],this.apiKey||this.errors.push(t.default.createError("Order","apiKey is undefined")),this.orderId||this.errors.push(t.default.createError("Order","orderId is undefined")),this.userId?"guest"!==(s=this.userId.toLowerCase())&&"anonymous"!==s||this.errors.push(t.default.createError("Order","userId must be unique")):this.errors.push(t.default.createError("Order","userId is undefined")),r=0,i=(n=this.items).length;r<i;r++)e=n[r],this.errors=this.errors.concat(e.validate());return this.errors}}]),n}(),i}(a||{}),module.exports=a;
},{"lodash.assign":"QpWr","./api.coffee":"IYdi","./errors":"p8GN"}],"O6BQ":[function(require,module,exports) {
"use strict";var e,t=u(require("lodash.assign")),r=u(require("./utils.coffee")),i=u(require("./errors")),n=u(require("./mobile.coffee"));function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}e=function(e){var u;return"Virtusize",u=["setApiKey","setLanguage","setRegion","setUserId","setWidgetOverlayColor","setMobile","addWidget","addOrder","on","setAvailableSizes","setSizeAliases","ready"],e.createVirtusizeObject=function(t,r,i){return i.vs=e.VirtusizeSingleton.get(),i.vs.integrationVersion=i.version,i.vs.snippetVersion=window[window.Virtusize].snippetVersion,t(!1,i)},e.handleInitialQueue=function(t,r,i){var n,u,o,a,s;for(i.queue=window[window.Virtusize],window[window.Virtusize]=i.vs,e.sortQueue(i.queue),u=0,a=(s=i.queue).length;u<a;u++)n=(o=s[u]).shift(),"function"==typeof i.vs[n]&&i.vs[n].apply(i.vs,o),o.unshift(n);return t(!1,i)},e.sortQueue=function(e){return e.sort(function(e,t){return u.indexOf(e[0])-u.indexOf(t[0])})},e.VirtusizeSingleton=function(){var e,u,a=function(){function t(){o(this,t)}return s(t,null,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u=t||null==u?new e:u}}]),t}();return u=null,e=function(){function e(){o(this,e),this.widgets={},this.orders={}}return s(e,[{key:"setApiKey",value:function(e){return this.apiKey=e}},{key:"setUserId",value:function(e){return this.userId=e}},{key:"setRegion",value:function(e){return this.region=e}},{key:"setLanguage",value:function(e){return this.language=e}},{key:"setWidgetOverlayColor",value:function(e){return require("./view.coffee").injectOverlayStyles(e)}},{key:"setMobile",value:function(e){return n.default.isMobile=e}},{key:"isMobile",value:function(){return null!=n.default.isMobile?n.default.isMobile:null!=this.environment&&"mobile"===this.environment.widgetType}},{key:"addWidget",value:function(){var e,n;if(e={region:this.region,language:this.language},null==this.apiKey)return i.default.logError(i.default.createError("Virtusize Widget Integration","API-key is undefined, run `vs.setApiKey`.")),!1;switch(arguments.length){case 1:if(!r.default.isPlainObject(arguments[0]))return i.default.logError(i.default.createError("Virtusize Widget Integration","argument must be an object, if only one argument is provided.")),!1;(0,t.default)(e,arguments[0]);break;case 2:case 3:e.productId=arguments[0],e.buttonSelector=arguments[1];break;default:return i.default.logError(i.default.createError("Virtusize Widget Integration","wrong number of arguments.")),!1}return 3===arguments.length&&(0,t.default)(e,arguments[2]),n=new(require("./widget.coffee").VirtusizeWidget)(e),i.default.logErrors(n.validate()),this.widgets[n.getProductId()]=n,n}},{key:"getWidget",value:function(e){return this.widgets[e]}},{key:"setAvailableSizes",value:function(e,t){return this.getWidget(e).setAvailableSizes(t)}},{key:"setSizeAliases",value:function(e,t){return this.getWidget(e).setSizeAliases(t)}},{key:"ready",value:function(e){return e.call(this)}},{key:"on",value:function(e,t,r){return this.getWidget(e).on(t,r)}},{key:"off",value:function(e,t,r){return this.getWidget(e).off(t,r)}},{key:"addOrder",value:function(){var e,n;if(e={apiKey:this.apiKey},null==this.apiKey)return i.default.logError(i.default.createError("Virtusize Order Integration","API-key is undefined, run `vs.setApiKey`.")),!1;switch(arguments.length){case 1:if(!r.default.isPlainObject(arguments[0]))return i.default.logError(i.default.createError("Virtusize Order Integration","argument must be an object, if only one argument is provided.")),!1;(0,t.default)(e,arguments[0]);break;case 3:e.orderId=arguments[0],e.userId=arguments[1],(0,t.default)(e,arguments[2]);break;default:return i.default.logError(i.default.createError("Virtusize Order Integration","wrong number of arguments.")),!1}return n=new(require("./order.coffee").Order)(e),i.default.logErrors(n.validate()),this.orders[n.getOrderId()]=n,n}}]),e}(),a}.call(this),e}(e||{}),module.exports=e;
},{"lodash.assign":"QpWr","./utils.coffee":"ARb9","./errors":"p8GN","./mobile.coffee":"Th1d","./view.coffee":"j1Se","./widget.coffee":"G2tK","./order.coffee":"BEEO"}],"j1Se":[function(require,module,exports) {
"use strict";var e,t=a(require("./integration.coffee")),i=a(require("./utils.coffee")),r=a(require("./bid.coffee")),n=a(require("./mobile.coffee"));function a(e){return e&&e.__esModule?e:{default:e}}e=function(e){var a,o,l;return"vs-overlay-style","#virtusize-overlay,#virtusize-overlay-wrapper{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2147483646;display:none}#virtusize-overlay{zoom:1;background: %%rgba%%;}","rgba(0,0,0,0.5)","virtusize-overlay","virtusize-overlay-wrapper","/proxy/vs-proxy.html","virtusize-util-iframe","/integration/v3/update-browser.html","virtusize-widget-iframe",l={w:960,h:610},o={w:1022,h:650},e.imageId="vs-order-confirmation",e.utilIFrameName="virtusize-util-iframe",e.showButtons=function(e){var t;return t=e.getButtons(),Array.prototype.forEach.call(t,function(e){return e.style.visibility="visible",e.style.display="block"})},e.injectOverlayStyle=function(t,i,r){return document.getElementById("vs-overlay-style")||e.injectOverlayStyles(),t(!1,r)},e.injectOverlayStyles=function(e){var t,i,r;return r="#virtusize-overlay,#virtusize-overlay-wrapper{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2147483646;display:none}#virtusize-overlay{zoom:1;background: %%rgba%%;}".replace(/%%rgba%%/g,e||"rgba(0,0,0,0.5)"),(i=document.getElementById("vs-overlay-style"))&&i.parentNode.removeChild(i),(t=document.createElement("style")).id="vs-overlay-style",t.innerText=r,document.querySelector("head").appendChild(t)},e.setupDomButtons=function(i){var r,n;return n=t.default.VirtusizeSingleton.get(),r=i.getButtons(),Array.prototype.forEach.call(r,function(t){var r;return"visible"===getComputedStyle(t).visibility&&(t.style.visibility="hidden",t.style.display="none"),r=function(t){return t.preventDefault(),t.stopPropagation(),n.isModernBrowser&&document.addEventListener?i.open(i):e.openOldBrowserWindow(i)},t.removeEventListener("click",r),t.addEventListener("click",r,!1)})},e.createUtilIFrame=function(e,t){var r,n;return r=i.default.urlFor("/proxy/vs-proxy.html?"+i.default.param({origin:i.default.origin,"vs.bid":t.vs.bid,_:(new Date).getTime()})),n=document.createElement("iframe"),i.default.setAttributes(n,{name:"virtusize-util-iframe",class:"virtusize-util-iframe",height:0,width:0,scrolling:"no",frameborder:0,allowtransparency:"true",role:"application","aria-hidden":"true",style:"width:0; height:0; position: absolute; left:-9999px;",src:r}),n.addEventListener("load",e,!1),document.body?document.body.appendChild(n):document.addEventListener("DOMContentLoaded",function(){return document.body.appendChild(n)})},e.openOldBrowserWindow=function(t){return e.openWindow(i.default.urlFor("/integration/v3/update-browser.html?"+i.default.param({productId:t.getProductId()})),500,350)},e.openWindow=function(e,t,r){var n,a,o,l,d,u,s,c;return c=window,n=document,null!=t&&null!=r&&("status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=0,scrollbars=0",u=i.default.isNumeric(c.screenX)?c.screenX:c.screenLeft,s=i.default.isNumeric(c.screenY)?c.screenY:c.screenTop,d=i.default.isNumeric(c.outerWidth)?c.outerWidth:n.body.clientWidth,l=i.default.isNumeric(c.outerHeight)?c.outerHeight:n.body.clientHeight-22,a="width="+t+",height="+r+",left="+parseInt(u+(d-t)/2,10)+",top="+parseInt(s+(l-r)/2.5,10)+",status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=0,scrollbars=0"),null!=(o=c.open(e,"Virtusize",a))&&o.focus(),o},e.openWidget=function(i){var r;return r=t.default.VirtusizeSingleton.get(),i.detached=r.environment&&r.environment.cookiesDisabled||i.detached,i.detached?r.isMobile()?n.default.openWidgetWindow(i):e.openWidgetWindow(i):r.isMobile()?n.default.openWidget(i):e.openWidgetFrame(i)},e.openWidgetWindow=function(t){return t.win=e.openWindow(e.constructWidgetURI(t),l.w,l.h)},a=function(e){var t;return t={overflow:"hidden",background:"transparent",border:"none",position:"relative",width:o.w+"px",height:o.h+"px",margin:o.h/-2+"px auto 0",display:"block",top:"50%"},i.default.setStyle(e,t)},e.openWidgetFrame=function(t){var r,n,o;return(n=document.createElement("div")).id="virtusize-overlay",(o=document.createElement("div")).id="virtusize-overlay-wrapper",o.appendChild(n),document.body.appendChild(o),n.style.display="block",o.style.display="block",o.addEventListener("click",function(){return t.close()}),r=document.createElement("iframe"),i.default.setAttributes(r,{id:"virtusize-widget-iframe",name:"virtusize-widget-iframe",title:"Fit Illustrator by Virtusize",scrolling:"no",frameborder:0,allowtransparency:"true",onmousewheel:"",role:"application",src:e.constructWidgetURI(t)}),a(r),setTimeout(function(){return r.focus()},100),n.appendChild(r)},e.closeWidget=function(e){var i,r;if(r=t.default.VirtusizeSingleton.get(),!e.detached||null==e.win)return r.isMobile()?n.default.closeWidget(e):(i=document.getElementById("virtusize-overlay-wrapper")).parentNode.removeChild(i);try{return e.win.close(),window.focus()}catch(a){return!1}},e.constructWidgetURI=function(e,n,a){var o,l,d,u;return n=n||(new Date).getTime(),a=a||i.default.origin,u="".concat(i.default.staticDomain,"/a/fit-illustrator/v2/").concat(i.default.env,"/index.html"),o={origin:a,detached:e.detached,bid:r.default.read(),addToCartEnabled:e.isAddToCartEnabled(),storeId:e.getStoreId()},e.getAvailableSizes()&&(Array.isArray(e.getAvailableSizes())&&0===e.getAvailableSizes().length?o.as="null":o.as=e.getAvailableSizes()),e.getSizeAliases()&&(o.sa=e.getSizeAliases()),(d=t.default.VirtusizeSingleton.get()).userId&&(o.userId=d.userId),o.spid=e.getStoreProductId(),o.lang=e.getLanguage(),l="",e.getInitialPanel()&&(l="#"+e.getInitialPanel()),u+"?"+i.default.param(o)+l},e.addLoader=function(e,t){var r,n,a,o,l,d,u;return d=i.default.staticDomain+"/assets/branding/",(u=document.createElement("div")).className="vs-preloader",(r=document.createElement("div")).className="vs-preloader-content",(o=document.createElement("img")).src=d+"animated-logo.svg",o.height="24",o.alt="Virtusize animated logo",r.appendChild(o),t.length>0&&((a=document.createElement("p")).innerText=t,a.className="vs-preloader-label",r.appendChild(a)),(n=document.createElement("div")).className="vs-preloader-footer",(l=document.createElement("img")).src=d+"by-virtusize.svg",l.height="10",l.alt="By Virtusize",n.appendChild(l),u.appendChild(r),u.appendChild(n),u},e}(e||{}),module.exports=e;
},{"./integration.coffee":"O6BQ","./utils.coffee":"ARb9","./bid.coffee":"KA7j","./mobile.coffee":"Th1d"}],"ARb9":[function(require,module,exports) {
"use strict";var e,t=r(require("./ogp.coffee"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=function(e){var r,o,i,a;return o=document,a=window,r={ios:[7,0,4],android:[4,4,4]},i=/[^.]*\.([^.]*|..\...|...\...)$/,e.cohortCookieKey="vs.cohort",e.cohortCookieExpiresInDays=7,e.checkBrowser=function(t,r,n){var o,i;return i=n.apiUrl||"staging.virtusize.com",e.vsHost=i,e.vsCDNHost="https://cdn."+i,e.origin=location.origin,e.session="https://"+i,e.domain=i.split(".").splice(1).join("."),e.env="staging.virtusize.com"===i?"staging":"staging.virtusize.jp"===i?"testing":"latest",o="latest"===e.env?"":"/stg",e.servicesDomain="https://services."+e.domain+o,e.staticDomain="https://static.api."+e.domain,n.vs.isModernBrowser=e.isModernBrowser(),t(!1,n)},e.checkEnvironment=function(e,t,r){return r.vs.isModernBrowser?require("./view.coffee").createUtilIFrame(function(){return e(!1,r)},r):e(!1,r)},e.checkMobileVersion=function(t,r,n){var o;if(o=navigator.userAgent,!e.isLegacySystem(o))return t(!1,n)},e.isLegacySystem=function(t){var n;try{if(t.match(/iPhone/i)||t.match(/iPod/i)||t.match(/iPad/i)){if(n=t.match(/OS\s([0-9_]*[0-9])\slike/)[1].split("_"),!e.isAllowedMobileVersion(r.ios,n))return!0}else if(t.match(/Android/i)){if(n=t.match(/Android\s([0-9.]*[0-9])/)[1].split("."),!e.isAllowedMobileVersion(r.android,n))return!0}else if(t.match(/MSIE\s*[7|8|6|5]/i))return!0}catch(o){return!0}return!1},e.isAllowedMobileVersion=function(e,t){var r,n,o,i,a,u;if(!Array.isArray(e)||!Array.isArray(t))return!1;for(r=function(e,t){var r,n;for(r=0,n=t-1;0<=n?r<=n:r>=n;0<=n?++r:--r)e.push(0)},(i=e.length-t.length)>0?r(t,i):i<0&&r(e,-i),n=o=0,a=e.length;0<=a?o<=a:o>=a;n=0<=a?++o:--o){if(u=parseInt(t[n]),isNaN(parseFloat(u))&&isFinite(u))return!1;if(u>e[n])return!0;if(u<e[n])return!1;if(u===e[n]){if(t.length!==n+1)continue;return!0}}return!1},e.sendProductMetadata=function(e){var r,n,o,i,a,u;if(n={},(a=t.default.parse()).image||a["image:url"]||null!=e.getProductImageUrl())return o=require("./integration.coffee"),r=require("./api.coffee"),u=o.VirtusizeSingleton.get(),n.ogp=a,(i=document.querySelector("link[rel=canonical]"))&&(n.canonicalUrl=i.href),n.externalId=e.getProductId(),null!=e.getProductImageUrl()&&(n.imageUrl=e.getProductImageUrl()),n.storeId=e.getStoreId(),n.apiKey=u.apiKey,r.createProductMetaData(n)},e.tryTwice=function(e,t){return function(r,n,o){var i;return i=function(i,a){return i?(t=t||"complete"===document.readyState)(function(){return e(r,n,o)}):r(i,a)},e(i,n,o)}},e.urlFor=function(t,r){return(r?e.vsCDNHost:"https://"+e.vsHost)+t},e.browserLanguage=function(){return navigator.language?navigator.language:navigator.userLanguage},e.uriParam=function(e,t){var r;return(r=new RegExp("[?&]"+t+"=([^&]*)").exec(e))?decodeURIComponent(r[1].replace(/\+/g," ")):null},e.setAttributes=function(e,t){return Object.keys(t).forEach(function(r){return e.setAttribute(r,t[r])})},e.setStyle=function(e,t){return Object.keys(t).forEach(function(r){return e.style[r]=t[r]})},e.loadScript=function(t,r){var n,i,a;return i="script",n=o.getElementsByTagName(i)[0],a=o.createElement(i),e.setAttributes(a,{async:!0,type:"text/javascript",charset:"utf-8",src:t}),a.onload=a.onreadystatechange=function(e,t){if((t||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),a=void 0,!t&&null!=r))return r()},n.parentNode.insertBefore(a,n)},e.isModernBrowser=function(){return!!window.postMessage&&!!window.JSON&&!!JSON.stringify},e.hasHashtag=function(e){return a.location.hash&&0===a.location.hash.indexOf("#"+e)},e.readOrCreateCohort=function(){var t;return null==(t=e.uriParam(window.location,e.cohortCookieKey))&&(t="direct"),t},e.isNumeric=function(e){return!Array.isArray(e)&&e-parseFloat(e)>=0},e.isPlainObject=function(e){return!(null==e||"object"!==n(e)||e.nodeType||null!==e&&e===e.window)&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))},e.buildParams=function(t,r,o){var i,a,u;if(a=/\[\]$/,Array.isArray(r))return r.forEach(function(r,i){return a.test(t)?o(t,r):e.buildParams(t+"["+("object"===n(r)?i:"")+"]",r,o)});if(e.isPlainObject(r)){for(i in u=[],r)u.push(e.buildParams(t+"["+i+"]",r[i],o));return u}return o(t,r)},e.param=function(t){var r,n,o,i;for(n in o=/%20/g,i=[],r=function(e,t){return t=null!=t?t:"",i.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},t)e.buildParams(n,t[n],r);return i.join("&").replace(o,"+")},e.tld=function(e){var t;return(t=e.match(i))?"."+t[0]:e},e}(e||{}),module.exports=e;
},{"./ogp.coffee":"N69c","./view.coffee":"j1Se","./integration.coffee":"O6BQ","./api.coffee":"IYdi"}],"h34o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Flow=void 0;var e=o(require("./utils.coffee")),t=o(require("./bid.coffee")),n=o(require("./integration.coffee")),u=o(require("./proxy.coffee")),r=o(require("./view.coffee"));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[],u=setTimeout(function(){return u=null,function e(t,u){for(var r=[],o=[],i=n.shift()||[],c=i.length,f=1===c,l=function(n){i[n](function(t,u){if(r[n]=t,o[n]=u,n===c-1)return e(f?r[0]:r,f?o[0]:o)},t,u)},s=0;s<c;s++)l(s)}(!1,t)},0);return e={destroy:function(){u&&clearTimeout(u)},parallel:function(t,u){return!u&&n[n.length-1]instanceof Array||n.push([]),n[n.length-1].push(t),e},sequence:function(t){return e.parallel(t,!0)}}};exports.Flow=i;var c={start:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(o).sequence(n.default.createVirtusizeObject).sequence(e.default.checkBrowser).sequence(e.default.checkMobileVersion).sequence(u.default.setupReceiveMessage).sequence(t.default.setOnContext).sequence(e.default.checkEnvironment).sequence(n.default.handleInitialQueue).sequence(r.default.injectOverlayStyle)}};exports.default=c;
},{"./utils.coffee":"ARb9","./bid.coffee":"KA7j","./integration.coffee":"O6BQ","./proxy.coffee":"ES9q","./view.coffee":"j1Se"}],"epB2":[function(require,module,exports) {
"use strict";var r=i(require("./flow.js"));function i(r){return r&&r.__esModule?r:{default:r}}var e={version:"7.3.2",apiUrl:window.vs&&window.vs.apiUrl||"staging.virtusize.com"};r.default.start(e);
},{"./flow.js":"h34o"}]},{},["epB2"], null)
//# sourceMappingURL=v7.js.map