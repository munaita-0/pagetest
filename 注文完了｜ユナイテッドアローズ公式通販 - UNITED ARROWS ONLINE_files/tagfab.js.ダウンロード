!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tagfab",[],e):"object"==typeof exports?exports.tagfab=e():t.tagfab=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){t.exports=n(12).Promise},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function r(t,e){function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function s(t,e){return function(n,r){e(n,r,t)}}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(e,n,r,i){function o(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=t))(function(t,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function a(t){try{u(i.throw(t))}catch(t){r(t)}}function u(e){e.done?t(e.value):o(e.value).then(s,a)}u((i=i.apply(e,n||[])).next())})}function c(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&n[0]?o.return:n[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function h(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function f(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function g(e,n,r){function i(e){f[e]&&(h[e]=function(n){return new t(function(t,r){l.push([e,n,t,r])>1||o(e,n)})})}function o(t,e){try{s(f[t](e))}catch(t){c(l[0][3],t)}}function s(e){e.value instanceof y?t.resolve(e.value.v).then(a,u):c(l[0][2],e)}function a(t){o("next",t)}function u(t){o("throw",t)}function c(t,e){t(e),l.shift(),l.length&&o(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h,f=r.apply(e,n||[]),l=[];return h={},i("next"),i("throw"),i("return"),h[Symbol.asyncIterator]=function(){return this},h}function m(t){function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:y(t[e](n)),done:"return"===e}:i?i(n):n}:i}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n}function b(e){function n(n){i[n]=e[n]&&function(i){return new t(function(t,o){i=e[n](i),r(t,o,i.done,i.value)})}}function r(e,n,r,i){t.resolve(i).then(function(t){e({value:t,done:r})},n)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=e[Symbol.asyncIterator];return o?o.call(e):(e="function"==typeof l?l(e):e[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function I(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}e.__extends=r,n.d(e,"__assign",function(){return S}),e.__rest=i,e.__decorate=o,e.__param=s,e.__metadata=a,e.__awaiter=u,e.__generator=c,e.__createBinding=h,e.__exportStar=f,e.__values=l,e.__read=p,e.__spread=d,e.__spreadArrays=v,e.__await=y,e.__asyncGenerator=g,e.__asyncDelegator=m,e.__asyncValues=b,e.__makeTemplateObject=w,e.__importStar=_,e.__importDefault=I,e.__classPrivateFieldGet=E,e.__classPrivateFieldSet=T;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},S=function(){return S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},S.apply(this,arguments)}}.call(e,n(0))},function(t,e,n){"use strict";(function(t){/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function r(t){function e(t){delete d[t]}function n(t){if(t=t||y,!c.contains(d,t))throw p.create("no-app",{appName:t});return d[t]}function r(e,n){if(void 0===n&&(n={}),"object"!=typeof n||null===n){n={name:n}}var r=n;void 0===r.name&&(r.name=y);var i=r.name;if("string"!=typeof i||!i)throw p.create("bad-app-name",{appName:String(i)});if(c.contains(d,i))throw p.create("duplicate-app",{appName:i});var o=new t(e,r,b);return d[i]=o,o}function i(){return Object.keys(d).map(function(t){return d[t]})}function o(e){var r,i,o=e.name;if(v.has(o))return m.debug("There were multiple attempts to register component "+o+"."),"PUBLIC"===e.type?b[o]:null;if(v.set(o,e),"PUBLIC"===e.type){var s=function(t){if(void 0===t&&(t=n()),"function"!=typeof t[o])throw p.create("invalid-app-argument",{appName:o});return t[o]()};void 0!==e.serviceProps&&c.deepExtend(s,e.serviceProps),b[o]=s,t.prototype[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,o).apply(this,e.multipleInstances?t:[])}}try{for(var a=u.__values(Object.keys(d)),h=a.next();!h.done;h=a.next()){var f=h.value;d[f]._addComponent(e)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return"PUBLIC"===e.type?b[o]:null}function s(t,e,n){var r,i=null!==(r=g[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void m.warn(u.join(" "))}o(new h.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))}function a(t,e){if(null!==t&&"function"!=typeof t)throw p.create("invalid-log-argument",{appName:name});f.setUserLogHandler(t,e)}function l(t,e){return"serverAuth"===e?null:e}var d={},v=new Map,b={__esModule:!0,initializeApp:r,app:n,registerVersion:s,setLogLevel:f.setLogLevel,onLog:a,apps:null,SDK_VERSION:w,INTERNAL:{registerComponent:o,removeApp:e,components:v,useAsService:l}};return b.default=b,Object.defineProperty(b,"apps",{get:i}),n.App=t,b}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function i(){function t(t){c.deepExtend(e,t)}var e=r(b);return e.INTERNAL=u.__assign(u.__assign({},e.INTERNAL),{createFirebaseNamespace:i,extendNamespace:t,createSubscribe:c.createSubscribe,ErrorFactory:c.ErrorFactory,deepExtend:c.deepExtend}),e}function o(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}Object.defineProperty(e,"__esModule",{value:!0});var s,a,u=n(2),c=n(4),h=n(6),f=n(7),l=(s={},s["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",s["bad-app-name"]="Illegal App name: '{$appName}",s["duplicate-app"]="Firebase App named '{$appName}' already exists",s["app-deleted"]="Firebase App named '{$appName}' already deleted",s["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",s["invalid-log-argument"]="First argument to `onLog` must be null or a function.",s),p=new c.ErrorFactory("app","Firebase",l),d="@firebase/app",v="0.6.11",y="[DEFAULT]",g=(a={},a[d]="fire-core",a["@firebase/analytics"]="fire-analytics",a["@firebase/auth"]="fire-auth",a["@firebase/database"]="fire-rtdb",a["@firebase/functions"]="fire-fn",a["@firebase/installations"]="fire-iid",a["@firebase/messaging"]="fire-fcm",a["@firebase/performance"]="fire-perf",a["@firebase/remote-config"]="fire-rc",a["@firebase/storage"]="fire-gcs",a["@firebase/firestore"]="fire-fst",a["fire-js"]="fire-js",a["firebase-wrapper"]="fire-js-all",a),m=new f.Logger("@firebase/app"),b=function(){function e(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=c.deepCopy(t),this.container=new h.ComponentContainer(e.name),this._addComponent(new h.Component("app",function(){return o},"PUBLIC"));try{for(var s=u.__values(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var f=a.value;this._addComponent(f)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new t(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),t.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(t,e){return void 0===e&&(e=y),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},e.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=y),this.container.getProvider(t).clearInstance(e)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){m.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw p.create("app-deleted",{appName:this.name_})},e}();b.prototype.name&&b.prototype.options||b.prototype.delete||console.log("dc");var w="7.20.0",_=i(),I=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(o(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(c.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var E=self.firebase.SDK_VERSION;E&&E.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=_.initializeApp;_.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return c.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,t)};var A=_;!/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){t.INTERNAL.registerComponent(new h.Component("platform-logger",function(t){return new I(t)},"PRIVATE")),t.registerVersion(d,v,e),t.registerVersion("fire-js","")}(A),e.default=A,e.firebase=A}).call(e,n(0))},function(t,e,n){"use strict";(function(t,r){/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=o(t[r],e[r]));return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function a(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(s())}function u(){try{return"[object process]"===Object.prototype.toString.call(r.process)}catch(t){return!1}}function c(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function l(){return s().indexOf("Electron/")>=0}function p(){var t=s();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d(){return s().indexOf("MSAppHost/")>=0}function v(){return!0===V.NODE_CLIENT||!0===V.NODE_ADMIN}function y(){return!u()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g(){return"indexedDB"in self&&null!=indexedDB}function m(){return new t(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function b(){return!(!navigator||!navigator.cookieEnabled)}function w(t,e){return t.replace(Q,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function A(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function S(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function N(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n],o=i[0],s=i[1];!function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(o,s)}return e.length?"&"+e.join("&"):""}function k(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}function O(t,e){var n=new it(t,e);return n.subscribe.bind(n)}function D(e,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];t.resolve(!0).then(function(){e.apply(void 0,r)}).catch(function(t){n&&n(t)})}}function C(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}function L(){}function R(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function x(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(R(t,e,r)+"must be a valid firebase namespace.")}function P(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(R(t,e,r)+"must be a valid function.")}function M(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(R(t,e,r)+"must be a valid context object.")}function j(t,e,n){void 0===e&&(e=ut),void 0===n&&(n=ct);var r=e*Math.pow(n,t),i=Math.round(ft*r*(Math.random()-.5)*2);return Math.min(ht,r+i)}Object.defineProperty(e,"__esModule",{value:!0});var U=n(2),V={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},F=function(t,e){if(!t)throw q(e)},q=function(t){return new Error("Firebase Database ("+V.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},B=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},G=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=t[n++],s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{var o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},z={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,f=(3&o)<<4|a>>4,l=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(l=64)),r.push(n[h],n[f],n[l],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var h=i<t.length,f=h?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==f)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==c){var p=a<<4&240|c>>2;if(r.push(p),64!==f){var d=c<<6&192|f;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},H=function(t){var e=B(t);return z.encodeByteArray(e,!0)},W=function(t){try{return z.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},K=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new t(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},e}(),X="FirebaseError",Y=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=X,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,J.prototype.create),i}return U.__extends(e,t),e}(Error),J=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Y(i,a),c=0,h=Object.keys(r);c<h.length;c++){var f=h[c];"_"!==f.slice(-1)&&(f in u&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),u[f]=r[f])}return u},t}(),Q=/\{\$([^}]+)}/g,$=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=_(W(o[0])||""),n=_(W(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},Z=function(t){var e=$(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},tt=function(t){var e=$(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},et=function(t){var e=$(t),n=e.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},nt=function(t){var e=$(t).claims;return"object"==typeof e&&!0===e.admin},rt=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);var i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),it=function(){function e(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=t.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(t){r.error(t)})}return e.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=C(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},e.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},e.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},e}(),ot=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},st=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,F(r<t.length,"Surrogate pair missing trail surrogate.");i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},at=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},ut=1e3,ct=2,ht=144e5,ft=.5;e.CONSTANTS=V,e.Deferred=K,e.ErrorFactory=J,e.FirebaseError=Y,e.MAX_VALUE_MILLIS=ht,e.RANDOM_FACTOR=ft,e.Sha1=rt,e.areCookiesEnabled=b,e.assert=F,e.assertionError=q,e.async=D,e.base64=z,e.base64Decode=W,e.base64Encode=H,e.calculateBackoffMillis=j,e.contains=E,e.createSubscribe=O,e.decode=$,e.deepCopy=i,e.deepExtend=o,e.errorPrefix=R,e.getUA=s,e.isAdmin=nt,e.isBrowser=c,e.isBrowserExtension=h,e.isElectron=l,e.isEmpty=A,e.isIE=p,e.isIndexedDBAvailable=g,e.isMobileCordova=a,e.isNode=u,e.isNodeSdk=v,e.isReactNative=f,e.isSafari=y,e.isUWP=d,e.isValidFormat=et,e.isValidTimestamp=Z,e.issuedAtTime=tt,e.jsonEval=_,e.map=S,e.querystring=N,e.querystringDecode=k,e.safeGet=T,e.stringLength=at,e.stringToByteArray=st,e.stringify=I,e.validateArgCount=ot,e.validateCallback=P,e.validateContextObject=M,e.validateIndexedDBOpenable=m,e.validateNamespace=x}).call(e,n(0),n(1))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&a())}function a(){if(!v){var t=i(s);v=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var h,f,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,d=[],v=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.prependListener=c,l.prependOnceListener=c,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";(function(t){function r(t){return t===u?void 0:t}function i(t){return"EAGER"===t.instantiationMode}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(4),a=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),u="[DEFAULT]",c=function(){function e(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(t){void 0===t&&(t=u);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new s.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},e.prototype.getImmediate=function(t){var e=o.__assign({identifier:u,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(i);if(!s){if(r)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(r)return null;throw t}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,i(t))try{this.getOrInitializeService(u)}catch(t){}try{for(var r=o.__values(this.instancesDeferred.entries()),s=r.next();!s.done;s=r.next()){var a=o.__read(s.value,2),c=a[0],h=a[1],f=this.normalizeInstanceIdentifier(c);try{var l=this.getOrInitializeService(f);h.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},e.prototype.clearInstance=function(t){void 0===t&&(t=u),this.instancesDeferred.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,t.all(o.__spread(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,r(t)),this.instances.set(t,e)),e||null},e.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:u:t},e}(),h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new c(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=a,e.ComponentContainer=h,e.Provider=c}).call(e,n(0))},function(t,e,n){"use strict";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function i(t){u.forEach(function(e){e.setLogLevel(t)})}function o(t,e){for(var n=0,r=u;n<r.length;n++){var i=r[n];!function(n){var r=null;e&&e.level&&(r=c[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}}(i)}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"LogLevel",function(){return a}),n.d(e,"Logger",function(){return p}),n.d(e,"setLogLevel",function(){return i}),n.d(e,"setUserLogHandler",function(){return o});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var s,a,u=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(a||(a={}));var c={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},h=a.INFO,f=(s={},s[a.DEBUG]="log",s[a.VERBOSE]="log",s[a.INFO]="info",s[a.WARN]="warn",s[a.ERROR]="error",s),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=f[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},p=function(){function t(t){this.name=t,this._logLevel=h,this._logHandler=l,this._userLogHandler=null,u.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?c[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.order=void 0;var i=n(9),o=r(i),s=n(10),a=r(s),u=function(t){var e="";return t.forEach(function(t){var n=window.location.hostname;-1!==n.indexOf(t,n.length-t.length)&&(e=t)}),e},c=function(t,e){var n=t.orderId,r=t.units,i=o.default.get("tagfabView");n&&r&&a.default.firestore().collection("domains").get().then(function(t){var o=t.docs.map(function(t){return t.id}),s=u(o);s&&a.default.firestore().collection("events").add({created:a.default.firestore.FieldValue.serverTimestamp(),hostname:window.location.hostname,name:"order",domain:s,orderId:n,units:r,uid:e?e.uid:"",viewData:i||"{}"})})},h=function(t){var e=!0;if(Array.isArray(t.units)?t.units.forEach(function(t){Number.isInteger(t.price)&&Number.isInteger(t.quantity)||(e=!1)}):e=!1,!e)return e;var n=o.default.get("tagfabView"),r=o.default.get("tagfabUid");return n?(c(t,{uid:r}),e):(a.default.auth().onAuthStateChanged(function(e){if(e)c(t,e);else{var n=o.default.get("tagfabToken");n&&a.default.auth().signInWithCustomToken(n).then(function(e){return c(t,e.user)})}}),e)};e.order=h},function(t,e,n){var r,i;!function(o){var s;if(r=o,void 0!==(i="function"==typeof r?r.call(e,n,e,t):r)&&(t.exports=i),s=!0,t.exports=o(),s=!0,!s){var a=window.Cookies,u=window.Cookies=o();u.noConflict=function(){return window.Cookies=a,u}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(r){function i(){}function o(e,n,o){if("undefined"!=typeof document){o=t({path:"/"},i.defaults,o),"number"==typeof o.expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=e+"="+n+a}}function s(t,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(a[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(i[c]=u,t===c)break}catch(t){}}return t?i[t]:i}}return i.set=o,i.get=function(t){return s(t,!1)},i.getJSON=function(t){return s(t,!0)},i.remove=function(e,n){o(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}return n(function(){})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=function(t){return t&&t.__esModule?t:{default:t}}(r);n(14),n(16);var o={apiKey:"AIzaSyBCtudn16LPViN1QeY706MA_Q_qP_2xJ14",databaseURL:"https://tag-fab.firebaseio.com",projectId:"tag-fab",storageBucket:"tagfab",messagingSenderId:"603472315266"};i.default.initializeApp(o),e.default=i.default,t.exports=e.default},function(t,e,n){"use strict";var r=n(3),i=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(r);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.default.registerVersion("firebase","7.24.0","app"),t.exports=i.default},function(t,e,n){(function(e,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function o(t){H=t}function s(t){W=t}function a(){return function(){z(c)}}function u(){var t=setTimeout;return function(){return t(c,1)}}function c(){for(var t=0;t<G;t+=2){(0,$[t])($[t+1]),$[t]=void 0,$[t+1]=void 0}G=0}function h(t,e){var n=arguments,r=this,i=new this.constructor(l);void 0===i[tt]&&C(i);var o=r._state;return o?function(){var t=n[o-1];W(function(){return k(o,i,t,r._result)})}():T(r,i,t,e),i}function f(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(l);return w(n,t),n}function l(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(t){return it.error=t,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function g(t,e,n){W(function(t){var r=!1,i=y(n,e,function(n){r||(r=!0,e!==n?w(t,n):I(t,n))},function(e){r||(r=!0,E(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,E(t,i))},t)}function m(t,e){e._state===nt?I(t,e._result):e._state===rt?E(t,e._result):T(e,void 0,function(e){return w(t,e)},function(e){return E(t,e)})}function b(t,e,n){e.constructor===t.constructor&&n===h&&e.constructor.resolve===f?m(t,e):n===it?E(t,it.error):void 0===n?I(t,e):i(n)?g(t,e,n):I(t,e)}function w(e,n){e===n?E(e,p()):t(n)?b(e,n,v(n)):I(e,n)}function _(t){t._onerror&&t._onerror(t._result),A(t)}function I(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&W(A,t))}function E(t,e){t._state===et&&(t._state=rt,t._result=e,W(_,t))}function T(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+nt]=n,i[o+rt]=r,0===o&&t._state&&W(A,t)}function A(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?k(n,r,i,o):i(o);t._subscribers.length=0}}function S(){this.error=null}function N(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function k(t,e,n,r){var o=i(n),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if(s=N(n,r),s===ot?(c=!0,a=s.error,s=null):u=!0,e===s)return void E(e,d())}else s=r,u=!0;e._state!==et||(o&&u?w(e,s):c?E(e,a):t===nt?I(e,s):t===rt&&E(e,s))}function O(t,e){try{e(function(e){w(t,e)},function(e){E(t,e)})}catch(e){E(t,e)}}function D(){return st++}function C(t){t[tt]=st++,t._state=void 0,t._result=void 0,t._subscribers=[]}function L(t,e){this._instanceConstructor=t,this.promise=new t(l),this.promise[tt]||C(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&I(this.promise,this._result))):E(this.promise,R())}function R(){return new Error("Array Methods must be provided an Array")}function x(t){return new L(this,t).promise}function P(t){var e=this;return new e(B(t)?function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function M(t){var e=this,n=new e(l);return E(n,t),n}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this[tt]=D(),this._result=this._state=void 0,this._subscribers=[],l!==t&&("function"!=typeof t&&j(),this instanceof V?O(this,t):U())}function F(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=V}var q=void 0;q=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=q,G=0,z=void 0,H=void 0,W=function(t,e){$[G]=t,$[G+1]=e,2===(G+=2)&&(H?H(c):Z())},K="undefined"!=typeof window?window:void 0,X=K||{},Y=X.MutationObserver||X.WebKitMutationObserver,J="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),Z=void 0;Z=J?function(){return function(){return e.nextTick(c)}}():Y?function(){var t=0,e=new Y(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():Q?function(){var t=new MessageChannel;return t.port1.onmessage=c,function(){return t.port2.postMessage(0)}}():void 0===K?function(){try{var t=n(13);return z=t.runOnLoop||t.runOnContext,a()}catch(t){return u()}}():u();var tt=Math.random().toString(36).substring(16),et=void 0,nt=1,rt=2,it=new S,ot=new S,st=0;return L.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===et&&n<t;n++)this._eachEntry(e[n],n)},L.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(t);if(i===h&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===V){var o=new n(l);b(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},L.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?E(r,n):this._result[e]=n),0===this._remaining&&I(r,this._result)},L.prototype._willSettleAt=function(t,e){var n=this;T(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},V.all=x,V.race=P,V.resolve=f,V.reject=M,V._setScheduler=o,V._setAsap=s,V._asap=W,V.prototype={constructor:V,then:h,catch:function(t){return this.then(null,t)}},F(),V.polyfill=F,V.Promise=V,V})}).call(e,n(5),n(1))},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(15);n.n(r)},function(t,e,n){(function(t,e){(function(){function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}function o(){}function s(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function a(t){var e=s(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){return"function"==s(t)}function c(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function h(t){return Object.prototype.hasOwnProperty.call(t,jc)&&t[jc]||(t[jc]=++Uc)}function f(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function p(t,e,n){return p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:l,p.apply(null,arguments)}function d(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function v(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function y(t,e,n){this.code=qc+t,this.message=e||Bc[t]||"",this.a=n||null}function g(t){var e=t&&t.code;return e?new y(e.substring(qc.length),t.message,t.serverResponse):null}function m(t){for(var e in Gc)if(Gc[e].id===t)return t=Gc[e],{firebaseEndpoint:t.Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function b(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function w(t){if(Error.captureStackTrace)Error.captureStackTrace(this,w);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function _(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");w.call(this,n+t[r])}function I(t,e){throw new _("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function E(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function T(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function A(){this.b=this.a=null}function S(){var t=jh,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function N(){this.next=this.b=this.a=null}function k(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}function O(t){t:{for(var e=pi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}function D(t,e){return 0<=Wc(t,e)}function C(t,e){e=Wc(t,e);var n;return(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function L(t,e){var n=0;k(t,function(r,i){e.call(void 0,r,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&n++})}function R(t){return Array.prototype.concat.apply([],arguments)}function x(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function P(t,e){return-1!=t.indexOf(e)}function M(t,e){return t<e?-1:t>e?1:0}function j(t){return P(Hc,t)}function U(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function V(t){for(var e in t)return!1;return!0}function F(t){var e,n={};for(e in t)n[e]=t[e];return n}function q(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<ah.length;o++)n=ah[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function B(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||xc,r.Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(c(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;I("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function G(t,e){this.a=t===ch&&e||"",this.b=uh}function z(t){return t instanceof G&&t.constructor===G&&t.b===uh?t.a:(I("expected object of type Const, got '"+t+"'"),"type_error:Const")}function H(t,e){this.a=t===dh&&e||"",this.b=ph}function W(t){return t instanceof H&&t.constructor===H&&t.b===ph?t.a:(I("expected object of type TrustedResourceUrl, got '"+t+"' of type "+s(t)),"type_error:TrustedResourceUrl")}function K(t,e){var n=z(t);if(!lh.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(fh,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof G?z(t):encodeURIComponent(String(t))}),new H(dh,t)}function X(t,e){this.a=t===gh&&e||"",this.b=yh}function Y(t){return t instanceof X&&t.constructor===X&&t.b===yh?t.a:(I("expected object of type SafeUrl, got '"+t+"' of type "+s(t)),"type_error:SafeUrl")}function J(t){return t instanceof X?t:(t="object"==typeof t&&t.sa?t.ra():String(t),vh.test(t)||(t="about:invalid#zClosurez"),new X(gh,t))}function Q(){this.a="",this.b=mh}function $(t){return t instanceof Q&&t.constructor===Q&&t.b===mh?t.a:(I("expected object of type SafeHtml, got '"+t+"' of type "+s(t)),"type_error:SafeHtml")}function Z(t){var e=new Q;return e.a=t,e}function tt(t){var e=new H(dh,z(hh));B(t,"HTMLIFrameElement"),t.src=W(e).toString()}function et(t,e){B(t,"HTMLScriptElement"),t.src=W(e),null===Mc&&(e=xc.document,Mc=(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&Pc.test(e)?e:""),(e=Mc)&&t.setAttribute("nonce",e)}function nt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function rt(t){return ih.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace($c,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Zc,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(th,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(eh,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nh,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rh,"&#0;"))),t}function it(t){return it[" "](t),t}function ot(t,e){var n=Ch;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function st(){var t=xc.document;return t?t.documentMode:void 0}function at(t){return ot(t,function(){for(var e=0,n=Qc(String(wh)).split("."),r=Qc(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=M(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||M(0==s[2].length,0==a[2].length)||M(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}function ut(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ct(t,e){U(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ph.hasOwnProperty(n)?t.setAttribute(Ph[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}function ht(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!xh&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',rt(s.name),'"'),s.type){o.push(' type="',rt(s.type),'"');var a={};q(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=lt(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ct(o,s)),2<r.length&&ft(i,o,r),o}function ft(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!a(o)||c(o)&&0<o.nodeType?r(o):Kc(pt(o)?x(o):o,r)}}function lt(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pt(t){if(t&&"number"==typeof t.length){if(c(t))return"function"==typeof t.item||"string"==typeof t.item;if(u(t))return"function"==typeof t.item}return!1}function dt(t){xc.setTimeout(function(){throw t},0)}function vt(){var t=xc.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!j("Presto")&&(t=function(){var t=lt(document,"IFRAME");t.style.display="none",tt(t),document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write($(bh)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=p(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!j("Trident")&&!j("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){xc.setTimeout(t,0)}}function yt(t,e){Rh||gt(),Mh||(Rh(),Mh=!0),jh.add(t,e)}function gt(){if(xc.Promise&&xc.Promise.resolve){var t=xc.Promise.resolve(void 0);Rh=function(){t.then(mt)}}else Rh=function(){var t=mt;!u(xc.setImmediate)||xc.Window&&xc.Window.prototype&&!j("Edge")&&xc.Window.prototype.setImmediate==xc.setImmediate?(Lh||(Lh=vt()),Lh(t)):xc.setImmediate(t)}}function mt(){for(var t;t=S();){try{t.a.call(t.b)}catch(t){dt(t)}T(zc,t)}Mh=!1}function bt(t,e){if(this.a=Uh,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=o)try{var n=this;t.call(e,function(t){Dt(n,Vh,t)},function(t){if(!(t instanceof Ut))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Dt(n,Fh,t)})}catch(t){Dt(this,Fh,t)}}function wt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function _t(t,e,n){var r=qh.get();return r.g=t,r.b=e,r.f=n,r}function It(t){if(t instanceof bt)return t;var e=new bt(o);return Dt(e,Vh,t),e}function Et(t){return new bt(function(e,n){n(t)})}function Tt(t,e,n){Ct(t,e,n,null)||yt(d(e,t))}function At(t){return new bt(function(e,n){var r=t.length,i=[];if(r)for(var o,s=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Tt(o,d(s,u),a);else e(i)})}function St(t){return new bt(function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},s=0;s<t.length;s++)i=t[s],Tt(i,d(o,s,!0),d(o,s,!1));else e(r)})}function Nt(t,e){if(t.a==Uh)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Uh&&1==r?Nt(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):xt(n),Pt(n,i,Fh,e)))}t.c=null}else Dt(t,Fh,e)}function kt(t,e){t.b||t.a!=Vh&&t.a!=Fh||Rt(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ot(t,e,n,r){var i=_t(null,null,null);return i.a=new bt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ut?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,kt(t,i),i.a}function Dt(t,e,n){t.a==Uh&&(t===n&&(e=Fh,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ct(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Rt(t),e!=Fh||n instanceof Ut||jt(t,n)))}function Ct(t,e,n,r){if(t instanceof bt)return kt(t,_t(e||o,n||null,r)),!0;if(b(t))return t.then(e,n,r),!0;if(c(t))try{var i=t.then;if(u(i))return Lt(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Lt(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}function Rt(t){t.h||(t.h=!0,yt(t.fc,t))}function xt(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pt(t,e,n,r){if(n==Fh&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Mt(e,n,r);else try{e.c?e.g.call(e.f):Mt(e,n,r)}catch(t){Bh.call(null,t)}T(qh,e)}function Mt(t,e,n){e==Vh?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function jt(t,e){t.g=!0,yt(function(){t.g&&Bh.call(null,e)})}function Ut(t){w.call(this,t)}function Vt(){0!=Gh&&(zh[h(this)]=this),this.xa=this.xa,this.oa=this.oa}function Ft(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Gh)){var e=h(t);if(0!=Gh&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete zh[e]}}function qt(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Bt(t,e){if(qt.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ah){t:{try{it(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Yh[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}function Gt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Qh,this.va=this.Oa=!1}function zt(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function Ht(t){this.src=t,this.a={},this.b=0}function Wt(t,e){var n=e.type;n in t.a&&C(t.a[n],e)&&(zt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Kt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}function Xt(t,e,n,r,i){if(r&&r.once)Qt(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Xt(t,e[o],n,r,i);else n=oe(n),t&&t[Jh]?ae(t,e,n,c(r)?!!r.capture:!!r,i):Yt(t,e,n,!1,r,i)}function Yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=c(i)?!!i.capture:!!i,a=ie(t);if(a||(t[$h]=a=new Ht(t)),n=a.add(e,n,r,s,o),!n.proxy){if(r=Jt(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xh||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(te(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}tf++}}function Jt(){var t=re,e=Wh?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function Qt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Qt(t,e[o],n,r,i);else n=oe(n),t&&t[Jh]?ue(t,e,n,c(r)?!!r.capture:!!r,i):Yt(t,e,n,!0,r,i)}function $t(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$t(t,e[o],n,r,i);else r=c(r)?!!r.capture:!!r,n=oe(n),t&&t[Jh]?(t=t.v,(e=String(e).toString())in t.a&&(o=t.a[e],-1<(n=Kt(o,n,r,i))&&(zt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=ie(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Kt(e,n,r,i)),(n=-1<t?e[t]:null)&&Zt(n))}function Zt(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Jh])Wt(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(te(n),r):e.addListener&&e.removeListener&&e.removeListener(r),tf--,(n=ie(e))?(Wt(n,t),0==n.b&&(n.src=null,e[$h]=null)):zt(t)}}}function te(t){return t in Zh?Zh[t]:Zh[t]="on"+t}function ee(t,e,n,r){var i=!0;if((t=ie(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=ne(o,r),i=i&&!1!==o)}return i}function ne(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&Zt(t),n.call(r,e)}function re(t,e){if(t.va)return!0;if(!Wh){if(!e)t:{e=["window","event"];for(var n=xc,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(r=e,e=new Bt(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=ee(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=ee(r[i],t,!1,e),n=n&&o}return n}return ne(t,new Bt(e,this))}function ie(t){return t=t[$h],t instanceof Ht?t:null}function oe(t){return u(t)?t:(t[ef]||(t[ef]=function(e){return t.handleEvent(e)}),t[ef])}function se(){Vt.call(this),this.v=new Ht(this),this.$b=this,this.fb=null}function ae(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function ue(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function ce(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&Wt(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function he(t,e,n){if(u(t))n&&(t=p(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=p(t.handleEvent,t)}return 2147483647<Number(e)?-1:xc.setTimeout(t,e||0)}function fe(t){var e=null;return new bt(function(n,r){-1==(e=he(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw xc.clearTimeout(e),t})}function le(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(a(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pe(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(a(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(var r in t)e[n++]=r;return e}}function de(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(a(t)||"string"==typeof t)Kc(t,e,void 0);else for(var n=pe(t),r=le(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function ve(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ve)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ye(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ge(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],ge(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function me(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function be(t,e){this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1;var n;t instanceof be?(this.i=void 0!==e?e:t.i,we(this,t.f),this.l=t.l,this.a=t.a,_e(this,t.g),this.c=t.c,Ie(this,Me(t.b)),this.h=t.h):t&&(n=String(t).match(nf))?(this.i=!!e,we(this,n[1]||"",!0),this.l=Ne(n[2]||""),this.a=Ne(n[3]||"",!0),_e(this,n[4]),this.c=Ne(n[5]||"",!0),Ie(this,n[6]||"",!0),this.h=Ne(n[7]||"")):(this.i=!!e,this.b=new De(null,this.i))}function we(t,e,n){t.f=n?Ne(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function _e(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ie(t,e,n){e instanceof De?(t.b=e,Ue(t.b,t.i)):(n||(e=ke(e,af)),t.b=new De(e,t.i))}function Ee(t,e,n){t.b.set(e,n)}function Te(t,e){return t.b.get(e)}function Ae(t){return t instanceof be?new be(t):new be(t,void 0)}function Se(t,e,n,r){var i=new be(null,void 0);return t&&we(i,t),e&&(i.a=e),n&&_e(i,n),r&&(i.c=r),i}function Ne(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ke(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Oe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Oe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function De(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ce(t){t.a||(t.a=new ve,t.b=0,t.c&&me(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Le(t){var e=pe(t);if(void 0===e)throw Error("Keys are undefined");var n=new De(null,void 0);t=le(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Pe(n,i,o):n.add(i,o)}return n}function Re(t,e){Ce(t),e=je(t,e),ge(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,ge(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ye(t)))}function xe(t,e){return Ce(t),e=je(t,e),ge(t.a.b,e)}function Pe(t,e,n){Re(t,e),0<n.length&&(t.c=null,t.a.set(je(t,e),x(n)),t.b+=n.length)}function Me(t){var e=new De;return e.c=t.c,t.a&&(e.a=new ve(t.a),e.b=t.b),e}function je(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ue(t,e){e&&!t.f&&(Ce(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Re(this,e),Pe(this,n,t))},t)),t.f=e}function Ve(t){var e=[];return qe(new Fe,t,e),e.join("")}function Fe(){}function qe(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),qe(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){n.push("{"),i="";for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),Be(r,n),n.push(":"),qe(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Be(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}function Be(t,e){e.push('"',t.replace(hf,function(t){var e=cf[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cf[t]=e),e}),'"')}function Ge(){var t=cn();return Ih&&!!Dh&&11==Dh||/Edge\/\d+/.test(t)}function ze(){return xc.window&&xc.window.location.href||self&&self.location&&self.location.href||""}function He(t,e){e=e||xc.window;var n="about:blank";t&&(n=Y(J(t))),e.location.href=n}function We(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<We(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Ke(){var t=cn();return!((t=an(t)!=df?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Ih||!Dh||9<Dh)}function Xe(t){return t=(t||cn()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Ye(t){t=t||xc.window;try{t.close()}catch(t){}}function Je(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=cn().toLowerCase(),r&&(e.target=r,P(n,"crios/")&&(e.target="_blank")),an(cn())==pf&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof X?n:J(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[];for(s in t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((j("iPhone")&&!j("iPod")&&!j("iPad")||j("iPad")||j("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=lt(document,"A"),B(s,"HTMLAnchorElement"),e instanceof X||e instanceof X||(e="object"==typeof e&&e.sa?e.ra():String(e),vh.test(e)||(e="about:invalid#zClosurez"),e=new X(gh,e)),s.href=Y(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Y(e),s&&(Th&&P(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Z('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+rt(t)+'">'),r=s.document)&&(r.write($(t)),r.close())):(s=r.open(Y(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}function Qe(t){return new bt(function(e){function n(){fe(2e3).then(function(){if(t&&!t.closed)return n();e()})}return n()})}function $e(){var t=null;return new bt(function(e){"complete"==xc.document.readyState?e():(t=function(){e()},Qt(window,"load",t))}).s(function(e){throw $t(window,"load",t),e})}function Ze(){return tn(void 0)?$e().then(function(){return new bt(function(t,e){var n=xc.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Et(Error("Cordova must run in an Android or iOS file scheme."))}function tn(t){return t=t||cn(),!("file:"!==dn()&&"ionic:"!==dn()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function en(){var t=xc.window;try{return!(!t||t==t.top)}catch(t){return!1}}function nn(){return void 0!==xc.WorkerGlobalScope&&"function"==typeof xc.importScripts}function rn(){return Dc.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Dc.INTERNAL.hasOwnProperty("node")?"Node":nn()?"Worker":"Browser"}function on(){var t=rn();return"ReactNative"===t||"Node"===t}function sn(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function an(t){var e=t.toLowerCase();return P(e,"opera/")||P(e,"opr/")||P(e,"opios/")?"Opera":P(e,"iemobile")?"IEMobile":P(e,"msie")||P(e,"trident/")?"IE":P(e,"edge/")?"Edge":P(e,"firefox/")?pf:P(e,"silk/")?"Silk":P(e,"blackberry")?"Blackberry":P(e,"webos")?"Webos":!P(e,"safari/")||P(e,"chrome/")||P(e,"crios/")||P(e,"android")?!P(e,"chrome/")&&!P(e,"crios/")||P(e,"edge/")?P(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":df:"Safari"}function un(t,e){e=e||[];var n,r=[],i={};for(n in vf)i[vf[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=rn(),"Browser"===r?(i=cn(),r=an(i)):"Worker"===r&&(i=cn(),r=an(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function cn(){return xc.navigator&&xc.navigator.userAgent||""}function hn(t,e){t=t.split("."),e=e||xc;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function fn(){try{var t=xc.localStorage,e=bn();if(t)return t.setItem(e,"1"),t.removeItem(e),!Ge()||!!xc.indexedDB}catch(t){return nn()&&!!xc.indexedDB}return!1}function ln(){return(pn()||"chrome-extension:"===dn()||tn())&&!on()&&fn()&&!nn()}function pn(){return"http:"===dn()||"https:"===dn()}function dn(){return xc.location&&xc.location.protocol||null}function vn(t){return t=t||cn(),!Xe(t)&&an(t)!=pf}function yn(t){return void 0===t?null:Ve(t)}function gn(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function mn(t){if(null!==t)return JSON.parse(t)}function bn(t){return t||Math.floor(1e9*Math.random()).toString()}function wn(t){return t=t||cn(),"Safari"!=an(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function _n(){var t=xc.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function In(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=cn(),e=rn(),this.b=Xe(t)||"ReactNative"===e}function En(){var t=xc.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Tn(){var t=xc.document,e=null;return En()||!t?It():new bt(function(n){e=function(){En()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}function An(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Sn(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Nn(){return!(!hn("fireauth.oauthhelper",xc)&&!hn("fireauth.iframe",xc))}function kn(){var t=xc.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function On(){var t=xc.navigator;return t&&t.serviceWorker?It().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):It(null)}function Dn(t){gf[t]||(gf[t]=!0,An(t))}function Cn(t,e,n){yf?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ln(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Cn(t,n,e[n])}function Rn(t){var e={};return Ln(e,t),e}function xn(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Pn(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Mn(t){var e=t;if("object"==typeof t&&null!=t){e="length"in t?[]:{};for(var n in t)Cn(e,n,Mn(t[n]))}return e}function jn(t){var e=t&&(t[If]?"phone":null);if(!(e&&t&&t[_f]))throw new y("internal-error","Internal assert: invalid MultiFactorInfo object");Cn(this,"uid",t[_f]),Cn(this,"displayName",t[bf]||null);var n=null;t[wf]&&(n=new Date(t[wf]).toUTCString()),Cn(this,"enrollmentTime",n),Cn(this,"factorId",e)}function Un(t){try{var e=new Vn(t)}catch(t){e=null}return e}function Vn(t){jn.call(this,t),Cn(this,"phoneNumber",t[If])}function Fn(t){var e={},n=t[Sf],r=t[kf],i=t[Of];if(t=Un(t[Nf]),!i||i!=Tf&&i!=Af&&!n||i==Af&&!r||i==Ef&&!t)throw Error("Invalid checkActionCode response!");i==Af?(e[Cf]=n||null,e[Rf]=n||null,e[Df]=r):(e[Cf]=r||null,e[Rf]=r||null,e[Df]=n||null),e[Lf]=t||null,Cn(this,Pf,i),Cn(this,xf,Mn(e))}function qn(t){t=Ae(t);var e=Te(t,Mf)||null,n=Te(t,jf)||null,r=Te(t,Ff)||null;if(r=r?Bf[r]||null:null,!e||!n||!r)throw new y("argument-error",Mf+", "+jf+"and "+Ff+" are required in a valid action code URL.");Ln(this,{apiKey:e,operation:r,code:n,continueUrl:Te(t,Uf)||null,languageCode:Te(t,Vf)||null,tenantId:Te(t,qf)||null})}function Bn(t){try{return new qn(t)}catch(t){return null}}function Gn(t){var e=t[Kf];if(void 0===e)throw new y("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new y("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Gf];if(n&&"object"==typeof n){e=n[Jf];var r=n[Xf];if(n=n[Yf],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new y("argument-error",Xf+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new y("argument-error",Yf+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new y("argument-error",Jf+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new y("missing-android-pkg-name")}}else if(void 0!==n)throw new y("argument-error",Gf+" property must be a non null object when specified.");if(this.f=null,(e=t[Wf])&&"object"==typeof e){if("string"==typeof(e=e[Qf])&&e.length)this.f=e;else if(void 0!==e)throw new y("argument-error",Qf+" property must be a non empty string when specified.")}else if(void 0!==e)throw new y("argument-error",Wf+" property must be a non null object when specified.");if(void 0!==(e=t[Hf])&&"boolean"!=typeof e)throw new y("argument-error",Hf+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[zf])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new y("argument-error",zf+" property must be a non empty string when specified.");this.i=t||null}function zn(t){var e={};e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i;for(var n in e)null===e[n]&&delete e[n];return e}function Hn(t){return Yc(t,function(t){return t=t.toString(16),1<t.length?t:"0"+t}).join("")}function Wn(t){var e="";return Kn(t,function(t){e+=String.fromCharCode(t)}),e}function Kn(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=$f[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}Xn();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}function Xn(){if(!$f){$f={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===$f[o]&&($f[o]=i)}}}function Yn(t){var e=Qn(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,Vc(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Jn(t){try{return new Yn(t)}catch(t){return null}}function Qn(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Wn(t))}catch(t){}return null}function $n(t){for(var e in el)if(el[e].fa==t)return el[e];return null}function Zn(t){var e={};e["facebook.com"]=nr,e["google.com"]=ir,e["github.com"]=rr,e["twitter.com"]=or;var n=t&&t[rl];try{if(n)return e[n]?new e[n](t):new er(t);if(void 0!==t[nl])return new tr(t)}catch(t){}return null}function tr(t){var e=t[rl];if(!e&&t[nl]){var n=Jn(t[nl]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Cn(this,"providerId",e),Cn(this,"isNewUser",n)}function er(t){tr.call(this,t),t=mn(t.rawUserInfo||"{}"),Cn(this,"profile",Mn(t||{}))}function nr(t){if(er.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function rr(t){if(er.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Cn(this,"username",this.profile&&this.profile.login||null)}function ir(t){if(er.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function or(t){if(er.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Cn(this,"username",t.screenName||null)}function sr(t){var e=Ae(t),n=Te(e,"link"),r=Te(Ae(n),"link");return e=Te(e,"deep_link_id"),Te(Ae(e),"link")||e||r||n||t}function ar(t,e){if(!t&&!e)throw new y("internal-error","Internal assert: no raw session string available");if(t&&e)throw new y("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?il:ol}function ur(){}function cr(t,e){return t.then(function(t){if(t[El]){var n=Jn(t[El]);if(!n||e!=n.h)throw new y("user-mismatch");return t}throw new y("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==qc+"user-not-found"?new y("user-mismatch"):t})}function hr(t,e){if(!e)throw new y("internal-error","failed to construct a credential");this.a=e,Cn(this,"providerId",t),Cn(this,"signInMethod",t)}function fr(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lr(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new hr(t.providerId,t.pendingToken)}catch(t){}return null}function pr(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Cn(this,"idToken",e.idToken),e.accessToken&&Cn(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Cn(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new y("internal-error","failed to construct a credential");Cn(this,"accessToken",e.oauthToken),Cn(this,"secret",e.oauthTokenSecret)}Cn(this,"providerId",t),Cn(this,"signInMethod",n)}function dr(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Le(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vr(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new pr(t.providerId,e,t.signInMethod)}catch(t){}}return null}function yr(t,e){this.Pc=e||[],Ln(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=($n(t)||{}).Ja||null,this.nb=null}function gr(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new y("argument-error",'SAML provider IDs must be prefixed with "saml."');yr.call(this,t,[])}function mr(t){yr.call(this,t,tl),this.a=[]}function br(){mr.call(this,"facebook.com")}function wr(t){if(!t)throw new y("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return c(t)&&(e=t.accessToken),(new br).credential({accessToken:e})}function _r(){mr.call(this,"github.com")}function Ir(t){if(!t)throw new y("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return c(t)&&(e=t.accessToken),(new _r).credential({accessToken:e})}function Er(){mr.call(this,"google.com"),this.Ca("profile")}function Tr(t,e){var n=t;return c(t)&&(n=t.idToken,e=t.accessToken),(new Er).credential({idToken:n,accessToken:e})}function Ar(){yr.call(this,"twitter.com",Zf)}function Sr(t,e){var n=t;if(c(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new y("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new pr("twitter.com",n,"twitter.com")}function Nr(t,e,n){this.a=t,this.f=e,Cn(this,"providerId","password"),Cn(this,"signInMethod",n===Or.EMAIL_LINK_SIGN_IN_METHOD?Or.EMAIL_LINK_SIGN_IN_METHOD:Or.EMAIL_PASSWORD_SIGN_IN_METHOD)}function kr(t){return t&&t.email&&t.password?new Nr(t.email,t.password,t.signInMethod):null}function Or(){Ln(this,{providerId:"password",isOAuthProvider:!1})}function Dr(t,e){if(!(e=Cr(e)))throw new y("argument-error","Invalid email link!");return new Nr(t,e.code,Or.EMAIL_LINK_SIGN_IN_METHOD)}function Cr(t){return t=sr(t),(t=Bn(t))&&t.operation===Tf?t:null}function Lr(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new y("internal-error");this.a=t,Cn(this,"providerId","phone"),this.fa="phone",Cn(this,"signInMethod","phone")}function Rr(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return Kc(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Lr(e)}return null}function xr(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Pr(t){try{this.a=t||Dc.auth()}catch(t){throw new y("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ln(this,{providerId:"phone",isOAuthProvider:!1})}function Mr(t,e){if(!t)throw new y("missing-verification-id");if(!e)throw new y("missing-verification-code");return new Lr({cb:t,bb:e})}function jr(t){if(t.temporaryProof&&t.phoneNumber)return new Lr({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Tr(o,n);case"facebook.com":return wr(n);case"github.com":return Ir(n);case"twitter.com":return Sr(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new hr(e,s):new pr(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mr(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ur(t){if(!t.isOAuthProvider)throw new y("invalid-oauth-provider")}function Vr(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new y("invalid-auth-event");if(this.g&&this.a)throw new y("invalid-auth-event");if(this.g&&!this.f)throw new y("invalid-auth-event")}function Fr(t){return t=t||{},t.type?new Vr(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&g(t.error),t.postBody,t.tenantId):null}function qr(){this.b=null,this.a=[]}function Br(t){var e=sl;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=hn("universalLinks.subscribe",xc))&&t(null,e.b))}function Gr(t){var e="unauthorized-domain",n=void 0,r=Ae(t);t=r.a,r=r.f,"chrome-extension"==r?n=nt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=nt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",y.call(this,e,n)}function zr(t,e,n){y.call(this,t,n),t=e||{},t.Ib&&Cn(this,"email",t.Ib),t.ea&&Cn(this,"phoneNumber",t.ea),t.credential&&Cn(this,"credential",t.credential),t.Yb&&Cn(this,"tenantId",t.Yb)}function Hr(t){if(t.code){var e=t.code||"";0==e.indexOf(qc)&&(e=e.substring(qc.length));var n={credential:jr(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new y(e,t.message||void 0);return new zr(e,n,t.message)}return null}function Wr(){}function Kr(t){return t.c||(t.c=t.b())}function Xr(){}function Yr(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jr(){}function Qr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=p(this.pc,this),this.a.onerror=p(this.Rb,this),this.a.onprogress=p(this.qc,this),this.a.ontimeout=p(this.uc,this)}function $r(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zr(t,e,n){this.reset(t,e,n,void 0,void 0)}function ti(t){this.f=t,this.b=this.c=this.a=null}function ei(t,e){this.name=t,this.value=e}function ni(t){return t.c?t.c:t.a?ni(t.a):(I("Root logger has no level set."),null)}function ri(t){dl||(dl=new ti(""),pl[""]=dl,dl.c=fl);var e;if(!(e=pl[t])){e=new ti(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=ri(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,pl[t]=e}return e}function ii(t,e){t&&t.log(ll,e,void 0)}function oi(t){this.f=t}function si(t){se.call(this),this.o=t,this.readyState=vl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ri("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function ai(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ui(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ci(t)}function ci(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hi(t){se.call(this),this.headers=new ve,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=yl,this.u=this.R=!1}function fi(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():al.a(),t.A=Kr(t.O?t.O:al),t.a.onreadystatechange=p(t.Ub,t);try{ii(t.b,Ii(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ii(t.b,Ii(t,"Error opening Xhr: "+e.message)),void di(t,e)}e=r||"";var o=new ve(t.headers);i&&de(i,function(t,e){o.set(e,t)}),i=O(o.Y()),r=xc.FormData&&e instanceof xc.FormData,!D(ml,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{mi(t),0<t.g&&(t.u=li(t.a),ii(t.b,Ii(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=p(t.Ma,t)):t.o=he(t.Ma,t.g,t)),ii(t.b,Ii(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ii(t.b,Ii(t,"Send error: "+e.message)),di(t,e)}}function li(t){return Ih&&at(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function pi(t){return"content-type"==t.toLowerCase()}function di(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,vi(t),gi(t)}function vi(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function yi(t){if(t.c&&void 0!==Rc)if(t.A[1]&&4==bi(t)&&2==wi(t))ii(t.b,Ii(t,"Local request error detected and ignored"));else if(t.i&&4==bi(t))he(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==bi(t)){ii(t.b,Ii(t,"Request complete")),t.c=!1;try{var e=wi(t);t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=0===e){var o=String(t.l).match(nf)[1]||null;if(!o&&xc.self&&xc.self.location){var s=xc.self.location.protocol;o=s.substr(0,s.length-1)}i=!gl.test(o?o.toLowerCase():"")}r=i}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<bi(t)?t.a.statusText:""}catch(e){ii(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+wi(t)+"]",vi(t)}}finally{gi(t)}}}function gi(t,e){if(t.a){mi(t);var n=t.a,r=t.A[0]?o:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(cl,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function mi(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(xc.clearTimeout(t.o),t.o=null)}function bi(t){return t.a?t.a.readyState:0}function wi(t){try{return 2<bi(t)?t.a.status:-1}catch(t){return-1}}function _i(t){try{return t.a?t.a.responseText:""}catch(e){return ii(t.b,"Can not get responseText: "+e.message),""}}function Ii(t,e){return e+" ["+t.P+" "+t.l+" "+wi(t)+"]"}function Ei(t){var e=Pi;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Ti(t,e,n){t.a=!0,t.c=n,t.f=!e,Oi(t)}function Ai(t){if(t.a){if(!t.m)throw new Di(t);t.m=!1}}function Si(t,e){Ni(t,null,e,void 0)}function Ni(t,e,n,r){t.g.push([e,n,r]),t.a&&Oi(t)}function ki(t){return Jc(t.g,function(t){return u(t[1])})}function Oi(t){if(t.h&&t.a&&ki(t)){var e=t.h,n=bl[e];n&&(xc.clearTimeout(n.a),delete bl[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.o,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(b(e)||"function"==typeof xc.Promise&&e instanceof xc.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,ki(t)||(n=!0)}}t.c=e,r&&(a=p(t.v,t,!0),r=p(t.v,t,!1),e instanceof Ei?(Ni(e,a,r),e.A=!0):e.then(a,r)),n&&(e=new Li(e),bl[e.a]=e,t.h=e.a)}function Di(){w.call(this)}function Ci(){w.call(this)}function Li(t){this.a=xc.setTimeout(p(this.c,this),0),this.b=t}function Ri(t){var e={},n=e.document||document,r=W(t).toString(),i=lt(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Ei(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout(function(){Mi(i,!0);var t=new ji(_l,"Timeout reached for loading script "+r);Ai(s),Ti(s,!1,t)},u),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Mi(i,e.wd||!1,a),Ai(s),Ti(s,!0,null))},i.onerror=function(){Mi(i,!0,a);var t=new ji(wl,"Error while loading script "+r);Ai(s),Ti(s,!1,t)},o=e.attributes||{},q(o,{type:"text/javascript",charset:"UTF-8"}),ct(i,o),et(i,t),xi(n).appendChild(i),s}function xi(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function Pi(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Mi(t,!0,this.Ma)}}function Mi(t,e,n){null!=n&&xc.clearTimeout(n),t.onload=o,t.onerror=o,t.onreadystatechange=o,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}function ji(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),w.call(this,n),this.code=t}function Ui(t){this.f=t}function Vi(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Tl,this.g=F(t.secureTokenHeaders||Al),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Sl,this.a=F(t.firebaseHeaders||Nl),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==rn(),!(n=xc.XMLHttpRequest||n&&Dc.INTERNAL.node&&Dc.INTERNAL.node.XMLHttpRequest)&&!nn())throw new y("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,nn()?this.f=new oi(self):on()?this.f=new Ui(n):this.f=new Jr,this.b=null}function Fi(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function qi(t,e){e&&(t.l=Bi("https://securetoken.googleapis.com/v1/token",e),t.h=Bi("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Bi("https://identitytoolkit.googleapis.com/v2/",e))}function Bi(t,e){return t=Ae(t),e=Ae(e.url),t.c=t.a+t.c,we(t,e.f),t.a=e.a,_e(t,e.g),t.toString()}function Gi(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function zi(t,e,n,r,i,o,s){Ke()||nn()?t=p(t.u,t):(Il||(Il=new bt(function(t,e){Hi(t,e)})),t=p(t.o,t)),t(e,n,r,i,o,s)}function Hi(t,e){if(((window.gapi||{}).client||{}).request)t();else{xc[Ol]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};Si(Ri(K(kl,{onload:Ol})),function(){e(Error("CORS_UNSUPPORTED"))})}}function Wi(t,e){return new bt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?zi(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(vo(t)):t.access_token&&t.refresh_token?n(t):r(new y("internal-error")):r(new y("network-request-failed"))},"POST",Le(e).toString(),t.g,t.v.get()):r(new y("internal-error"))})}function Ki(t,e,n,r,i,o,s){var a=Ae(e+n);Ee(a,"key",t.c),s&&Ee(a,"cb",Vc().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ee(a,c,i[c]);return new bt(function(e,n){zi(t,a.toString(),function(t){t?t.error?n(vo(t,o||{})):e(t):n(new y("network-request-failed"))},r,u?void 0:Ve(gn(i)),t.a,t.m.get())})}function Xi(t){if("string"!=typeof(t=t.email)||!lf.test(t))throw new y("invalid-email")}function Yi(t){"email"in t&&Xi(t)}function Ji(t,e){return lo(t,xl,{identifier:e,continueUri:pn()?ze():"http://localhost"}).then(function(t){return t.signinMethods||[]})}function Qi(t){return lo(t,Wl,{}).then(function(t){return t.authorizedDomains||[]})}function $i(t){if(!t[El]){if(t.mfaPendingCredential)throw new y("multi-factor-auth-required",null,F(t));throw new y("internal-error")}}function Zi(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new y("internal-error")}else{if(!t.sessionInfo)throw new y("missing-verification-id");if(!t.code)throw new y("missing-verification-code")}}function to(t,e){return lo(t,Yl,e)}function eo(t,e){return lo(t,Zl,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}function no(t){if(!t.phoneVerificationInfo)throw new y("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new y("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new y("missing-verification-code")}function ro(t,e){return lo(t,tp,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}function io(t,e,n){return lo(t,Ml,{idToken:e,deleteProvider:n})}function oo(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new y("internal-error")}function so(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new De(t.postBody),xe(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function ao(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Hr(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Hr(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Hr(t)):t.errorMessage&&(e=po(t.errorMessage)),e)throw e;$i(t)}function uo(t,e){return e.returnIdpCredential=!0,lo(t,ep,e)}function co(t,e){return e.returnIdpCredential=!0,lo(t,rp,e)}function ho(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,lo(t,np,e)}function fo(t){if(!t.oobCode)throw new y("invalid-action-code")}function lo(t,e,n){if(!Pn(n,e.M))return Et(new y("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return It(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),i?Ki(t,t.i,e.endpoint,o,n,e.Gb,e.kb||!1):Ki(t,t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new y("internal-error");return r[e.Z]})}function po(t){return vo({error:{errors:[{message:t}],code:400,message:t}})}function vo(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new y(r[n]):null)return n;n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},q(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new y(r[i],e);return!e&&t&&(e=yn(t)),new y("internal-error",e)}function yo(t){this.b=t,this.a=null,this.qb=go(this)}function go(t){return wo().then(function(){return new bt(function(e,n){hn("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:hn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},lp.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}function mo(t,e){return t.qb.then(function(){return new bt(function(n){t.a.send(e.type,e,n,hn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function bo(t,e){t.qb.then(function(){t.a.register("authEvent",e,hn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function wo(){return pp||(pp=new bt(function(t,e){function n(){_n(),hn("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){_n(),e(Error("Network Error"))},timeout:fp.get()})}if(hn("gapi.iframes.Iframe"))t();else if(hn("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();xc[r]=function(){hn("gapi.load")?n():e(Error("Network Error"))},r=K(hp,{onload:r}),It(Ri(r)).s(function(){e(Error("Network Error"))})}}).s(function(t){throw pp=null,t}))}function _o(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=Ae(this.g.url),t=Se(t.f,t.a,t.g,"/emulator/auth/iframe")):t=Se("https",this.l,null,"/__/auth/iframe"),this.a=t,Ee(this.a,"apiKey",this.h),Ee(this.a,"appName",this.i),this.b=null,this.c=[]}function Io(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Eo(t){try{return Dc.app(t).auth().Ga()}catch(t){return[]}}function To(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function Ao(t){var e=ze();return Qi(t).then(function(t){t:{var n=Ae(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Ae(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ff.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Gr(ze())})}function So(t){return t.v?t.v:(t.v=$e().then(function(){if(!t.u){var e=t.c,n=t.i,r=Eo(t.b),i=new _o(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=x(r||[]),t.u=i.toString()}t.m=new yo(t.u),Oo(t)}),t.v)}function No(t){return t.l||(t.A=t.c?un(t.c,Eo(t.b)):null,t.l=new Vi(t.g,m(t.i),t.A),t.f&&qi(t.l,t.f)),t.l}function ko(t,e,n,r,i,o,s,a,u,c,h,f){return t=new Io(t,e,n,r,i,f),t.l=o,t.g=s,t.i=a,t.b=F(u||null),t.f=c,t.xb(h).toString()}function Oo(t){if(!t.m)throw Error("IfcHandler must be initialized!");bo(t.m,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Fr(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",It(n)}return n.status="ERROR",It(n)})}function Do(t){var e={type:"webStorageSupport"};return So(t).then(function(){return mo(t.m,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})}function Co(t){if(this.a=t||Dc.INTERNAL.reactNative&&Dc.INTERNAL.reactNative.AsyncStorage,!this.a)throw new y("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Lo(t){this.b=t,this.a={},this.f=p(this.c,this)}function Ro(){var t=nn()?self:null;if(Kc(dp,function(n){n.b==t&&(e=n)}),!e){var e=new Lo(t);dp.push(e)}return e}function xo(t,e,n){V(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Po(t){this.a=t}function Mo(t){this.c=t,this.b=!1,this.a=[]}function jo(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Et(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new bt(function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))},c={messageChannel:f,onMessage:o},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))}).then(function(e){return Uo(t,c),e}).s(function(e){throw Uo(t,c),e})}function Uo(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),L(t.a,function(t){return t==e})}}function Vo(){if(!Go())throw new y("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=xc.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;nn()&&self?(this.l=Ro(),xo(this.l,"keyChanged",function(e,n){return Xo(t).then(function(e){return 0<e.length&&Kc(t.a,function(t){t(e)}),{keyProcessed:D(e,n.key)}})}),xo(this.l,"ping",function(){return It(["keyChanged"])})):On().then(function(e){(t.h=e)&&(t.g=new Mo(new Po(e)),jo(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&D(e[0].value,"keyChanged")&&(t.o=!0)}).s(function(){}))})}function Fo(t){return new bt(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}function qo(t){return new bt(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):Fo(t).then(function(){return qo(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function Bo(t){return t.v||(t.v=qo(t)),t.v}function Go(){try{return!!xc.indexedDB}catch(t){return!1}}function zo(t){return t.objectStore("firebaseLocalStorage")}function Ho(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Wo(t){return new bt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ko(t,e){return t.g&&t.h&&kn()===t.h?jo(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):It()}function Xo(t){return Bo(t).then(function(t){var e=zo(Ho(t,!1));return e.getAll?Wo(e.getAll()):new bt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=We(t.c,n),t.c=n}return r})}function Yo(t){function e(){t.f=setTimeout(function(){t.i=Xo(t).then(function(e){0<e.length&&Kc(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}Jo(t),e()}function Jo(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Qo(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=It().then(function(){if(Go()){var t=bn(),r="__sak"+t;return vp||(vp=new Vo),n=vp,n.set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){Kc(e.a,function(e){e(t)})}),t})}function $o(){this.a={},this.type="inMemory"}function Zo(){if(!es()){if("Node"==rn())throw new y("internal-error","The LocalStorage compatibility library was not found.");throw new y("web-storage-unsupported")}this.a=ts()||Dc.INTERNAL.node.localStorage,this.type="localStorage"}function ts(){try{var t=xc.localStorage,e=bn();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function es(){var t="Node"==rn();if(!(t=ts()||t&&Dc.INTERNAL.node&&Dc.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}function ns(){this.type="nullStorage"}function rs(){if(!os()){if("Node"==rn())throw new y("internal-error","The SessionStorage compatibility library was not found.");throw new y("web-storage-unsupported")}this.a=is()||Dc.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function is(){try{var t=xc.sessionStorage,e=bn();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function os(){var t="Node"==rn();if(!(t=is()||t&&Dc.INTERNAL.node&&Dc.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}function ss(){var t={};t.Browser=mp,t.Node=bp,t.ReactNative=wp,t.Worker=_p,this.a=t[rn()]}function as(t){var e=new y("invalid-persistence-type"),n=new y("unsupported-persistence-type");t:{for(r in Ip)if(Ip[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(rn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Go()&&"none"!==t)throw n;break;default:if(!fn()&&"none"!==t)throw n}}function us(){var t=!(wn(cn())||!en()),e=vn(),n=fn();this.v=t,this.h=e,this.l=n,this.a={},yp||(yp=new ss),t=yp;try{this.g=!Ge()&&Nn()||!xc.indexedDB?new t.a.D:new Qo(nn()?new $o:new t.a.D)}catch(t){this.g=new $o,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new $o}this.m=new $o,this.f=p(this.Xb,this),this.b={}}function cs(){return gp||(gp=new us),gp}function hs(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function fs(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ls(t,e,n){var r=fs(e,n),i=hs(t,e.D);return t.get(e,n).then(function(o){var s=null;try{s=mn(xc.localStorage.getItem(r))}catch(t){}if(s&&!o)return xc.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&xc.localStorage.removeItem(r)})}function ps(t,e,n){return n=fs(e,n),"local"==e.D&&(t.b[n]=null),hs(t,e.D).T(n)}function ds(t){vs(t),t.c=setInterval(function(){for(var e in t.a){var n=xc.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Bt({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}},1e3)}function vs(t){t.c&&(clearInterval(t.c),t.c=null)}function ys(t){this.a=t,this.b=cs()}function gs(t){return t.b.get(Tp,t.a).then(function(t){return Fr(t)})}function ms(){this.a=cs()}function bs(){this.b=-1}function ws(t,e){this.b=Ap,this.f=xc.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=xc.Int32Array?new Int32Array(64):Array(64),void 0===Ep&&(Ep=xc.Int32Array?new Int32Array(Dp):Dp),this.reset()}function _s(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=c&h^~c&f,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,s=s+(0|Ep[e])|0,s=o+(s+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function Is(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(_s(t),i=0);else{if(!a(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(_s(t),i=0)}}t.c=i,t.g+=n}function Es(){ws.call(this,8,Cp)}function Ts(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new ms,this.g=new ys(this.h),this.f=null,this.b=[],this.a=this.c=null}function As(t){return new y("invalid-cordova-configuration",t)}function Ss(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Ns(t){var e=new Es;Is(e,t),t=[];var n=8*e.g;56>e.c?Is(e,Op,56-e.c):Is(e,Op,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(_s(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return Hn(t)}function ks(t,e,n,r,i){var o=Ss(),s=new Vr(e,r,null,o,new y("no-auth-event"),null,i),a=hn("BuildInfo.packageName",xc);if("string"!=typeof a)throw new y("invalid-cordova-configuration");var u=hn("BuildInfo.displayName",xc),c={};if(cn().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!cn().toLowerCase().match(/android/))return Et(new y("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=Ns(o),c.sessionId=o;var h=ko(t.m,t.i,t.l,e,n,null,r,t.v,c,t.u,i,t.o);return t.la().then(function(){var e=t.h;return t.A.a.set(Tp,s.w(),e)}).then(function(){var e=hn("cordova.plugins.browsertab.isAvailable",xc);if("function"!=typeof e)throw new y("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=hn("cordova.plugins.browsertab.openUrl",xc)))throw new y("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=hn("cordova.InAppBrowser.open",xc)))throw new y("invalid-cordova-configuration");e=cn(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function Os(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ds(t){return t.f||(t.f=t.la().then(function(){return new bt(function(e){function n(r){return e(r),t.Ra(n),!1}t.Ea(n),Ls(t)})})),t.f}function Cs(t){var e=null;return gs(t.g).then(function(n){return e=n,n=t.g,ps(n.b,Tp,n.a)}).then(function(){return e})}function Ls(t){function e(e){r=!0,i&&i.cancel(),Cs(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;i=sr(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=Ae(i),o=mn(Te(o,"firebaseError")||null),o=(o="object"==typeof o?g(o):null)?new Vr(r.c,r.b,null,null,o,null,r.S()):new Vr(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Os(t,i)})}var n=new Vr("unknown",null,null,null,new y("no-auth-event")),r=!1,i=fe(500).then(function(){return Cs(t).then(function(){r||Os(t,n)})}),o=xc.handleOpenURL;xc.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(hn("BuildInfo.packageName",xc).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},sl||(sl=new qr),Br(e)}function Rs(t){this.a=t,this.b=cs()}function xs(t){return t.b.set(Lp,"pending",t.a)}function Ps(t){return ps(t.b,Lp,t.a)}function Ms(t){return t.b.get(Lp,t.a).then(function(t){return"pending"==t})}function js(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=p(this.o,this),this.b=new Ys,this.A=new ra,this.g=new Rs(Ks(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Us(this.O,this.m,this.v,Fc,this.G)}function Us(t,e,n,r,i){var o=Dc.SDK_VERSION||null;return tn()?new Ts(t,e,n,o,r,i):new To(t,e,n,o,r,i)}function Vs(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s(function(n){throw t.a==e&&t.reset(),n})}function Fs(t){t.a.Wb()&&Vs(t).s(function(e){var n=new Vr("unknown",null,null,null,new y("operation-not-supported-in-this-environment"));zs(e)&&t.o(n)}),t.a.Sb()||Js(t.b)}function qs(t,e){D(t.h,e)||t.h.push(e),t.f||Ms(t.g).then(function(e){e?Ps(t.g).then(function(){Vs(t).s(function(e){var n=new Vr("unknown",null,null,null,new y("operation-not-supported-in-this-environment"));zs(e)&&t.o(n)})}):Fs(t)}).s(function(){Fs(t)})}function Bs(t,e){L(t.h,function(t){return t==e})}function Gs(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function zs(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Hs(t,e,n,r,i){var o;return xs(t.g).then(function(){return t.a.Mb(e,n,r,i).s(function(e){if(zs(e))throw new y("operation-not-supported-in-this-environment");return o=e,Ps(t.g).then(function(){throw o})}).then(function(){return t.a.Zb()?new bt(function(){}):Ps(t.g).then(function(){return t.qa()}).then(function(){}).s(function(){})})})}function Ws(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},Rp.get())}function Ks(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Xs(t,e,n,r){var i=Ks(e,n,r);return Pp[i]||(Pp[i]=new js(t,e,n,r)),Pp[i]}function Ys(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Js(t){t.g||(t.g=!0,ea(t,!1,null,null))}function Qs(t){t.g&&!t.i&&ea(t,!1,null,null)}function $s(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){ea(t,a,e,null)}).s(function(e){ea(t,a,null,e)})}function Zs(t,e){if(t.b=function(){return Et(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function ta(t,e){if(t.b=function(){return It(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function ea(t,e,n,r){e?r?Zs(t,r):ta(t,n):ta(t,{user:null}),t.f=[],t.c=[]}function na(t){var e=new y("timeout");t.a&&t.a.cancel(),t.a=fe(xp.get()).then(function(){t.b||(t.g=!0,ea(t,!0,null,e))})}function ra(){}function ia(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then(function(t){e.ma(r,t,null,n)}).s(function(t){e.ma(r,null,t,n)})}function oa(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function sa(t,e){this.a=e,Cn(this,"verificationId",t)}function aa(t,e,n,r){return new Pr(t).eb(e,n).then(function(t){return new sa(t,r)})}function ua(t){var e=Qn(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new y("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ln(this,{token:t,expirationTime:Sn(1e3*e.exp),authTime:Sn(1e3*e.auth_time),issuedAtTime:Sn(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function ca(t,e,n){var r=e&&e[jp];if(!r)throw new y("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=F(e),this.g=n,this.c=new ar(null,r),this.b=[];var i=this;Kc(e[Mp]||[],function(t){(t=Un(t))&&i.b.push(t)}),Cn(this,"auth",this.a),Cn(this,"session",this.c),Cn(this,"hints",this.b)}function ha(t,e,n,r){y.call(this,"multi-factor-auth-required",r,e),this.b=new ca(t,e,n),Cn(this,"resolver",this.b)}function fa(t,e,n){if(t&&c(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ha(e,t.serverResponse,n,t.message)}catch(t){}return null}function la(){}function pa(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),q(n,{phoneVerificationInfo:xr(t.a)}),lo(e,Vl,n)})}function da(t,e,n){return n.Ha().then(function(n){return n={mfaPendingCredential:n},q(n,{phoneVerificationInfo:xr(t.a)}),lo(e,Fl,n)})}function va(t){Cn(this,"factorId",t.fa),this.a=t}function ya(t){if(va.call(this,t),this.a.fa!=Pr.PROVIDER_ID)throw new y("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ga(t,e){qt.call(this,t);for(var n in e)this[n]=e[n]}function ma(t,e){this.a=t,this.b=[],this.c=p(this.xc,this),Xt(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&Kc(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[_f]=t.uid),t.displayName&&(r[bf]=t.displayName),t.enrollmentTime&&(r[wf]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[If]=t.phoneNumber);try{e=new Vn(r)}catch(t){}t=e}else t=null;t&&n.push(t)}),wa(this,n)}function ba(t){var e=[];return Kc(t.mfaInfo||[],function(t){(t=Un(t))&&e.push(t)}),e}function wa(t,e){t.b=e,Cn(t,"enrolledFactors",e)}function _a(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ia(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Ea(t,e){t.stop(),t.b=fe(Ia(t,e)).then(function(){return Tn()}).then(function(){return t.h()}).then(function(){Ea(t,!0)}).s(function(e){t.i(e)&&Ea(t,!1)})}function Ta(t){this.c=t,this.b=this.a=null}function Aa(t){return t.b&&1e3*t.b.c||0}function Sa(t,e){var n=e.refreshToken;t.b=Jn(e[El]||""),t.a=n}function Na(t,e){t.b=e.b,t.a=e.a}function ka(t,e){return Wi(t.c,e).then(function(e){return t.b=Jn(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function Oa(t,e){this.a=t||null,this.b=e||null,Ln(this,{lastSignInTime:Sn(e||null),creationTime:Sn(t||null)})}function Da(t){return new Oa(t.a,t.b)}function Ca(t,e,n,r,i,o){Ln(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function La(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r=Dc.SDK_VERSION?un(Dc.SDK_VERSION):null;this.a=new Vi(this.l,m(Fc),r),t.emulatorConfig&&qi(this.a,t.emulatorConfig),this.b=new Ta(this.a),qa(this,e[El]),Sa(this.b,e),Cn(this,"refreshToken",this.b.a),Ha(this,n||{}),se.call(this),this.P=!1,this.o&&ln()&&(this.i=Xs(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=Ua(this),this.$=p(this.gb,this);var i=this;this.pa=null,this.Ba=function(t){i.wa(t.h)},this.ba=null,this.za=function(t){qi(i.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){Pa(i,t.f)},this.aa=null,this.N=new ma(this,n),Cn(this,"multiFactor",this.N)}function Ra(t,e){t.ba&&$t(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&Xt(e,"languageCodeChanged",t.Ba)}function xa(t,e){t.W&&$t(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&Xt(e,"emulatorConfigChanged",t.za)}function Pa(t,e){t.X=e,Gi(t.a,Dc.SDK_VERSION?un(Dc.SDK_VERSION,t.X):null)}function Ma(t,e){t.aa&&$t(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&Xt(e,"frameworkChanged",t.Aa)}function ja(t){try{return Dc.app(t.m).auth()}catch(e){throw new y("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ua(t){return new _a(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=Aa(t.b)-Vc()-3e5;return 0<e?e:0})}function Va(t){t.A||t.u.b||(t.u.start(),$t(t,"tokenChanged",t.$),Xt(t,"tokenChanged",t.$))}function Fa(t){$t(t,"tokenChanged",t.$),t.u.stop()}function qa(t,e){t.ya=e,Cn(t,"_lat",e)}function Ba(t,e){L(t.R,function(t){return t==e})}function Ga(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return St(e).then(function(){return t})}function za(t){t.i&&!t.P&&(t.P=!0,qs(t.i,t))}function Ha(t,e){Ln(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Oa(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Wa(){}function Ka(t){return It().then(function(){if(t.A)throw new y("app-deleted")})}function Xa(t){return Yc(t.providerData,function(t){return t.providerId})}function Ya(t,e){e&&(Ja(t,e.providerId),t.providerData.push(e))}function Ja(t,e){L(t.providerData,function(t){return t.providerId==e})}function Qa(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Cn(t,e,n)}function $a(t,e){t!=e&&(Ln(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Cn(t,"metadata",Da(e.metadata)):Cn(t,"metadata",new Oa),Kc(e.providerData,function(e){Ya(t,e)}),Na(t.b,e.b),Cn(t,"refreshToken",t.b.a),wa(t.N,e.N.b))}function Za(t){return t.I().then(function(e){var n=t.isAnonymous;return eu(t,e).then(function(){return n||Qa(t,"isAnonymous",!1),e})})}function tu(t,e){e[El]&&t.ya!=e[El]&&(Sa(t.b,e),t.dispatchEvent(new ga("tokenChanged")),qa(t,e[El]),Qa(t,"refreshToken",t.b.a))}function eu(t,e){return lo(t.a,ql,{idToken:e}).then(p(t.Jc,t))}function nu(t){return(t=t.providerUserInfo)&&t.length?Yc(t,function(t){return new Ca(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}function ru(t,e){return Za(t).then(function(){if(D(Xa(t),e))return Ga(t).then(function(){throw new y("provider-already-linked")})})}function iu(t,e,n){var r=jr(e);return e=Zn(e),Rn({user:t,credential:r,additionalUserInfo:e,operationType:n})}function ou(t,e){return tu(t,e),t.reload().then(function(){return t})}function su(t,e,n,r,i){if(!ln())return Et(new y("operation-not-supported-in-this-environment"));if(t.f&&!i)return Et(t.f);var o=$n(n.providerId),s=bn(t.uid+":::"),a=null;(!vn()||en())&&t.o&&n.isOAuthProvider&&(a=ko(t.o,t.l,t.m,e,n,null,s,Dc.SDK_VERSION||null,null,null,t.tenantId));var u=Je(a,o&&o.ua,o&&o.ta);return r=r().then(function(){if(uu(t),!i)return t.I().then(function(){})}).then(function(){return Gs(t.i,u,e,n,s,!!a,t.tenantId)}).then(function(){return new bt(function(n,r){t.ma(e,null,new y("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=s,t.c=Ws(t.i,t,e,u,s)})}).then(function(t){return u&&Ye(u),t?Rn(t):null}).s(function(t){throw u&&Ye(u),t}),cu(t,r,i)}function au(t,e,n,r,i){if(!ln())return Et(new y("operation-not-supported-in-this-environment"));if(t.f&&!i)return Et(t.f);var o=null,s=bn(t.uid+":::");return r=r().then(function(){if(uu(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Ga(t)}).then(function(e){return t.ha&&(e=t.ha,e=e.b.set(Up,t.w(),e.a)),e}).then(function(){return Hs(t.i,e,n,s,t.tenantId)}).s(function(e){if(o=e,t.ha)return vu(t.ha);throw o}).then(function(){if(o)throw o}),cu(t,r,i)}function uu(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new y("internal-error");throw new y("auth-domain-config-required")}}function cu(t,e,n){var r=hu(t,e,n);return t.G.push(r),r.na(function(){C(t.G,r)}),r.s(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=fa(e.w(),ja(t),p(t.ic,t))),n||e})}function hu(t,e,n){return t.f&&!n?(e.cancel(),Et(t.f)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new ga("userInvalidated")),t.f=e),e})}function fu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[El]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new La(e,n,t);return t.providerData&&Kc(t.providerData,function(t){t&&Ya(r,Rn(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function lu(t,e,n,r){var i=new La(t,e);return n&&(i.ha=n),r&&Pa(i,r),i.reload().then(function(){return i})}function pu(t,e,n,r){var i=t.b,o={};return o[El]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new La(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&Pa(e,r),$a(e,t),e}function du(t){this.a=t,this.b=cs()}function vu(t){return ps(t.b,Up,t.a)}function yu(t,e){return t.b.get(Up,t.a).then(function(t){return t&&e&&(t.authDomain=e),fu(t||{})})}function gu(t){this.a=t,this.b=cs(),this.c=null,this.f=bu(this),this.b.addListener(wu("local"),this.a,p(this.g,this))}function mu(t,e){var n,r=[];for(n in Ip)Ip[n]!==e&&r.push(ps(t.b,wu(Ip[n]),t.a));return r.push(ps(t.b,Vp,t.a)),At(r)}function bu(t){var e=wu("local"),n=wu("session"),r=wu("none");return ls(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Vp,t.a).then(function(t){return t?wu(t):e})})})}).then(function(e){return t.c=e,mu(t,e.D)}).s(function(){t.c||(t.c=e)})}function wu(t){return{name:"authUser",D:t}}function _u(t){return Au(t,function(){return t.b.set(Vp,t.c.D,t.a)})}function Iu(t,e){return Au(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Eu(t){return Au(t,function(){return ps(t.b,t.c,t.a)})}function Tu(t,e,n){return Au(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),fu(t||{})})})}function Au(t,e){return t.f=t.f.then(e,e),t.f}function Su(t){if(this.m=!1,Cn(this,"settings",new oa),Cn(this,"app",t),!qu(this).options||!qu(this).options.apiKey)throw new y("invalid-api-key");t=Dc.SDK_VERSION?un(Dc.SDK_VERSION):null,this.a=new Vi(qu(this).options&&qu(this).options.apiKey,m(Fc),t),this.R=[],this.u=[],this.P=[],this.ac=Dc.INTERNAL.createSubscribe(p(this.yc,this)),this.X=void 0,this.bc=Dc.INTERNAL.createSubscribe(p(this.zc,this)),Mu(this,null),this.l=new gu(qu(this).options.apiKey+":"+qu(this).name),this.G=new du(qu(this).options.apiKey+":"+qu(this).name),this.$=Wu(this,Uu(this)),this.i=Wu(this,Vu(this)),this.ba=!1,this.pa=p(this.Yc,this),this.Ba=p(this.da,this),this.ya=p(this.kc,this),this.za=p(this.vc,this),this.Aa=p(this.wc,this),this.b=null,Ru(this),this.INTERNAL={},this.INTERNAL.delete=p(this.delete,this),this.INTERNAL.logFramework=p(this.Fc,this),this.A=0,se.call(this),Cu(this),this.N=[],this.f=null}function Nu(t){qt.call(this,"languageCodeChanged"),this.h=t}function ku(t){qt.call(this,"emulatorConfigChanged"),this.c=t}function Ou(t){qt.call(this,"frameworkChanged"),this.f=t}function Du(){An("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),xc.document&&$e().then(function(){var t=xc.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),xc.document.body.appendChild(t)})}function Cu(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}function Lu(t){return t.gb||Et(new y("auth-domain-config-required"))}function Ru(t){var e=qu(t).options.authDomain,n=qu(t).options.apiKey;e&&ln()&&(t.gb=t.$.then(function(){if(!t.m){if(t.b=Xs(e,n,qu(t).name,t.f),qs(t.b,t),Bu(t)&&za(Bu(t)),t.o){za(t.o);var r=t.o;r.wa(t.ka()),Ra(r,t),r=t.o,Pa(r,t.N),Ma(r,t),r=t.o,qi(r.a,t.f),xa(r,t),t.o=null}return t.b}}))}function xu(t){if(!ln())return Et(new y("operation-not-supported-in-this-environment"));var e=Lu(t).then(function(){return t.b.qa()}).then(function(t){return t?Rn(t):null});return Wu(t,e)}function Pu(t,e){var n={};return n.apiKey=qu(t).options.apiKey,n.authDomain=qu(t).options.authDomain,n.appName=qu(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then(function(){return lu(n,e,t.G,t.Ga())}).then(function(e){return Bu(t)&&e.uid==Bu(t).uid?($a(Bu(t),e),t.da(e)):(Mu(t,e),za(e),t.da(e))}).then(function(){zu(t)})}function Mu(t,e){Bu(t)&&(Ba(Bu(t),t.Ba),$t(Bu(t),"tokenChanged",t.ya),$t(Bu(t),"userDeleted",t.za),$t(Bu(t),"userInvalidated",t.Aa),Fa(Bu(t))),e&&(e.R.push(t.Ba),Xt(e,"tokenChanged",t.ya),Xt(e,"userDeleted",t.za),Xt(e,"userInvalidated",t.Aa),0<t.A&&Va(e)),Cn(t,"currentUser",e),e&&(e.wa(t.ka()),Ra(e,t),Pa(e,t.N),Ma(e,t),qi(e.a,t.f),xa(e,t))}function ju(t){var e=yu(t.G,qu(t).options.authDomain).then(function(e){return(t.o=e)&&(e.ha=t.G),vu(t.G)});return Wu(t,e)}function Uu(t){var e=qu(t).options.authDomain,n=ju(t).then(function(){return Tu(t.l,e,t.f)}).then(function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Iu(t.l,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Eu(t.l)})):null}).then(function(e){Mu(t,e||null)});return Wu(t,n)}function Vu(t){return t.$.then(function(){return xu(t)}).s(function(){}).then(function(){if(!t.m)return t.pa()}).s(function(){}).then(function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(wu("local"),e.a,t.pa)}})}function Fu(t,e){var n=null,r=null;return Wu(t,e.then(function(e){return n=jr(e),r=Zn(e),Pu(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=fa(e.w(),t,p(t.jc,t))),n||e}).then(function(){return Rn({user:Bu(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function qu(t){return t.app}function Bu(t){return t.currentUser}function Gu(t){return Bu(t)&&Bu(t)._lat||null}function zu(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](Gu(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](Gu(t))}}function Hu(t,e){t.P.push(e),Wu(t,t.i.then(function(){!t.m&&D(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(Gu(t)))}))}function Wu(t,e){return t.R.push(e),e.na(function(){C(t.R,e)}),e}function Ku(){}function Xu(){this.a={},this.b=1e12}function Yu(t,e){return(e=Ju(e))?t.a[e]||null:null}function Ju(t){return(t=void 0===t?1e12:t)?t.toString():null}function Qu(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ut(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Xt(this.f,"click",this.i)}function $u(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Zu(){}function tc(){}function ec(){this.b=xc.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function nc(t,e,n,r,i,o,s){if(Cn(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(qp||(qp=new tc),s=qp):(zp||(zp=new ec),s=zp),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kp])throw new y("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Xp],!xc.document)throw new y("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ut(e)||!this.i&&ut(e).hasChildNodes())throw new y("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Vi(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Hp];this.a[Hp]=function(t){if(rc(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=hn(u,xc);"function"==typeof e&&e(t)}};var c=this.a[Wp];this.a[Wp]=function(){if(rc(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=hn(c,xc);"function"==typeof t&&t()}}}function rc(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function ic(t,e){L(t.l,function(t){return t==e})}function oc(t,e){return t.h.push(e),e.na(function(){C(t.h,e)}),e}function sc(t){if(t.A)throw new y("internal-error","RecaptchaVerifier instance has been destroyed.")}function ac(t,e,n){var r=!1;try{this.b=n||Dc.app()}catch(t){throw new y("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new y("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Dc.SDK_VERSION?un(Dc.SDK_VERSION,o):null,nc.call(this,n,t,e,function(){try{var t=i.b.auth().ka()}catch(e){t=null}return t},o,m(Fc),r)}function uc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new y("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Yp.length)throw new y("internal-error","Argument validator received an unsupported number of arguments.");n=Yp[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new y("argument-error",t+" failed: "+r)}function cc(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function hc(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function fc(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:c}}function lc(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function pc(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function dc(){return{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}}}function vc(){return{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Su)}}}function yc(){return{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Dc.app.App)}}}function gc(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function mc(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}}function bc(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function wc(t,e){return c(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function _c(t){return c(t)&&"string"==typeof t.uid}function Ic(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Ec(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Tc(t,e){for(var n in e){var r=e[n].name;t[r]=Nc(r,t[n],e[n].j)}}function Ac(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:d(function(t){return this[t]},n),set:d(function(t,e,n,r){uc(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Sc(t,e,n,r){t[e]=Nc(e,n,r)}function Nc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return uc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=kc(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function kc(t){return t=t.split("."),t[t.length-1]}var Oc,Dc=n(3).default,Cc="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},Lc=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);!function(t,e){if(e){var n=Lc;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}t=t[t.length-1],r=n[t],(e=e(r))!=r&&null!=e&&Cc(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var o=Lc.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var o=i(t),s=o.next();!s.done;s=o.next())r(s.value).Pa(e,n)})},e.all=function(t){var n=i(t),o=n.next();return o.done?r([]):new e(function(t,e){var i=[],s=0;do{i.push(void 0),s++,r(o.value).Pa(function(e){return function(n){i[e]=n,0==--s&&t(i)}}(i.length-1),e),o=n.next()}while(!o.done)})},e});var Rc=Rc||{},xc=this||self,Pc=/^[\w+/_-]+[=]{0,2}$/,Mc=null,jc="closure_uid_"+(1e9*Math.random()>>>0),Uc=0,Vc=Date.now||function(){return+new Date};v(y,Error),y.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},y.prototype.toJSON=function(){return this.w()};var Fc,qc="auth/",Bc={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Gc={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};Fc=m("__EID__")?"__EID__":void 0,v(w,Error),w.prototype.name="CustomError",v(_,w),_.prototype.name="AssertionError",E.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var zc=new E(function(){return new N},function(t){t.reset()});A.prototype.add=function(t,e){var n=zc.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},N.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},N.prototype.reset=function(){this.next=this.b=this.a=null};var Hc,Wc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Kc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},Xc=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},Yc=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Jc=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1},Qc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},$c=/&/g,Zc=/</g,th=/>/g,eh=/"/g,nh=/'/g,rh=/\x00/g,ih=/[\x00&<>"']/;t:{var oh=xc.navigator;if(oh){var sh=oh.userAgent;if(sh){Hc=sh;break t}}Hc=""}var ah="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");G.prototype.sa=!0,G.prototype.ra=function(){return this.a},G.prototype.toString=function(){return"Const{"+this.a+"}"};var uh={},ch={},hh=new G(ch,"");H.prototype.sa=!0,H.prototype.ra=function(){return this.a.toString()},H.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var fh=/%{(\w+)}/g,lh=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ph={},dh={};X.prototype.sa=!0,X.prototype.ra=function(){return this.a.toString()},X.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var vh=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,yh={},gh={};Q.prototype.sa=!0,Q.prototype.ra=function(){return this.a.toString()},Q.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var mh={};Z("<!DOCTYPE html>");var bh=Z("");Z("<br>"),it[" "]=o;var wh,_h=j("Opera"),Ih=j("Trident")||j("MSIE"),Eh=j("Edge"),Th=Eh||Ih,Ah=j("Gecko")&&!(P(Hc.toLowerCase(),"webkit")&&!j("Edge"))&&!(j("Trident")||j("MSIE"))&&!j("Edge"),Sh=P(Hc.toLowerCase(),"webkit")&&!j("Edge");t:{var Nh="",kh=function(){var t=Hc;return Ah?/rv:([^\);]+)(\)|;)/.exec(t):Eh?/Edge\/([\d\.]+)/.exec(t):Ih?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Sh?/WebKit\/(\S+)/.exec(t):_h?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(kh&&(Nh=kh?kh[1]:""),Ih){var Oh=st();if(null!=Oh&&Oh>parseFloat(Nh)){wh=String(Oh);break t}}wh=Nh}var Dh,Ch={};Dh=xc.document&&Ih?st():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Lh,Rh,xh=!Ih||9<=Number(Dh),Ph={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Mh=!1,jh=new A,Uh=0,Vh=2,Fh=3;wt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var qh=new E(function(){return new wt},function(t){t.reset()});bt.prototype.then=function(t,e,n){return Ot(this,u(t)?t:null,u(e)?e:null,n)},bt.prototype.$goog_Thenable=!0,Oc=bt.prototype,Oc.na=function(t,e){return t=_t(t,t,e),t.c=!0,kt(this,t),this},Oc.s=function(t,e){return Ot(this,null,t,e)},Oc.cancel=function(t){if(this.a==Uh){var e=new Ut(t);yt(function(){Nt(this,e)},this)}},Oc.Zc=function(t){this.a=Uh,Dt(this,Vh,t)},Oc.$c=function(t){this.a=Uh,Dt(this,Fh,t)},Oc.fc=function(){for(var t;t=xt(this);)Pt(this,t,this.a,this.i);this.h=!1};var Bh=dt;v(Ut,w),Ut.prototype.name="cancel";var Gh=0,zh={};Vt.prototype.xa=!1,Vt.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Hh=Object.freeze||function(t){return t},Wh=!Ih||9<=Number(Dh),Kh=Ih&&!at("9"),Xh=function(){if(!xc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xc.addEventListener("test",o,e),xc.removeEventListener("test",o,e)}catch(t){}return t}();qt.prototype.preventDefault=function(){this.defaultPrevented=!0},v(Bt,qt);var Yh=Hh({2:"touch",3:"pen",4:"mouse"});Bt.prototype.preventDefault=function(){Bt.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Kh)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Bt.prototype.g=function(){return this.a};var Jh="closure_listenable_"+(1e6*Math.random()|0),Qh=0;Ht.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Kt(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):(e=new Gt(e,this.src,o,!!r,i),e.Oa=n,t.push(e)),e};var $h="closure_lm_"+(1e6*Math.random()|0),Zh={},tf=0,ef="__closure_events_fn_"+(1e9*Math.random()>>>0);v(se,Vt),se.prototype[Jh]=!0,se.prototype.addEventListener=function(t,e,n,r){Xt(this,t,e,n,r)},se.prototype.removeEventListener=function(t,e,n,r){$t(this,t,e,n,r)},se.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new qt(t,n);else if(t instanceof qt)t.target=t.target||n;else{var i=t;t=new qt(r,n),q(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=ce(s,r,!0,t)&&i}if(s=t.b=n,i=ce(s,r,!0,t)&&i,i=ce(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.b=e[o],i=ce(s,r,!1,t)&&i;return i},se.prototype.Da=function(){if(se.$a.Da.call(this),this.v){var t,e=this.v,n=0;for(t in e.a){for(var r=e.a[t],i=0;i<r.length;i++)++n,zt(r[i]);delete e.a[t],e.b--}}this.fb=null},Oc=ve.prototype,Oc.V=function(){ye(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Oc.Y=function(){return ye(this),this.a.concat()},Oc.clear=function(){this.b={},this.c=this.a.length=0},Oc.get=function(t,e){return ge(this.b,t)?this.b[t]:e},Oc.set=function(t,e){ge(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Oc.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var nf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;be.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ke(e,rf,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(ke(e,rf,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(ke(n,"/"==n.charAt(0)?sf:of,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",ke(n,uf)),t.join("")},be.prototype.resolve=function(t){var e=new be(this),n=!!t.f;n?we(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)_e(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(P(i,"./")||P(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Ie(e,Me(t.b)):n=!!t.h,n&&(e.h=t.h),e};var rf=/[#\/\?@]/g,of=/[#\?:]/g,sf=/[#\?]/g,af=/[#\?@]/g,uf=/#/g;Oc=De.prototype,Oc.add=function(t,e){Ce(this),this.c=null,t=je(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Oc.clear=function(){this.a=this.c=null,this.b=0},Oc.forEach=function(t,e){Ce(this),this.a.forEach(function(n,r){Kc(n,function(n){t.call(e,n,r,this)},this)},this)},Oc.Y=function(){Ce(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Oc.V=function(t){Ce(this);var e=[];if("string"==typeof t)xe(this,t)&&(e=R(e,this.a.get(je(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=R(e,t[n])}return e},Oc.set=function(t,e){return Ce(this),this.c=null,t=je(this,t),xe(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Oc.get=function(t,e){return t?(t=this.V(t),0<t.length?String(t[0]):e):e},Oc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var cf={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hf=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,ff=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lf=/^[^@]+@[^@]+$/,pf="Firefox",df="Chrome",vf={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};In.prototype.get=function(){var t=xc.navigator;return(t&&"boolean"==typeof t.onLine&&(pn()||"chrome-extension:"===dn()||void 0!==t.connection)?t.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var yf,gf={};try{var mf={};Object.defineProperty(mf,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(mf,"abcd",{configurable:!0,enumerable:!0,value:2}),yf=2==mf.abcd}catch(t){yf=!1}jn.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var bf="displayName",wf="enrolledAt",_f="mfaEnrollmentId",If="phoneInfo";v(Vn,jn),Vn.prototype.w=function(){var t=Vn.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Ef="REVERT_SECOND_FACTOR_ADDITION",Tf="EMAIL_SIGNIN",Af="VERIFY_AND_CHANGE_EMAIL",Sf="email",Nf="mfaInfo",kf="newEmail",Of="requestType",Df="email",Cf="fromEmail",Lf="multiFactorInfo",Rf="previousEmail",xf="data",Pf="operation",Mf="apiKey",jf="oobCode",Uf="continueUrl",Vf="languageCode",Ff="mode",qf="tenantId",Bf={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Ef,signIn:Tf,verifyAndChangeEmail:Af,verifyEmail:"VERIFY_EMAIL"},Gf="android",zf="dynamicLinkDomain",Hf="handleCodeInApp",Wf="iOS",Kf="url",Xf="installApp",Yf="minimumVersion",Jf="packageName",Qf="bundleId",$f=null;Yn.prototype.S=function(){return this.f},Yn.prototype.i=function(){return this.b},Yn.prototype.toString=function(){return this.g};var Zf="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),tl=["client_id","response_type","scope","redirect_uri","state"],el={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:tl},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:tl},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:tl},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Zf},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}},nl="idToken",rl="providerId";v(er,tr),v(nr,er),v(rr,er),v(ir,er),v(or,er);var il="enroll",ol="signin";ar.prototype.Ha=function(){return It(this.a?this.a:this.b)},ar.prototype.w=function(){return this.type==il?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ur.prototype.ja=function(){},ur.prototype.b=function(){},ur.prototype.c=function(){},ur.prototype.w=function(){},hr.prototype.ja=function(t){return uo(t,fr(this))},hr.prototype.b=function(t,e){var n=fr(this);return n.idToken=e,co(t,n)},hr.prototype.c=function(t,e){return cr(ho(t,fr(this)),e)},hr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},pr.prototype.ja=function(t){return uo(t,dr(this))},pr.prototype.b=function(t,e){var n=dr(this);return n.idToken=e,co(t,n)},pr.prototype.c=function(t,e){return cr(ho(t,dr(this)),e)},pr.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yr.prototype.Ka=function(t){return this.Hb=F(t),this},v(gr,yr),v(mr,yr),mr.prototype.Ca=function(t){return D(this.a,t)||this.a.push(t),this},mr.prototype.Pb=function(){return x(this.a)},mr.prototype.credential=function(t,e){var n;if(n=c(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new y("argument-error","credential failed: must provide the ID token and/or the access token.");return new pr(this.providerId,n,this.providerId)},v(br,mr),Cn(br,"PROVIDER_ID","facebook.com"),Cn(br,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),v(_r,mr),Cn(_r,"PROVIDER_ID","github.com"),Cn(_r,"GITHUB_SIGN_IN_METHOD","github.com"),v(Er,mr),Cn(Er,"PROVIDER_ID","google.com"),Cn(Er,"GOOGLE_SIGN_IN_METHOD","google.com"),v(Ar,yr),Cn(Ar,"PROVIDER_ID","twitter.com"),Cn(Ar,"TWITTER_SIGN_IN_METHOD","twitter.com"),Nr.prototype.ja=function(t){return this.signInMethod==Or.EMAIL_LINK_SIGN_IN_METHOD?lo(t,jl,{email:this.a,oobCode:this.f}):lo(t,op,{email:this.a,password:this.f})},Nr.prototype.b=function(t,e){return this.signInMethod==Or.EMAIL_LINK_SIGN_IN_METHOD?lo(t,Ul,{idToken:e,email:this.a,oobCode:this.f}):lo(t,Ql,{idToken:e,email:this.a,password:this.f})},Nr.prototype.c=function(t,e){return cr(this.ja(t),e)},Nr.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ln(Or,{PROVIDER_ID:"password"}),Ln(Or,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ln(Or,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lr.prototype.ja=function(t){return t.eb(xr(this))},Lr.prototype.b=function(t,e){var n=xr(this);return n.idToken=e,lo(t,ap,n)},Lr.prototype.c=function(t,e){var n=xr(this);return n.operation="REAUTH",t=lo(t,up,n),cr(t,e)},Lr.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Pr.prototype.eb=function(t,e){var n=this.a.a;return It(e.verify()).then(function(r){if("string"!=typeof r)throw new y("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=c(t)?t.session:null,s=c(t)?t.phoneNumber:t;return i=o&&o.type==il?o.Ha().then(function(t){return eo(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})}):o&&o.type==ol?o.Ha().then(function(e){return ro(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):to(n,{phoneNumber:s,recaptchaToken:r}),i.then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new y("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Ln(Pr,{PROVIDER_ID:"phone"}),Ln(Pr,{PHONE_SIGN_IN_METHOD:"phone"}),Vr.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vr.prototype.S=function(){return this.h},Vr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var sl=null;v(Gr,y),v(zr,y),zr.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&q(t,e),t},zr.prototype.toJSON=function(){return this.w()},Wr.prototype.c=null;var al;v(Xr,Wr),Xr.prototype.a=function(){var t=Yr(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xr.prototype.b=function(){var t={};return Yr(this)&&(t[0]=!0,t[1]=!0),t},al=new Xr,v(Jr,Wr),Jr.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Qr;throw Error("Unsupported browser")},Jr.prototype.b=function(){return{}},Oc=Qr.prototype,Oc.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},Oc.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},Oc.abort=function(){this.a.abort()},Oc.setRequestHeader=function(){},Oc.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},Oc.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,$r(this,4)},Oc.Rb=function(){this.status=500,this.response=this.responseText="",$r(this,4)},Oc.uc=function(){this.Rb()},Oc.qc=function(){this.status=200,$r(this,1)},Oc.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zr.prototype.a=null;var ul=0;Zr.prototype.reset=function(t,e,n,r,i){"number"==typeof i||ul++,r||Vc(),delete this.a},ei.prototype.toString=function(){return this.name};var cl=new ei("SEVERE",1e3),hl=new ei("WARNING",900),fl=new ei("CONFIG",700),ll=new ei("FINE",500);ti.prototype.log=function(t,e,n){if(t.value>=ni(this).value)for(u(e)&&(e=e()),t=new Zr(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var pl={},dl=null;v(oi,Wr),oi.prototype.a=function(){return new si(this.f)},oi.prototype.b=function(t){return function(){return t}}({}),v(si,se);var vl=0;Oc=si.prototype,Oc.open=function(t,e){if(this.readyState!=vl)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ci(this)},Oc.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},Oc.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ui(this,!1)),this.readyState=vl},Oc.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ci(this)),this.a&&(this.readyState=3,ci(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==xc.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ai(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},Oc.oc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ui(this,!0):ci(this),3==this.readyState&&ai(this)}},Oc.sc=function(t){this.a&&(this.response=this.responseText=t,ui(this,!0))},Oc.rc=function(t){this.a&&(this.response=t,ui(this,!0))},Oc.Ta=function(t){var e=this.h;e&&e.log(hl,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ui(this,!0)},Oc.setRequestHeader=function(t,e){this.i.append(t,e)},Oc.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(hl,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},Oc.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(hl,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},v(hi,se);var yl="";hi.prototype.b=ri("goog.net.XhrIo");var gl=/^https?$/i,ml=["POST","PUT"];Oc=hi.prototype,Oc.Ma=function(){void 0!==Rc&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ii(this.b,Ii(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},Oc.abort=function(){this.a&&this.c&&(ii(this.b,Ii(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),gi(this))},Oc.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),gi(this,!0)),hi.$a.Da.call(this)},Oc.Ub=function(){this.xa||(this.N||this.i||this.f?yi(this):this.Ic())},Oc.Ic=function(){yi(this)},Oc.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case yl:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(cl,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ii(this.b,"Can not get response: "+t.message),null}},Ei.prototype.cancel=function(t){if(this.a)this.c instanceof Ei&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):0>=--e.l&&e.cancel()}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Ci(this),Ai(this),Ti(this,!1,t))}},Ei.prototype.v=function(t,e){this.i=!1,Ti(this,t,e)},Ei.prototype.then=function(t,e,n){var r,i,o=new bt(function(t,e){r=t,i=e});return Ni(this,r,function(t){t instanceof Ci?o.cancel():i(t)}),o.then(t,e,n)},Ei.prototype.$goog_Thenable=!0,v(Di,w),Di.prototype.message="Deferred has already fired",Di.prototype.name="AlreadyCalledError",v(Ci,w),Ci.prototype.message="Deferred was canceled",Ci.prototype.name="CanceledError",Li.prototype.c=function(){throw delete bl[this.a],this.b};var bl={},wl=0,_l=1;v(ji,w),v(Ui,Wr),Ui.prototype.a=function(){return new this.f},Ui.prototype.b=function(){return{}};var Il,El="idToken",Tl=new In(3e4,6e4),Al={"Content-Type":"application/x-www-form-urlencoded"},Sl=new In(3e4,6e4),Nl={"Content-Type":"application/json"};Vi.prototype.S=function(){return this.b},Vi.prototype.u=function(t,e,n,r,i,o){if(nn()&&(void 0===xc.fetch||void 0===xc.Headers||void 0===xc.Request))throw new y("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new hi(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}ae(s,"complete",function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(_i(this))||null}catch(e){t=null}e&&e(t)}),ue(s,"ready",function(){a&&clearTimeout(a),Ft(this)}),ue(s,"timeout",function(){a&&clearTimeout(a),Ft(this),e&&e(null)}),fi(s,t,n,r,i)};var kl=new G(ch,"https://apis.google.com/js/client.js?onload=%{onload}"),Ol="__fcb"+Math.floor(1e6*Math.random()).toString();Vi.prototype.o=function(t,e,n,r,i){var o=this;Il.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Vi.prototype.yb=function(){return lo(this,$l,{})},Vi.prototype.Ab=function(t,e){return lo(this,Jl,{idToken:t,email:e})},Vi.prototype.Bb=function(t,e){return lo(this,Ql,{idToken:t,password:e})};var Dl={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Oc=Vi.prototype,Oc.Cb=function(t,e){var n={idToken:t},r=[];return U(Dl,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),lo(this,Jl,n)},Oc.ub=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},q(t,e),lo(this,Hl,t)},Oc.vb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},q(t,e),lo(this,Bl,t)},Oc.tb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},q(t,e),lo(this,Gl,t)},Oc.Db=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},q(t,n),lo(this,zl,t)},Oc.eb=function(t){return lo(this,sp,t)},Oc.mb=function(t,e){return lo(this,Xl,{oobCode:t,newPassword:e})},Oc.Qa=function(t){return lo(this,Ll,{oobCode:t})},Oc.ib=function(t){return lo(this,Cl,{oobCode:t})};var Cl={endpoint:"setAccountInfo",B:fo,Z:"email",C:!0},Ll={endpoint:"resetPassword",B:fo,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new y("internal-error")},C:!0},Rl={endpoint:"signupNewUser",B:function(t){if(Xi(t),!t.password)throw new y("weak-password")},F:$i,U:!0,C:!0},xl={endpoint:"createAuthUri",C:!0},Pl={endpoint:"deleteAccount",M:["idToken"]},Ml={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=s(t.deleteProvider))throw new y("internal-error")}},jl={endpoint:"emailLinkSignin",M:["email","oobCode"],B:Xi,F:$i,U:!0,C:!0},Ul={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:Xi,F:$i,U:!0},Vl={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:no,F:$i,C:!0,Na:!0},Fl={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:no,F:$i,C:!0,Na:!0},ql={endpoint:"getAccountInfo"},Bl={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new y("internal-error");Xi(t)},Z:"email",C:!0},Gl={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new y("internal-error")},Z:"email",C:!0},zl={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new y("internal-error")},Z:"email",C:!0},Hl={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new y("internal-error");Xi(t)},Z:"email",C:!0},Wl={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Kl={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new y("internal-error")}},Xl={endpoint:"resetPassword",B:fo,Z:"email",C:!0},Yl={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Jl={endpoint:"setAccountInfo",M:["idToken"],B:Yi,U:!0},Ql={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(Yi(t),!t.password)throw new y("weak-password")},F:$i,U:!0},$l={endpoint:"signupNewUser",F:$i,U:!0,C:!0},Zl={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new y("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new y("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new y("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new y("internal-error")},C:!0,Na:!0},tp={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new y("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new y("internal-error")},C:!0,Na:!0},ep={endpoint:"verifyAssertion",B:oo,Xa:so,F:ao,U:!0,C:!0},np={endpoint:"verifyAssertion",B:oo,Xa:so,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new y("user-not-found");if(t.errorMessage)throw po(t.errorMessage);$i(t)},U:!0,C:!0},rp={endpoint:"verifyAssertion",B:function(t){if(oo(t),!t.idToken)throw new y("internal-error")},Xa:so,F:ao,U:!0},ip={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new y("invalid-custom-token")},F:$i,U:!0,C:!0},op={endpoint:"verifyPassword",B:function(t){if(Xi(t),!t.password)throw new y("wrong-password")},F:$i,U:!0,C:!0},sp={endpoint:"verifyPhoneNumber",B:Zi,F:$i,C:!0},ap={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new y("internal-error");Zi(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Hr(t);$i(t)}},up={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Zi,F:$i,C:!0},cp={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[El]^!!t.refreshToken)throw new y("internal-error")},C:!0,Na:!0},hp=new G(ch,"https://apis.google.com/js/api.js?onload=%{onload}"),fp=new In(3e4,6e4),lp=new In(5e3,15e3),pp=null;_o.prototype.toString=function(){return this.f?Ee(this.a,"v",this.f):Re(this.a.b,"v"),this.b?Ee(this.a,"eid",this.b):Re(this.a.b,"eid"),this.c.length?Ee(this.a,"fw",this.c.join(",")):Re(this.a.b,"fw"),this.a.toString()},Io.prototype.xb=function(t){return this.h=t,this},Io.prototype.toString=function(){if(this.m){var t=Ae(this.m.url);t=Se(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Se("https",this.u,null,"/__/auth/handler");if(Ee(t,"apiKey",this.o),Ee(t,"appName",this.c),Ee(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=Dc.app(this.c).auth().ka()}catch(t){n=null}e.nb=n,Ee(t,"providerId",this.a.providerId),n=this.a,e=gn(n.Hb);for(var r in e)e[r]=e[r].toString();r=n.Pc,e=F(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),V(e)||Ee(t,"customParameters",yn(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb(),n.length&&Ee(t,"scopes",n.join(","))),this.l?Ee(t,"redirectUrl",this.l):Re(t.b,"redirectUrl"),this.g?Ee(t,"eventId",this.g):Re(t.b,"eventId"),this.i?Ee(t,"v",this.i):Re(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Te(t,s)&&Ee(t,s,this.b[s]);return this.h?Ee(t,"tid",this.h):Re(t.b,"tid"),this.f?Ee(t,"eid",this.f):Re(t.b,"eid"),s=Eo(this.c),s.length&&Ee(t,"fw",s.join(",")),t.toString()},Oc=To.prototype,Oc.Nb=function(t,e,n){var r=new y("popup-closed-by-user"),i=new y("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){Do(o).then(function(n){n||(t&&Ye(t),e(i),s=!0)})}).s(function(){}).then(function(){if(!s)return Qe(t)}).then(function(){if(!s)return fe(n).then(function(){e(r)})})},Oc.Wb=function(){var t=cn();return!vn(t)&&!wn(t)},Oc.Sb=function(){return!1},Oc.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Et(new y("popup-blocked"));if(s&&!vn())return this.la().s(function(e){Ye(t),i(e)}),r(),It();this.a||(this.a=Ao(No(this)));var u=this;return this.a.then(function(){var e=u.la().s(function(e){throw Ye(t),i(e),e});return r(),e}).then(function(){if(Ur(n),!s){He(ko(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},Oc.Mb=function(t,e,n,r){this.a||(this.a=Ao(No(this)));var i=this;return this.a.then(function(){Ur(e),He(ko(i.o,i.g,i.b,t,e,ze(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},Oc.la=function(){var t=this;return So(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new y("network-request-failed")})},Oc.Zb=function(){return!0},Oc.Ea=function(t){this.h.push(t)},Oc.Ra=function(t){L(this.h,function(e){return e==t})},Oc=Co.prototype,Oc.get=function(t){return It(this.a.getItem(t)).then(function(t){return t&&mn(t)})},Oc.set=function(t,e){return It(this.a.setItem(t,yn(e)))},Oc.T=function(t){return It(this.a.removeItem(t))},Oc.ca=function(){},Oc.ia=function(){};var dp=[];Lo.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];Kc(r,function(e){i.push(It().then(function(){return e(t.origin,t.data.data)}))}),St(i).then(function(r){var i=[];Kc(r,function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),Kc(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},Po.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Mo.prototype.close=function(){for(;0<this.a.length;)Uo(this,this.a[0]);this.b=!0};var vp;Oc=Vo.prototype,Oc.set=function(t,e){var n,r=!1,i=this;return Bo(this).then(function(e){return n=e,e=zo(Ho(n,!0)),Wo(e.get(t))}).then(function(o){var s=zo(Ho(n,!0));return o?(o.value=e,Wo(s.put(o))):(i.b++,r=!0,o={},o.fbase_key=t,o.value=e,Wo(s.add(o)))}).then(function(){return i.c[t]=e,Ko(i,t)}).na(function(){r&&i.b--})},Oc.get=function(t){return Bo(this).then(function(e){return Wo(zo(Ho(e,!1)).get(t))}).then(function(t){return t&&t.value})},Oc.T=function(t){var e=!1,n=this;return Bo(this).then(function(r){return e=!0,n.b++,Wo(zo(Ho(r,!0)).delete(t))}).then(function(){return delete n.c[t],Ko(n,t)}).na(function(){e&&n.b--})},Oc.ca=function(t){0==this.a.length&&Yo(this),this.a.push(t)},Oc.ia=function(t){L(this.a,function(e){return e==t}),0==this.a.length&&Jo(this)},Oc=Qo.prototype,Oc.get=function(t){return this.b.then(function(e){return e.get(t)})},Oc.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},Oc.T=function(t){return this.b.then(function(e){return e.T(t)})},Oc.ca=function(t){this.a.push(t)},Oc.ia=function(t){L(this.a,function(e){return e==t})},Oc=$o.prototype,Oc.get=function(t){return It(this.a[t])},Oc.set=function(t,e){return this.a[t]=e,It()},Oc.T=function(t){return delete this.a[t],It()},Oc.ca=function(){},Oc.ia=function(){},Oc=Zo.prototype,Oc.get=function(t){var e=this;return It().then(function(){return mn(e.a.getItem(t))})},Oc.set=function(t,e){var n=this;return It().then(function(){var r=yn(e);null===r?n.T(t):n.a.setItem(t,r)})},Oc.T=function(t){var e=this;return It().then(function(){e.a.removeItem(t)})},Oc.ca=function(t){xc.window&&Xt(xc.window,"storage",t)},Oc.ia=function(t){xc.window&&$t(xc.window,"storage",t)},Oc=ns.prototype,Oc.get=function(){return It(null)},Oc.set=function(){return It()},Oc.T=function(){return It()},Oc.ca=function(){},Oc.ia=function(){},Oc=rs.prototype,Oc.get=function(t){var e=this;return It().then(function(){return mn(e.a.getItem(t))})},Oc.set=function(t,e){var n=this;return It().then(function(){var r=yn(e);null===r?n.T(t):n.a.setItem(t,r)})},Oc.T=function(t){var e=this;return It().then(function(){e.a.removeItem(t)})},Oc.ca=function(){},Oc.ia=function(){};var yp,gp,mp={D:Zo,ab:rs},bp={D:Zo,ab:rs},wp={D:Co,ab:ns},_p={D:Zo,ab:ns},Ip={qd:"local",NONE:"none",sd:"session"};Oc=us.prototype,Oc.get=function(t,e){return hs(this,t.D).get(fs(t,e))},Oc.set=function(t,e,n){var r=fs(t,n),i=this,o=hs(this,t.D);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.D&&(i.b[r]=e)})},Oc.addListener=function(t,e,n){t=fs(t,e),this.l&&(this.b[t]=xc.localStorage.getItem(t)),V(this.a)&&(hs(this,"local").ca(this.f),this.h||(Ge()||!Nn())&&xc.indexedDB||!this.l||ds(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},Oc.removeListener=function(t,e,n){t=fs(t,e),this.a[t]&&(L(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),V(this.a)&&(hs(this,"local").ia(this.f),vs(this))},Oc.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=xc.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?hs(this,"local").ia(this.f):vs(this),this.v)if(n=xc.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?xc.localStorage.setItem(e,r):xc.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===xc.localStorage.getItem(e)||(o.b[e]=xc.localStorage.getItem(e),o.lb(e))},Ih&&Dh&&10==Dh&&xc.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else Kc(t,p(this.lb,this))},Oc.lb=function(t){this.a[t]&&Kc(this.a[t],function(t){t()})};var Ep,Tp={name:"authEvent",D:"local"};v(ws,bs);for(var Ap=64,Sp=Ap-1,Np=[],kp=0;kp<Sp;kp++)Np[kp]=0;var Op=R(128,Np);ws.prototype.reset=function(){this.g=this.c=0,this.a=xc.Int32Array?new Int32Array(this.h):x(this.h)};var Dp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];v(Es,ws);var Cp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Oc=Ts.prototype,Oc.la=function(){return this.Ia?this.Ia:this.Ia=Ze().then(function(){if("function"!=typeof hn("universalLinks.subscribe",xc))throw As("cordova-universal-links-plugin-fix is not installed");if(void 0===hn("BuildInfo.packageName",xc))throw As("cordova-plugin-buildinfo is not installed");if("function"!=typeof hn("cordova.plugins.browsertab.openUrl",xc))throw As("cordova-plugin-browsertab is not installed");if("function"!=typeof hn("cordova.InAppBrowser.open",xc))throw As("cordova-plugin-inappbrowser is not installed")},function(){throw new y("cordova-not-ready")})},Oc.Nb=function(t,e){return e(new y("operation-not-supported-in-this-environment")),It()},Oc.Lb=function(){return Et(new y("operation-not-supported-in-this-environment"))},Oc.Zb=function(){return!1},Oc.Wb=function(){return!0},Oc.Sb=function(){return!0},Oc.Mb=function(t,e,n,r){if(this.c)return Et(new y("redirect-operation-pending"));var i=this,o=xc.document,s=null,a=null,u=null,c=null;return this.c=It().then(function(){return Ur(e),Ds(i)}).then(function(){return ks(i,t,e,n,r)}).then(function(){return new bt(function(t,e){a=function(){var e=hn("cordova.plugins.browsertab.close",xc);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s||(s=fe(2e3).then(function(){e(new y("redirect-cancelled-by-user"))}))},c=function(){En()&&u()},o.addEventListener("resume",u,!1),cn().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return Cs(i).then(function(){throw t})})}).na(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null})},Oc.Ea=function(t){this.b.push(t),Ds(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vr("unknown",null,null,null,new y("no-auth-event")),t(e))})},Oc.Ra=function(t){L(this.b,function(e){return e==t})};var Lp={name:"pendingRedirect",D:"session"};js.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Us(this.O,this.m,this.v,null,this.G),this.i={}},js.prototype.o=function(t){if(!t)throw new y("invalid-auth-event");if(6e5<=Vc()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Vc())),e=!0;break}}return Js(this.b),e};var Rp=new In(2e3,1e4),xp=new In(3e4,6e4);js.prototype.qa=function(){return this.b.qa()};var Pp={};Ys.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ys.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(ea(this,!0,null,t.a),It()):e.Fa(n,r)?$s(this,t,e):Et(new y("invalid-auth-event")):(ea(this,!1,null,null),It())}else Et(new y("invalid-auth-event"))},Ys.prototype.qa=function(){var t=this;return new bt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),na(t))})},ra.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),It()):e.Fa(n,r)?ia(t,e):Et(new y("invalid-auth-event"))}else Et(new y("invalid-auth-event"))},sa.prototype.confirm=function(t){return t=Mr(this.verificationId,t),this.a(t)};var Mp="mfaInfo",jp="mfaPendingCredential";ca.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then(function(t){var n=F(e.f);return delete n[Mp],delete n[jp],q(n,t),e.g(n)})},v(ha,y),la.prototype.rb=function(t,e,n){return e.type==il?pa(this,t,e,n):da(this,t,e)},v(va,la),v(ya,va),v(ga,qt),Oc=ma.prototype,Oc.xc=function(t){wa(this,ba(t.gd))},Oc.Qb=function(){return this.a.I().then(function(t){return new ar(t,null)})},Oc.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then(function(n){return t.rb(r,n,e)}).then(function(t){return tu(n.a,t),n.a.reload()})},Oc.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return lo(r,cp,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=Xc(e.b,function(t){return t.uid!=n});return wa(e,r),tu(e.a,t),e.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},Oc.w=function(){return{multiFactor:{enrolledFactors:Yc(this.b,function(t){return t.w()})}}},_a.prototype.start=function(){this.a=this.c,Ea(this,!0)},_a.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ta.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Aa(this)}},Ta.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Et(new y("user-token-expired")):t||!this.b||Vc()>Aa(this)-3e4?this.a?ka(this,{grant_type:"refresh_token",refresh_token:this.a}):It(null):It({accessToken:this.b.toString(),refreshToken:this.a})},Oa.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},v(La,se),La.prototype.wa=function(t){this.pa=t,Fi(this.a,t)},La.prototype.ka=function(){return this.pa},La.prototype.Ga=function(){return x(this.X)},La.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Cn(La.prototype,"providerId","firebase"),Oc=La.prototype,Oc.reload=function(){var t=this;return cu(this,Ka(this).then(function(){return Za(t).then(function(){return Ga(t)}).then(Wa)}))},Oc.nc=function(t){return this.I(t).then(function(t){return new ua(t)})},Oc.I=function(t){var e=this;return cu(this,Ka(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new y("internal-error");return t.accessToken!=e.ya&&(qa(e,t.accessToken),e.dispatchEvent(new ga("tokenChanged"))),Qa(e,"refreshToken",t.refreshToken),t.accessToken}))},Oc.Jc=function(t){if(!(t=t.users)||!t.length)throw new y("internal-error");t=t[0],Ha(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=nu(t),n=0;n<e.length;n++)Ya(this,e[n]);Qa(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ga("userReloaded",{gd:t}))},Oc.Kc=function(t){return Dn("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},Oc.sb=function(t){var e=this,n=null;return cu(this,t.c(this.a,this.uid).then(function(t){return tu(e,t),n=iu(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},Oc.Bc=function(t){return Dn("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},Oc.pb=function(t){var e=this,n=null;return cu(this,ru(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=iu(e,t,"link"),ou(e,t)}).then(function(){return n}))},Oc.Cc=function(t,e){var n=this;return cu(this,ru(this,"phone").then(function(){return aa(ja(n),t,e,p(n.pb,n))}))},Oc.Lc=function(t,e){var n=this;return cu(this,It().then(function(){return aa(ja(n),t,e,p(n.sb,n))}),!0)},Oc.Ab=function(t){var e=this;return cu(this,this.I().then(function(n){return e.a.Ab(n,t)}).then(function(t){return tu(e,t),e.reload()}))},Oc.dd=function(t){var e=this;return cu(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return tu(e,t),e.reload()}))},Oc.Bb=function(t){var e=this;return cu(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return tu(e,t),e.reload()}))},Oc.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ka(this);var e=this;return cu(this,this.I().then(function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return tu(e,t),Qa(e,"displayName",t.displayName||null),Qa(e,"photoURL",t.photoUrl||null),Kc(e.providerData,function(t){"password"===t.providerId&&(Cn(t,"displayName",e.displayName),Cn(t,"photoURL",e.photoURL))}),Ga(e)}).then(Wa))},Oc.bd=function(t){var e=this;return cu(this,Za(this).then(function(n){return D(Xa(e),t)?io(e.a,n,[t]).then(function(t){var n={};return Kc(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),Kc(Xa(e),function(t){n[t]||Ja(e,t)}),n[Pr.PROVIDER_ID]||Cn(e,"phoneNumber",null),Ga(e)}):Ga(e).then(function(){throw new y("no-such-provider")})}))},Oc.delete=function(){var t=this;return cu(this,this.I().then(function(e){return lo(t.a,Pl,{idToken:e})}).then(function(){t.dispatchEvent(new ga("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Ra(t,null),xa(t,null),Ma(t,null),t.G=[],t.A=!0,Fa(t),Cn(t,"refreshToken",null),t.i&&Bs(t.i,t)})},Oc.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},Oc.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},Oc.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?p(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?p(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?p(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?p(this.Kb,this):null},Oc.Dc=function(t){var e=this;return su(this,"linkViaPopup",t,function(){return ru(e,t.providerId).then(function(){return Ga(e)})},!1)},Oc.Mc=function(t){return su(this,"reauthViaPopup",t,function(){return It()},!0)},Oc.Ec=function(t){var e=this;return au(this,"linkViaRedirect",t,function(){return ru(e,t.providerId)},!1)},Oc.Nc=function(t){return au(this,"reauthViaRedirect",t,function(){return It()},!0)},Oc.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then(function(n){return co(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=iu(i,t,"link"),ou(i,t)}).then(function(){return o}),cu(this,n)},Oc.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return cu(this,It().then(function(){return cr(ho(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=iu(i,t,"reauthenticate"),tu(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},Oc.tb=function(t){var e=this,n=null;return cu(this,this.I().then(function(e){return n=e,void 0===t||V(t)?{}:zn(new Gn(t))}).then(function(t){return e.a.tb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},Oc.Db=function(t,e){var n=this,r=null;return cu(this,this.I().then(function(t){return r=t,void 0===e||V(e)?{}:zn(new Gn(e))}).then(function(e){return n.a.Db(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},Oc.ic=function(t){var e=null,n=this;return t=cr(It(t),n.uid).then(function(t){return e=iu(n,t,"reauthenticate"),tu(n,t),n.f=null,n.reload()}).then(function(){return e}),cu(this,t,!0)},Oc.toJSON=function(){return this.w()},Oc.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&q(t,this.metadata.w()),Kc(this.providerData,function(e){t.providerData.push(xn(e))}),q(t,this.N.w()),t};var Up={name:"redirectUser",D:"session"};gu.prototype.g=function(){var t=this,e=wu("local");Au(this,function(){return It().then(function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null}).then(function(n){if(n)return mu(t,"local").then(function(){t.c=e})})})};var Vp={name:"persistence",D:"session"};gu.prototype.wb=function(t){var e=null,n=this;return as(t),Au(this,function(){return t!=n.c.D?n.b.get(n.c,n.a).then(function(r){return e=r,mu(n,t)}).then(function(){if(n.c=wu(t),e)return n.b.set(n.c,e,n.a)}):It()})},v(Su,se),v(Nu,qt),v(ku,qt),v(Ou,qt),Oc=Su.prototype,Oc.wb=function(t){return t=this.l.wb(t),Wu(this,t)},Oc.wa=function(t){this.aa===t||this.m||(this.aa=t,Fi(this.a,this.aa),this.dispatchEvent(new Nu(this.ka())))},Oc.ka=function(){return this.aa},Oc.ed=function(){var t=xc.navigator;this.wa(t?t.languages&&t.languages[0]||t.language||t.userLanguage||null:null)},Oc.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new y("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Du(),this.f={url:t},this.settings.hb=!0,qi(this.a,this.f),this.dispatchEvent(new ku(this.f))}},Oc.Fc=function(t){this.N.push(t),Gi(this.a,Dc.SDK_VERSION?un(Dc.SDK_VERSION,this.N):null),this.dispatchEvent(new Ou(this.N))},Oc.Ga=function(){return x(this.N)},Oc.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},Oc.S=function(){return this.W},Oc.toJSON=function(){return{apiKey:qu(this).options.apiKey,authDomain:qu(this).options.authDomain,appName:qu(this).name,currentUser:Bu(this)&&Bu(this).w()}},Oc.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},Oc.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},Oc.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?p(this.hc,this):null},Oc.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return Fu(i,uo(i.a,o))})},Oc.Wc=function(t){if(!ln())return Et(new y("operation-not-supported-in-this-environment"));var e=this,n=$n(t.providerId),r=bn(),i=null;(!vn()||en())&&qu(this).options.authDomain&&t.isOAuthProvider&&(i=ko(qu(this).options.authDomain,qu(this).options.apiKey,qu(this).name,"signInViaPopup",t,null,r,Dc.SDK_VERSION||null,null,null,this.S(),this.f));var o=Je(i,n&&n.ua,n&&n.ta);return n=Lu(this).then(function(n){return Gs(n,o,"signInViaPopup",t,r,!!i,e.S())}).then(function(){return new bt(function(t,n){e.ma("signInViaPopup",null,new y("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=r,e.c=Ws(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&Ye(o),t?Rn(t):null}).s(function(t){throw o&&Ye(o),t}),Wu(this,n)},Oc.Xc=function(t){if(!ln())return Et(new y("operation-not-supported-in-this-environment"));var e=this;return Wu(this,Lu(this).then(function(){return _u(e.l)}).then(function(){return Hs(e.b,"signInViaRedirect",t,void 0,e.S())}))},Oc.qa=function(){var t=this;return xu(this).then(function(e){return t.b&&Qs(t.b.b),e}).s(function(e){throw t.b&&Qs(t.b.b),e})},Oc.cd=function(t){if(!t)return Et(new y("null-user"));if(this.W!=t.tenantId)return Et(new y("tenant-id-mismatch"));var e=this,n={};n.apiKey=qu(this).options.apiKey,n.authDomain=qu(this).options.authDomain,n.appName=qu(this).name;var r=pu(t,n,e.G,e.Ga());return Wu(this,this.i.then(function(){if(qu(e).options.apiKey!=t.l)return r.reload()}).then(function(){return Bu(e)&&t.uid==Bu(e).uid?($a(Bu(e),t),e.da(t)):(Mu(e,r),za(r),e.da(r))}).then(function(){zu(e)}))},Oc.zb=function(){var t=this;return Wu(this,this.i.then(function(){return t.b&&Qs(t.b.b),Bu(t)?(Mu(t,null),Eu(t.l).then(function(){zu(t)})):It()}))},Oc.Yc=function(){var t=this;return Tu(this.l,qu(this).options.authDomain).then(function(e){if(!t.m){var n;if(n=Bu(t)&&e){n=Bu(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return $a(Bu(t),e),Bu(t).I();(Bu(t)||e)&&(Mu(t,e),e&&(za(e),e.ha=t.G),t.b&&qs(t.b,t),zu(t))}})},Oc.da=function(t){return Iu(this.l,t)},Oc.kc=function(){zu(this),this.da(Bu(this))},Oc.vc=function(){this.zb()},Oc.wc=function(){this.zb()},Oc.jc=function(t){var e=this;return this.i.then(function(){return Fu(e,It(t))})},Oc.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Bu(e))})},Oc.zc=function(t){var e=this;Hu(this,function(){t.next(Bu(e))})},Oc.Hc=function(t,n,r){var i=this;return this.ba&&e.resolve().then(function(){"function"==typeof t?t(Bu(i)):"function"==typeof t.next&&t.next(Bu(i))}),this.ac(t,n,r)},Oc.Gc=function(t,n,r){var i=this;return this.ba&&e.resolve().then(function(){i.X=i.getUid(),"function"==typeof t?t(Bu(i)):"function"==typeof t.next&&t.next(Bu(i))}),this.bc(t,n,r)},Oc.mc=function(t){var e=this;return Wu(this,this.i.then(function(){return Bu(e)?Bu(e).I(t).then(function(t){return{accessToken:t}}):null}))},Oc.Sc=function(t){var e=this;return this.i.then(function(){return Fu(e,lo(e.a,ip,{token:t}))}).then(function(t){var n=t.user;return Qa(n,"isAnonymous",!1),e.da(n),t})},Oc.Tc=function(t,e){var n=this;return this.i.then(function(){return Fu(n,lo(n.a,op,{email:t,password:e}))})},Oc.dc=function(t,e){var n=this;return this.i.then(function(){return Fu(n,lo(n.a,Rl,{email:t,password:e}))})},Oc.Za=function(t){var e=this;return this.i.then(function(){return Fu(e,t.ja(e.a))})},Oc.Rc=function(t){return Dn("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},Oc.yb=function(){var t=this;return this.i.then(function(){var e=Bu(t);if(e&&e.isAnonymous){return Rn({user:e,credential:null,additionalUserInfo:Rn({providerId:null,isNewUser:!1}),operationType:"signIn"})}return Fu(t,t.a.yb()).then(function(e){var n=e.user;return Qa(n,"isAnonymous",!0),t.da(n),e})})},Oc.getUid=function(){return Bu(this)&&Bu(this).uid||null},Oc.cc=function(t){this.addAuthTokenListener(t),0<++this.A&&Bu(this)&&Va(Bu(this))},Oc.Oc=function(t){var e=this;Kc(this.u,function(n){n==t&&e.A--}),0>this.A&&(this.A=0),0==this.A&&Bu(this)&&Fa(Bu(this)),this.removeAuthTokenListener(t)},Oc.addAuthTokenListener=function(t){var e=this;this.u.push(t),Wu(this,this.i.then(function(){e.m||D(e.u,t)&&t(Gu(e))}))},Oc.removeAuthTokenListener=function(t){L(this.u,function(e){return e==t})},Oc.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l,t.b.removeListener(wu("local"),t.a,this.pa)),this.b&&(Bs(this.b,this),Qs(this.b.b)),e.resolve()},Oc.gc=function(t){return Wu(this,Ji(this.a,t))},Oc.Ac=function(t){return!!Cr(t)},Oc.vb=function(t,e){var n=this;return Wu(this,It().then(function(){var t=new Gn(e);if(!t.c)throw new y("argument-error",Hf+" must be true when sending sign in link to email");return zn(t)}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},Oc.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},Oc.mb=function(t,e){return Wu(this,this.a.mb(t,e).then(function(){}))},Oc.Qa=function(t){return Wu(this,this.a.Qa(t).then(function(t){return new Fn(t)}))},Oc.ib=function(t){return Wu(this,this.a.ib(t).then(function(){}))},Oc.ub=function(t,e){var n=this;return Wu(this,It().then(function(){return void 0===e||V(e)?{}:zn(new Gn(e))}).then(function(e){return n.a.ub(t,e)}).then(function(){}))},Oc.Vc=function(t,e){return Wu(this,aa(this,t,e,p(this.Za,this)))},Oc.Uc=function(t,e){var n=this;return Wu(this,It().then(function(){var r=e||ze(),i=Dr(t,r);if(!(r=Cr(r)))throw new y("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new y("tenant-id-mismatch");return n.Za(i)}))},Ku.prototype.render=function(){},Ku.prototype.reset=function(){},Ku.prototype.getResponse=function(){},Ku.prototype.execute=function(){};var Fp=null;Xu.prototype.render=function(t,e){return this.a[this.b.toString()]=new Qu(t,e),this.b++},Xu.prototype.reset=function(t){var e=Yu(this,t);t=Ju(t),e&&t&&(e.delete(),delete this.a[t])},Xu.prototype.getResponse=function(t){return(t=Yu(this,t))?t.getResponse():null},Xu.prototype.execute=function(t){(t=Yu(this,t))&&t.execute()},Qu.prototype.getResponse=function(){return $u(this),this.b},Qu.prototype.execute=function(){$u(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=sn();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},Qu.prototype.delete=function(){$u(this),this.g=!0,clearTimeout(this.a),this.a=null,$t(this.f,"click",this.i)},Cn(Zu,"FACTOR_ID","phone"),tc.prototype.g=function(){return Fp||(Fp=new Xu),It(Fp)},tc.prototype.c=function(){};var qp=null,Bp=new G(ch,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Gp=new In(3e4,6e4);ec.prototype.g=function(t){var e=this;return new bt(function(n,r){var i=setTimeout(function(){r(new y("network-request-failed"))},Gp.get());if(!xc.grecaptcha||t!==e.f&&!e.b){xc[e.a]=function(){if(xc.grecaptcha){e.f=t;var o=xc.grecaptcha.render;xc.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(xc.grecaptcha)}else clearTimeout(i),r(new y("internal-error"));delete xc[e.a]};It(Ri(K(Bp,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new y("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(i),n(xc.grecaptcha)})},ec.prototype.c=function(){this.b--};var zp=null,Hp="callback",Wp="expired-callback",Kp="sitekey",Xp="size";Oc=nc.prototype,Oc.Ia=function(){var t=this;return this.f?this.f:this.f=oc(this,It().then(function(){if(pn()&&!nn())return $e();throw new y("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.v.g(t.u())}).then(function(e){return t.g=e,lo(t.o,Kl,{})}).then(function(e){t.a[Kp]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},Oc.render=function(){sc(this);var t=this;return oc(this,this.Ia().then(function(){if(null===t.c){var e=t.m;if(!t.i){var n=ut(e);e=ht("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},Oc.verify=function(){sc(this);var t=this;return oc(this,this.render().then(function(e){return new bt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(ic(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},Oc.reset=function(){sc(this),null!==this.c&&this.g.reset(this.c)},Oc.clear=function(){sc(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ut(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},v(ac,nc);var Yp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");Tc(Su.prototype,{ib:{name:"applyActionCode",j:[cc("code")]},Qa:{name:"checkActionCode",j:[cc("code")]},mb:{name:"confirmPasswordReset",j:[cc("code"),cc("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[cc("email"),cc("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[cc("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[cc("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Ec(fc(),lc(),"nextOrObserver"),lc("opt_error",!0),lc("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Ec(fc(),lc(),"nextOrObserver"),lc("opt_error",!0),lc("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[cc("email"),Ec(fc("opt_actionCodeSettings",!0),pc(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[cc("email"),fc("actionCodeSettings")]},wb:{name:"setPersistence",j:[cc("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[gc()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[gc()]},Sc:{name:"signInWithCustomToken",j:[cc("token")]},Tc:{name:"signInWithEmailAndPassword",j:[cc("email"),cc("password")]},Uc:{name:"signInWithEmailLink",j:[cc("email"),cc("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[cc("phoneNumber"),Ic()]},Wc:{name:"signInWithPopup",j:[bc()]},Xc:{name:"signInWithRedirect",j:[bc()]},cd:{name:"updateCurrentUser",j:[Ec(function(t){return{name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof La)}}}(),pc(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[cc(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[cc("url")]},hd:{name:"verifyPasswordResetCode",j:[cc("code")]}}),Ac(Su.prototype,{lc:{name:"languageCode",jb:Ec(cc(),pc(),"languageCode")},ti:{name:"tenantId",jb:Ec(cc(),pc(),"tenantId")}}),Su.Persistence=Ip,Su.Persistence.LOCAL="local",Su.Persistence.SESSION="session",Su.Persistence.NONE="none",Tc(La.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[hc("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[hc("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[gc()]},pb:{name:"linkWithCredential",j:[gc()]},Cc:{name:"linkWithPhoneNumber",j:[cc("phoneNumber"),Ic()]},Dc:{name:"linkWithPopup",j:[bc()]},Ec:{name:"linkWithRedirect",j:[bc()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[gc()]},sb:{name:"reauthenticateWithCredential",j:[gc()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[cc("phoneNumber"),Ic()]},Mc:{name:"reauthenticateWithPopup",j:[bc()]},Nc:{name:"reauthenticateWithRedirect",j:[bc()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Ec(fc("opt_actionCodeSettings",!0),pc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[cc(null,!0)]},bd:{name:"unlink",j:[cc("provider")]},Ab:{name:"updateEmail",j:[cc("email")]},Bb:{name:"updatePassword",j:[cc("password")]},dd:{name:"updatePhoneNumber",j:[gc("phone")]},Cb:{name:"updateProfile",j:[fc("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[cc("email"),Ec(fc("opt_actionCodeSettings",!0),pc(null,!0),"opt_actionCodeSettings",!0)]}}),Tc(Xu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Tc(Ku.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Tc(bt.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Ac(oa.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:hc("appVerificationDisabledForTesting")}}),Tc(sa.prototype,{confirm:{name:"confirm",j:[cc("verificationCode")]}}),Sc(ur,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vr,kr,Rr,lr],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Ec(cc(),fc(),"json")]),Sc(Or,"credential",function(t,e){return new Nr(t,e)},[cc("email"),cc("password")]),Tc(Nr.prototype,{w:{name:"toJSON",j:[cc(null,!0)]}}),Tc(br.prototype,{Ca:{name:"addScope",j:[cc("scope")]},Ka:{name:"setCustomParameters",j:[fc("customOAuthParameters")]}}),Sc(br,"credential",wr,[Ec(cc(),fc(),"token")]),Sc(Or,"credentialWithLink",Dr,[cc("email"),cc("emailLink")]),Tc(_r.prototype,{Ca:{name:"addScope",j:[cc("scope")]},Ka:{name:"setCustomParameters",j:[fc("customOAuthParameters")]}}),Sc(_r,"credential",Ir,[Ec(cc(),fc(),"token")]),Tc(Er.prototype,{Ca:{name:"addScope",j:[cc("scope")]},Ka:{name:"setCustomParameters",j:[fc("customOAuthParameters")]}}),Sc(Er,"credential",Tr,[Ec(cc(),Ec(fc(),pc()),"idToken"),Ec(cc(),pc(),"accessToken",!0)]),Tc(Ar.prototype,{Ka:{name:"setCustomParameters",j:[fc("customOAuthParameters")]}}),Sc(Ar,"credential",Sr,[Ec(cc(),fc(),"token"),cc("secret",!0)]),Tc(mr.prototype,{Ca:{name:"addScope",j:[cc("scope")]},credential:{name:"credential",j:[Ec(cc(),Ec(fc(),pc()),"optionsOrIdToken"),Ec(cc(),pc(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[fc("customOAuthParameters")]}}),Tc(pr.prototype,{w:{name:"toJSON",j:[cc(null,!0)]}}),Tc(hr.prototype,{w:{name:"toJSON",j:[cc(null,!0)]}}),Sc(Pr,"credential",Mr,[cc("verificationId"),cc("verificationCode")]),Tc(Pr.prototype,{eb:{name:"verifyPhoneNumber",j:[Ec(cc(),function(t,e){return{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?wc(t.session,il)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?wc(t.session,ol)&&_c(t.multiFactorHint):t.session&&t.multiFactorUid?wc(t.session,ol)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Ic()]}}),Tc(Lr.prototype,{w:{name:"toJSON",j:[cc(null,!0)]}}),Tc(y.prototype,{toJSON:{name:"toJSON",j:[cc(null,!0)]}}),Tc(zr.prototype,{toJSON:{name:"toJSON",j:[cc(null,!0)]}}),Tc(Gr.prototype,{toJSON:{name:"toJSON",j:[cc(null,!0)]}}),Tc(ha.prototype,{toJSON:{name:"toJSON",j:[cc(null,!0)]}}),Tc(ca.prototype,{Qc:{name:"resolveSignIn",j:[mc()]}}),Tc(ma.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[mc(),cc("displayName",!0)]},ad:{name:"unenroll",j:[Ec({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:_c},cc(),"multiFactorInfoIdentifier")]}}),Tc(ac.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Sc(qn,"parseLink",Bn,[cc("link")]),Sc(Zu,"assertion",function(t){return new ya(t)},[gc("phone")]),function(){if(void 0===Dc||!Dc.INTERNAL||!Dc.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Tf,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Ef,VERIFY_AND_CHANGE_EMAIL:Af,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Su,AuthCredential:ur,Error:y};Sc(t,"EmailAuthProvider",Or,[]),Sc(t,"FacebookAuthProvider",br,[]),Sc(t,"GithubAuthProvider",_r,[]),Sc(t,"GoogleAuthProvider",Er,[]),Sc(t,"TwitterAuthProvider",Ar,[]),Sc(t,"OAuthProvider",mr,[cc("providerId")]),Sc(t,"SAMLAuthProvider",gr,[cc("providerId")]),Sc(t,"PhoneAuthProvider",Pr,[vc()]),Sc(t,"RecaptchaVerifier",ac,[Ec(cc(),dc(),"recaptchaContainer"),fc("recaptchaParameters",!0),yc()]),Sc(t,"ActionCodeURL",qn,[]),Sc(t,"PhoneMultiFactorGenerator",Zu,[]),Dc.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Su(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Dc.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:p(t.getUid,t),getToken:p(t.mc,t),addAuthTokenListener:p(t.cc,t),removeAuthTokenListener:p(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Dc.registerVersion("@firebase/auth","0.15.0"),Dc.INTERNAL.extendNamespace({User:La})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,n(1),n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17);n.n(r)},function(t,e,n){"use strict";(function(t,r){/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function i(){return Ni.logLevel}function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=wi.LogLevel.DEBUG){var r=e.map(u);Ni.debug.apply(Ni,mi.__spreadArrays(["Firestore (7.24.0): "+t],r))}}function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=wi.LogLevel.ERROR){var r=e.map(u);Ni.error.apply(Ni,mi.__spreadArrays(["Firestore (7.24.0): "+t],r))}}function a(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=wi.LogLevel.WARN){var r=e.map(u);Ni.warn.apply(Ni,mi.__spreadArrays(["Firestore (7.24.0): "+t],r))}}function u(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+t;throw s(e),new Error(e)}function h(t,e){t||c()}function f(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function p(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function d(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(t,e){if(0!==e.length)throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+R(e.length,"argument")+".")}function y(t,e,n){if(e.length!==n)throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires "+R(n,"argument")+", but was called with "+R(e.length,"argument")+".")}function g(t,e,n){if(e.length<n)throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires at least "+R(n,"argument")+", but was called with "+R(e.length,"argument")+".")}function m(t,e,n,r){if(e.length<n||e.length>r)throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+R(e.length,"argument")+".")}function b(t,e,n,r){A(t,e,L(n)+" argument",r)}function w(t,e,n,r){void 0!==r&&b(t,e,n,r)}function _(t,e,n,r){A(t,e,n+" option",r)}function I(t,e,n,r){void 0!==r&&_(t,e,n,r)}function E(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(N(u))}var c=N(r);throw new Si(Ai.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function T(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Si(Ai.INVALID_ARGUMENT,"Invalid value "+N(r)+" provided to function "+t+"() for its "+L(n)+" argument. Acceptable values: "+e.join(", "));return r}function A(t,e,n,r){if(!("object"===e?S(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=N(r);throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function S(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function N(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":c()}function k(t,e,n){if(void 0===n)throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+L(e)+" argument, but it was undefined.")}function O(t,e,n){p(e,function(e,r){if(n.indexOf(e)<0)throw new Si(Ai.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function D(t,e,n,r){var i=N(r);return new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires its "+L(n)+" argument to be a "+e+", but it was: "+i)}function C(t,e,n){if(n<=0)throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires its "+L(e)+" argument to be a positive number, but it was: "+n+".")}function L(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function R(t,e){return t+" "+e+(1===t?"":"s")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function x(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function P(t,e){return t<e?-1:t>e?1:0}function M(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function j(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function U(){if("undefined"==typeof Uint8Array)throw new Si(Ai.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function V(){if("undefined"==typeof atob)throw new Si(Ai.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function F(t){return null==t}function q(t){return 0===t&&1/t==-1/0}function B(t){return"number"==typeof t&&Number.isInteger(t)&&!q(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function G(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new zi(t,e,n,r,i,o,s)}function z(t){var e=f(t);if(null===e.tt){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.R()+t.op.toString()+ht(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return(e=t).field.R()+e.dir;var e}).join(","),F(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=xe(e.startAt)),e.endAt&&(n+="|ub:",n+=xe(e.endAt)),e.tt=n}return e.tt}function H(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!st(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Me(t.startAt,e.startAt)&&Me(t.endAt,e.endAt)}function W(t){return Li.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function K(t){switch(t){case Ai.OK:return c();case Ai.CANCELLED:case Ai.UNKNOWN:case Ai.DEADLINE_EXCEEDED:case Ai.RESOURCE_EXHAUSTED:case Ai.INTERNAL:case Ai.UNAVAILABLE:case Ai.UNAUTHENTICATED:return!1;case Ai.INVALID_ARGUMENT:case Ai.NOT_FOUND:case Ai.ALREADY_EXISTS:case Ai.PERMISSION_DENIED:case Ai.FAILED_PRECONDITION:case Ai.ABORTED:case Ai.OUT_OF_RANGE:case Ai.UNIMPLEMENTED:case Ai.DATA_LOSS:return!0;default:return c()}}function X(t){if(void 0===t)return s("GRPC error has no .code"),Ai.UNKNOWN;switch(t){case Pi.OK:return Ai.OK;case Pi.CANCELLED:return Ai.CANCELLED;case Pi.UNKNOWN:return Ai.UNKNOWN;case Pi.DEADLINE_EXCEEDED:return Ai.DEADLINE_EXCEEDED;case Pi.RESOURCE_EXHAUSTED:return Ai.RESOURCE_EXHAUSTED;case Pi.INTERNAL:return Ai.INTERNAL;case Pi.UNAVAILABLE:return Ai.UNAVAILABLE;case Pi.UNAUTHENTICATED:return Ai.UNAUTHENTICATED;case Pi.INVALID_ARGUMENT:return Ai.INVALID_ARGUMENT;case Pi.NOT_FOUND:return Ai.NOT_FOUND;case Pi.ALREADY_EXISTS:return Ai.ALREADY_EXISTS;case Pi.PERMISSION_DENIED:return Ai.PERMISSION_DENIED;case Pi.FAILED_PRECONDITION:return Ai.FAILED_PRECONDITION;case Pi.ABORTED:return Ai.ABORTED;case Pi.OUT_OF_RANGE:return Ai.OUT_OF_RANGE;case Pi.UNIMPLEMENTED:return Ai.UNIMPLEMENTED;case Pi.DATA_LOSS:return Ai.DATA_LOSS;default:return c()}}function Y(){return $i}function J(){return Y()}function Q(){return Zi}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=eo,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function Z(){return no}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tt(){return new Ki(Li.i)}function et(){return new Ki(Li.i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rt(t){var e=t.mapValue.fields.__previous_value__;return nt(e)?rt(e):e}function it(t){var e=lt(t.mapValue.fields.__local_write_time__.timestampValue);return new Bi(e.seconds,e.nanos)}function ot(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nt(t)?4:10:c()}function st(t,e){var n=ot(t);if(n!==ot(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return it(t).isEqual(it(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=lt(t.timestampValue),r=lt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return dt(t.bytesValue).isEqual(dt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return pt(t.geoPointValue.latitude)===pt(e.geoPointValue.latitude)&&pt(t.geoPointValue.longitude)===pt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return pt(t.integerValue)===pt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=pt(t.doubleValue),r=pt(e.doubleValue);return n===r?q(n)===q(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return M(t.arrayValue.values||[],e.arrayValue.values||[],st);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(l(n)!==l(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!st(n[i],r[i])))return!1;return!0}(t,e);default:return c()}}function at(t,e){return void 0!==(t.values||[]).find(function(t){return st(t,e)})}function ut(t,e){var n=ot(t),r=ot(e);if(n!==r)return P(n,r);switch(n){case 0:return 0;case 1:return P(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=pt(t.integerValue||t.doubleValue),r=pt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ct(t.timestampValue,e.timestampValue);case 4:return ct(it(t),it(e));case 5:return P(t.stringValue,e.stringValue);case 6:return function(t,e){var n=dt(t),r=dt(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return P(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=P(pt(t.latitude),pt(e.latitude));return 0!==n?n:P(pt(t.longitude),pt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ut(n[i],r[i]);if(o)return o}return P(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=P(r[s],o[s]);if(0!==a)return a;var u=ut(n[r[s]],i[o[s]]);if(0!==u)return u}return P(r.length,o.length)}(t.mapValue,e.mapValue);default:throw c()}}function ct(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return P(t,e);var n=lt(t),r=lt(e),i=P(n.seconds,r.seconds);return 0!==i?i:P(n.nanos,r.nanos)}function ht(t){return ft(t)}function ft(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=lt(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?dt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Li.C(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ft(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ft(t.fields[o])}return e+"}"}(t.mapValue):c();var e,n}function lt(t){if(h(!!t),"string"==typeof t){var e=0,n=po.exec(t);if(h(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function dt(t){return"string"==typeof t?xi.fromBase64String(t):xi.fromUint8Array(t)}function vt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function yt(t){return!!t&&"integerValue"in t}function gt(t){return!!t&&"arrayValue"in t}function mt(t){return!!t&&"nullValue"in t}function bt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wt(t){return!!t&&"mapValue"in t}function _t(t){return{integerValue:""+t}}function It(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(e)?"-0":e}}function Et(t,e){return B(e)?_t(e):It(t,e)}function Tt(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function At(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function St(t,e){return Tt(t,e.Z())}function Nt(t){return h(!!t),Gi.J(function(t){var e=lt(t);return new Bi(e.seconds,e.nanos)}(t))}function kt(t,e){return function(t){return new Oi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Ot(t){var e=Oi.g(t);return h($t(e)),e}function Dt(t,e){return kt(t.U,e.path)}function Ct(t,e){var n=Ot(e);return h(n.get(1)===t.U.projectId),h(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new Li(Pt(n))}function Lt(t,e){return kt(t.U,e)}function Rt(t){var e=Ot(t);return 4===e.length?Oi.P():Pt(e)}function xt(t){return new Oi(["projects",t.U.projectId,"databases",t.U.database]).R()}function Pt(t){return h(t.length>4&&"documents"===t.get(4)),t.u(5)}function Mt(t,e,n){return{name:Dt(t,e),fields:n.proto.mapValue.fields}}function jt(t,e){var n;if(e instanceof ko)n={update:Mt(t,e.key,e.value)};else if(e instanceof Co)n={delete:Dt(t,e.key)};else if(e instanceof Oo)n={update:Mt(t,e.key,e.data),updateMask:Qt(e.We)};else if(e instanceof Do)n={transform:{document:Dt(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof bo)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof wo)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof _o)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof Io)return{fieldPath:e.field.R(),increment:n.je};throw c()}(0,t)})}};else{if(!(e instanceof Lo))return c();n={verify:Dt(t,e.key)}}return e.Ge.Ke||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:St(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:c()}(t,e.Ge)),n}function Ut(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?So.updateTime(Nt(t.updateTime)):void 0!==t.exists?So.exists(t.exists):So.ze()}(e.currentDocument):So.ze();if(e.update){e.update.name;var r=Ct(t,e.update.name),i=new Ro({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Eo(e.map(function(t){return Ci.S(t)}))}(e.updateMask);return new Oo(r,i,o,n)}return new ko(r,i,n)}if(e.delete){var s=Ct(t,e.delete);return new Co(s,n)}if(e.transform){var a=Ct(t,e.transform.document),u=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;if("setToServerValue"in e)h("REQUEST_TIME"===e.setToServerValue),n=new bo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new wo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new _o(i)}else"increment"in e?n=new Io(t,e.increment):c();var o=Ci.S(e.fieldPath);return new To(o,n)}(t,e)});return h(!0===n.exists),new Do(a,u)}if(e.verify){var f=Ct(t,e.verify);return new Lo(f,n)}return c()}function Vt(t,e){return{documents:[Lt(t,e.path)]}}function Ft(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Lt(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Lt(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(bt(t.value))return{unaryFilter:{field:Kt(t.field),op:"IS_NAN"}};if(mt(t.value))return{unaryFilter:{field:Kt(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(bt(t.value))return{unaryFilter:{field:Kt(t.field),op:"IS_NOT_NAN"}};if(mt(t.value))return{unaryFilter:{field:Kt(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kt(t.field),op:Wt(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Kt(t.field),direction:Ht(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Qe||F(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Gt(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gt(e.endAt)),n}function qt(t){var e=Rt(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){h(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Bt(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Yo(Xt(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return F(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=zt(n.startAt));var f=null;return n.endAt&&(f=zt(n.endAt)),Te(ye(e,i,a,s,u,"F",c,f))}function Bt(t){return t?void 0!==t.unaryFilter?[Jt(t)]:void 0!==t.fieldFilter?[Yt(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Bt(t)}).reduce(function(t,e){return t.concat(e)}):c():[]}function Gt(t){return{before:t.before,values:t.position}}function zt(t){var e=!!t.before,n=t.values||[];return new Xo(n,e)}function Ht(t){return vo[t]}function Wt(t){return yo[t]}function Kt(t){return{fieldPath:t.R()}}function Xt(t){return Ci.S(t.fieldPath)}function Yt(t){return Fo.create(Xt(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return c()}}(t.fieldFilter.op),t.fieldFilter.value)}function Jt(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xt(t.unaryFilter.field);return Fo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xt(t.unaryFilter.field);return Fo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xt(t.unaryFilter.field);return Fo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xt(t.unaryFilter.field);return Fo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return c()}}function Qt(t){var e=[];return t.fields.forEach(function(t){return e.push(t.R())}),{fieldPaths:e}}function $t(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Zt(t,e,n){return t instanceof bo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof wo?ne(t,e):t instanceof _o?re(t,e):function(t,e){var n=ee(t,e),r=ie(n)+ie(t.je);return yt(n)&&yt(t.je)?_t(r):It(t.serializer,r)}(t,e)}function te(t,e,n){return t instanceof wo?ne(t,e):t instanceof _o?re(t,e):n}function ee(t,e){return t instanceof Io?yt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}function ne(t,e){for(var n=oe(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some(function(e){return st(e,t)})||n.push(t)}(i[r]);return{arrayValue:{values:n}}}function re(t,e){for(var n=oe(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter(function(e){return!st(e,t)})}(i[r]);return{arrayValue:{values:n}}}function ie(t){return pt(t.integerValue||t.doubleValue)}function oe(t){return gt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function se(t,e){return void 0!==t.updateTime?e instanceof Mo&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Mo}function ae(t,e,n){return t instanceof ko?function(t,e,n){return new Mo(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Oo?function(t,e,n){if(!se(t.Ge,e))return new Uo(t.key,n.version);var r=le(t,e);return new Mo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Do?function(t,e,n){if(h(null!=n.transformResults),!se(t.Ge,e))return new Uo(t.key,n.version);var r=pe(t,e),i=function(t,e,n){var r=[];h(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Mo&&(a=e.field(o.field)),r.push(te(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=de(t,r.data(),i);return new Mo(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new jo(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ue(t,e,n,r){return t instanceof ko?function(t,e){if(!se(t.Ge,e))return e;var n=fe(e);return new Mo(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Oo?function(t,e){if(!se(t.Ge,e))return e;var n=fe(e),r=le(t,e);return new Mo(t.key,n,r,{Je:!0})}(t,e):t instanceof Do?function(t,e,n,r){if(!se(t.Ge,e))return e;var i=pe(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Mo&&(c=n.field(a.field)),null===c&&r instanceof Mo&&(c=r.field(a.field)),i.push(Zt(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=de(t,i.data(),o);return new Mo(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return se(t.Ge,e)?new jo(t.key,Gi.min()):e}(t,e)}function ce(t,e){return t instanceof Do?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Mo?e.field(o.field):void 0,a=ee(o.transform,s||null);null!=a&&(n=null==n?(new xo).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function he(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||M(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof wo&&e instanceof wo||t instanceof _o&&e instanceof _o?M(t.elements,e.elements,st):t instanceof Io&&e instanceof Io?st(t.je,e.je):t instanceof bo&&e instanceof bo}(t.transform,e.transform)}(t,e)}))}function fe(t){return t instanceof Mo?t.version:Gi.min()}function le(t,e){return function(t,e){var n=new xo(e);return t.We.fields.forEach(function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Xe()}(t,e instanceof Mo?e.data():Ro.empty())}function pe(t,e){return e}function de(t,e,n){for(var r=new xo(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}function ve(t){var e=[];return p(t.fields||{},function(t,n){var r=new Ci([t]);if(wt(n)){var i=ve(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)}),new Eo(e)}function ye(t,e,n,r,i,o,s,a){return new Vo(t,e,n,r,i,o,s,a)}function ge(t){return new Vo(t)}function me(t){return!F(t.limit)&&"F"===t.an}function be(t){return!F(t.limit)&&"L"===t.an}function we(t){return t.on.length>0?t.on[0].field:null}function _e(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function Ie(t){return null!==t.collectionGroup}function Ee(t){var e=f(t);if(null===e.cn){e.cn=[];var n=_e(e),r=we(e);if(null!==n&&null===r)n.p()||e.cn.push(new Yo(n)),e.cn.push(new Yo(Ci.v(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.cn.push(a),a.field.p()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new Yo(Ci.v(),u))}}}return e.cn}function Te(t){var e=f(t);if(!e.un)if("F"===e.an)e.un=G(e.path,e.collectionGroup,Ee(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ee(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Yo(o.field,s))}var a=e.endAt?new Xo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Xo(e.startAt.position,!e.startAt.before):null;e.un=G(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.un}function Ae(t,e,n){return new Vo(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Se(t,e){return new Vo(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Ne(t,e){return new Vo(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function ke(t,e){return H(Te(t),Te(e))&&t.an===e.an}function Oe(t){return z(Te(t))+"|lt:"+t.an}function De(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.R()+" "+e.op+" "+ht(e.value);var e}).join(", ")+"]"),F(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return(e=t).field.R()+" ("+e.dir+")";var e}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+xe(t.startAt)),t.endAt&&(e+=", endAt: "+xe(t.endAt)),"Target("+e+")"}(Te(t))+"; limitType="+t.an+")"}function Ce(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):Li.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Pe(t.startAt,Ee(t),e)||t.endAt&&Pe(t.endAt,Ee(t),e))}(t,e)}function Le(t){return function(e,n){for(var r=!1,i=0,o=Ee(t);i<o.length;i++){var s=o[i],a=je(s,e,n);if(0!==a)return a;r=r||s.field.p()}return 0}}function Re(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Li.C(t.referenceValue)})}function xe(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return ht(t)}).join(",")}function Pe(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.p()?Li.i(Li.C(s.referenceValue),n.key):ut(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Me(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!st(t.position[n],e.position[n]))return!1;return!0}function je(t,e,n){var r=t.field.p()?Li.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ut(r,i):c()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return c()}}function Ue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ve(t){return"IndexedDbTransactionError"===t.name}function Fe(t){return new $o(function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=qe(t.target.error);n(e)}})}function qe(t){var e=Zo.On(_i.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Si("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return is||(is=!0,setTimeout(function(){throw r},0)),r}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Be(){return"undefined"!=typeof window?window:null}function Ge(){return"undefined"!=typeof document?document:null}function ze(t,e){if(s("AsyncQueue",e+": "+t),Ve(t))return new Si(Ai.UNAVAILABLE,e+": "+t);throw t}function He(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return mi.__generator(this,function(c){switch(c.label){case 0:if(n=f(t),r=e.query,i=!1,(o=n.Bs.get(r))||(i=!0,o=new as),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Us(r)];case 2:return s.Ls=c.sent(),[3,4];case 3:return a=c.sent(),u=ze(a,"Initialization of query '"+De(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.Bs.set(r,o),o.listeners.push(e),e.Qs(n.onlineState),o.Ls&&e.Ws(o.Ls)&&Ye(n),[2]}})})}function We(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s;return mi.__generator(this,function(a){return n=f(t),r=e.query,i=!1,(o=n.Bs.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.Bs.delete(r),n.js(r))]:[2]})})}function Ke(t,e){for(var n=f(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.Bs.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Ws(s)&&(r=!0);u.Ls=s}}r&&Ye(n)}function Xe(t,e,n){var r=f(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function Ye(t){t.qs.forEach(function(t){t.next()})}function Je(t,e){return"firestore_clients_"+t+"_"+e}function Qe(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function $e(t,e){return"firestore_targets_"+t+"_"+e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ze(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=P(n,i);return 0===s?P(r,o):s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nn(e)),e=en(t.get(n),e);return nn(e)}function en(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function nn(t){return t+""}function rn(t){var e=t.length;if(h(e>=2),2===e)return h(""===t.charAt(0)&&""===t.charAt(1)),Oi.P();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&c(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:c()}o=s+2}return new Oi(r)}function on(t,e){if(e.document)return function(t,e,n){var r=Ct(t,e.name),i=Nt(e.updateTime),o=new Ro({mapValue:{fields:e.fields}});return new Mo(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Li.$(e.noDocument.path),r=hn(e.noDocument.readTime);return new jo(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Li.$(e.unknownDocument.path),o=hn(e.unknownDocument.version);return new Uo(i,o)}return c()}function sn(t,e,n){var r=an(n),i=e.key.path.h().A();if(e instanceof Mo){var o=function(t,e){return{name:Dt(t,e.key),fields:e.rn().mapValue.fields,updateTime:Tt(t,e.version.Z())}}(t.Co,e),s=e.hasCommittedMutations;return new Hs(null,null,o,s,r,i)}if(e instanceof jo){var a=e.key.path.A(),u=cn(e.version),h=e.hasCommittedMutations;return new Hs(null,new Gs(a,u),null,h,r,i)}if(e instanceof Uo){var f=e.key.path.A(),l=cn(e.version);return new Hs(new zs(f,l),null,null,!0,r,i)}return c()}function an(t){var e=t.Z();return[e.seconds,e.nanoseconds]}function un(t){var e=new Bi(t[0],t[1]);return Gi.J(e)}function cn(t){var e=t.Z();return new Us(e.seconds,e.nanoseconds)}function hn(t){var e=new Bi(t.seconds,t.nanoseconds);return Gi.J(e)}function fn(t,e){var n=(e.baseMutations||[]).map(function(e){return Ut(t.Co,e)}),r=e.mutations.map(function(e){return Ut(t.Co,e)}),i=Bi.fromMillis(e.localWriteTimeMs);return new bs(e.batchId,i,n,r)}function ln(t){var e,n,r=hn(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?hn(t.lastLimboFreeSnapshotVersion):Gi.min();return void 0!==t.query.documents?(h(1===(n=t.query).documents.length),e=Te(ge(Rt(n.documents[0])))):e=qt(t.query),new Hi(e,t.targetId,0,t.lastListenSequenceNumber,r,i,xi.fromBase64String(t.resumeToken))}function pn(t,e){var n,r=cn(e.nt),i=cn(e.lastLimboFreeSnapshotVersion);n=W(e.target)?Vt(t.Co,e.target):Ft(t.Co,e.target);var o=e.resumeToken.toBase64();return new Ks(e.targetId,z(e.target),r,o,e.sequenceNumber,i,n)}function dn(t,e,n){var r=Bs.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return gn(t).rs({range:o,ss:!0},function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()}).next(function(){return s})}function vn(t,e,n){var r=t.store(qs.store),i=t.store(Bs.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.rs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){h(1===a)}));for(var c=[],f=0,l=n.mutations;f<l.length;f++){var p=l[f],d=Bs.key(e,p.key.path,n.batchId);o.push(i.delete(d)),c.push(p.key)}return $o.$n(o).next(function(){return c})}function yn(t){return ia.Qn(t,qs.store)}function gn(t){return ia.Qn(t,Bs.store)}function mn(t){return ia.Qn(t,Fs.store)}function bn(t){return ia.Qn(t,Ws.store)}function wn(t){return ia.Qn(t,Hs.store)}function _n(t){return t.path.A()}function In(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw c();e=t.noDocument}return JSON.stringify(e).length}function En(t){t.createObjectStore(Xs.store,{keyPath:Xs.keyPath}).createIndex(Xs.documentTargetsIndex,Xs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ks.store,{keyPath:Ks.keyPath}).createIndex(Ks.queryTargetsIndexName,Ks.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ys.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Tn(t){return ia.Qn(t,Js.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function An(t){return ia.Qn(t,Ks.store)}function Sn(t){return ia.Qn(t,Ys.store)}function Nn(t){return ia.Qn(t,Xs.store)}function kn(t){return ia.Qn(t,Vs.store)}function On(t){return ia.Qn(t,Qs.store)}function Dn(t,e){return Nn(t).put(function(t,e){return new Xs(0,tn(t.path),e)}(e,t.xa))}function Cn(t,e){var n=t.projectId;return t.j||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function Ln(t,e){var n=f(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Dc.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=$o.resolve();return o.forEach(function(t){s=s.next(function(){return r.Rr(e,t)}).next(function(e){var o=e,s=n.dr.get(t);h(null!==s),(!o||o.version.L(s)<0)&&(o=i.cr(t,o,n))&&r.Er(o,n._r)})}),s.next(function(){return t.Sr.Wo(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Sr.zo(t)}).next(function(){return n.Cc.kr(t,r)})})}function Rn(t){var e=f(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ka.Ea(t)})}function xn(t,e){var n=f(t),r=e.nt,i=n.bc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.Dc.ra({oa:!0});i=n.bc;var a=[];e.zt.forEach(function(e,o){var s=i.get(o);if(s){a.push(n.Ka.Ca(t,e.se,o).next(function(){return n.Ka.Sa(t,e.ee,o)}));var u=e.resumeToken;if(u.O()>0){var c=s.it(u,r).st(t.xa);i=i.ot(o,c),function(t,e,n){return h(e.resumeToken.O()>0),0===t.resumeToken.O()||e.nt.X()-t.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(s,c,e)&&a.push(n.Ka.ya(t,c))}}});var u=Y(),c=$();if(e.Yt.forEach(function(t,e){c=c.add(t)}),a.push(s.getEntries(t,c).next(function(i){e.Yt.forEach(function(c,h){var f=i.get(c);h instanceof jo&&h.version.isEqual(Gi.min())?(s.Ar(c,r),u=u.ot(c,h)):null==f||h.version.L(f.version)>0||0===h.version.L(f.version)&&f.hasPendingWrites?(s.Er(h,r),u=u.ot(c,h)):o("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version),e.Jt.has(c)&&a.push(n.persistence.No.yc(t,c))})})),!r.isEqual(Gi.min())){var f=n.Ka.Ea(t).next(function(e){return n.Ka.Aa(t,t.xa,r)});a.push(f)}return $o.$n(a).next(function(){return s.apply(t)}).next(function(){return n.Cc.Mr(t,u)})}).then(function(t){return n.bc=i,t})}function Pn(t,e){var n=f(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)})}function Mn(t,e){var n=f(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ka.va(t,e).next(function(i){return i?(r=i,$o.resolve(r)):n.Ka.wa(t).next(function(i){return r=new Hi(e,i,0,t.xa),n.Ka.Ra(t,r).next(function(){return r})})})}).then(function(t){var r=n.bc.get(t.targetId);return(null===r||t.nt.L(r.nt)>0)&&(n.bc=n.bc.ot(t.targetId,t),n.vc.set(e,t.targetId)),t})}function jn(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,s,a;return mi.__generator(this,function(u){switch(u.label){case 0:r=f(t),i=r.bc.get(e),s=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.No.removeTarget(t,i)})];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Ve(a=u.sent()))throw a;return o("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.bc=r.bc.remove(e),r.vc.delete(i.target),[2]}})})}function Un(t,e,n){var r=f(t),i=Gi.min(),o=$();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=f(t),i=r.vc.get(n);return void 0!==i?$o.resolve(r.bc.get(i)):r.Ka.va(e,n)}(r,t,Te(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ka.Fa(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Vc.Lr(t,e,n?i:Gi.min(),n?o:$())}).next(function(t){return{documents:t,Fc:o}})})}function Vn(e,n){var r=f(e),i=f(r.Ka),o=r.bc.get(n);return o?t.resolve(o.target):r.persistence.runTransaction("Get target data","readonly",function(t){return i.Ue(t,n).next(function(t){return t?t.target:null})})}function Fn(t){var e=f(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=f(t),i=Y(),o=an(n),s=wn(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Hs.readTimeIndex,range:a},function(t,e){var n=on(r.serializer,e);i=i.ot(n.key,n),o=e.readTime}).next(function(){return{xc:i,readTime:un(o)}})}(e.Dc,t,e.Sc)}).then(function(t){var n=t.xc,r=t.readTime;return e.Sc=r,n})}function qn(t){return mi.__awaiter(this,void 0,void 0,function(){var e;return mi.__generator(this,function(n){return[2,(e=f(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=wn(t),n=Gi.min();return e.rs({index:Hs.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=un(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Sc=t})]})})}function Bn(t){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(e){if(t.code!==Ai.FAILED_PRECONDITION||t.message!==Is)throw t;return o("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Gn(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n;return mi.__generator(this,function(r){switch(r.label){case 0:if(!$n(t))return[3,4];e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function zn(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n;return mi.__generator(this,function(r){switch(r.label){case 0:e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Hn(t){return mi.__awaiter(this,void 0,void 0,function(){var e;return mi.__generator(this,function(n){switch(n.label){case 0:return e=f(t),o("RemoteStore","RemoteStore shutting down."),e.Yu.add(5),[4,zn(e)];case 1:return n.sent(),e.Xu.Di(),e.th.set("Unknown"),[2]}})})}function Wn(t,e){var n=f(t);n.Hu.has(e.targetId)||(n.Hu.set(e.targetId,e),Qn(n)?Jn(n):pr(n).uu()&&Xn(n,e))}function Kn(t,e){var n=f(t),r=pr(n);n.Hu.delete(e),r.uu()&&Yn(n,e),0===n.Hu.size&&(r.uu()?r._u():$n(n)&&n.th.set("Unknown"))}function Xn(t,e){t.eh.Ie(e.targetId),pr(t).Vu(e)}function Yn(t,e){t.eh.Ie(e),pr(t).pu(e)}function Jn(t){t.eh=new lo({qe:function(e){return t.Gu.qe(e)},Ue:function(e){return t.Hu.get(e)||null}}),pr(t).start(),t.th.Bu()}function Qn(t){return $n(t)&&!pr(t).cu()&&t.Hu.size>0}function $n(t){return 0===f(t).Yu.size}function Zn(t){t.eh=void 0}function tr(t){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(e){return t.Hu.forEach(function(e,n){Xn(t,e)}),[2]})})}function er(t,e){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(n){return Zn(t),Qn(t)?(t.th.Qu(e),Jn(t)):t.th.set("Unknown"),[2]})})}function nr(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,s;return mi.__generator(this,function(a){switch(a.label){case 0:if(t.th.set("Online"),!(e instanceof ho&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return mi.__generator(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Hu.has(o)?[4,t.Gu.nh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Hu.delete(o),t.eh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),o("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,rr(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof uo?t.eh.be(e):e instanceof co?t.eh.$e(e):t.eh.De(e),n.isEqual(Gi.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Rn(t.ju)];case 8:return i=a.sent(),n.L(i)>=0?[4,function(t,e){var n=t.eh.Oe(e);return n.zt.forEach(function(n,r){if(n.resumeToken.O()>0){var i=t.Hu.get(r);i&&t.Hu.set(r,i.it(n.resumeToken,e))}}),n.Ht.forEach(function(e){var n=t.Hu.get(e);if(n){t.Hu.set(e,n.it(xi.B,n.nt)),Yn(t,e);var r=new Hi(n.target,e,1,n.sequenceNumber);Xn(t,r)}}),t.Gu.sh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return o("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,rr(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function rr(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r=this;return mi.__generator(this,function(i){switch(i.label){case 0:if(!Ve(e))throw e;return t.Yu.add(1),[4,zn(t)];case 1:return i.sent(),t.th.set("Offline"),n||(n=function(){return Rn(t.ju)}),t.cs.Cs(function(){return mi.__awaiter(r,void 0,void 0,function(){return mi.__generator(this,function(e){switch(e.label){case 0:return o("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Yu.delete(1),[4,Gn(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function ir(t,e){return e().catch(function(n){return rr(t,n,e)})}function or(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return mi.__generator(this,function(s){switch(s.label){case 0:e=f(t),n=dr(e),r=e.zu.length>0?e.zu[e.zu.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return $n(t)&&t.zu.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Pn(e.ju,r)];case 3:return null===(i=s.sent())?(0===e.zu.length&&n._u(),[3,7]):(r=i.batchId,function(t,e){t.zu.push(e);var n=dr(t);n.uu()&&n.vu&&n.Su(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,rr(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return sr(e)&&ar(e),[2]}})})}function sr(t){return $n(t)&&!dr(t).cu()&&t.zu.length>0}function ar(t){dr(t).start()}function ur(t){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(e){return dr(t).Nu(),[2]})})}function cr(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return mi.__generator(this,function(o){for(e=dr(t),n=0,r=t.zu;n<r.length;n++)i=r[n],e.Su(i.mutations);return[2]})})}function hr(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i;return mi.__generator(this,function(o){switch(o.label){case 0:return r=t.zu.shift(),i=ws.from(r,e,n),[4,ir(t,function(){return t.Gu.ih(i)})];case 1:return o.sent(),[4,or(t)];case 2:return o.sent(),[2]}})})}function fr(t,e){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(n){switch(n.label){case 0:return e&&dr(t).vu?[4,function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r;return mi.__generator(this,function(i){switch(i.label){case 0:return K(r=e.code)&&r!==Ai.ABORTED?(n=t.zu.shift(),dr(t).lu(),[4,ir(t,function(){return t.Gu.rh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,or(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return sr(t)&&ar(t),[2]}})})}function lr(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r;return mi.__generator(this,function(i){switch(i.label){case 0:return n=f(t),e?(n.Yu.delete(2),[4,Gn(n)]):[3,2];case 1:return i.sent(),[3,5];case 2:return(r=e)?[3,4]:(n.Yu.add(2),[4,zn(n)]);case 3:i.sent(),r=n.th.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}})})}function pr(t){var e=this;return t.oh||(t.oh=function(t,e,n){var r=f(t);return r.xu(),new va(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:tr.bind(null,t),Tu:er.bind(null,t),yu:nr.bind(null,t)}),t.Ju.push(function(n){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(e){switch(e.label){case 0:return n?(t.oh.lu(),Qn(t)?Jn(t):t.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.oh.stop()];case 2:e.sent(),Zn(t),e.label=3;case 3:return[2]}})})})),t.oh}function dr(t){var e=this;return t.ah||(t.ah=function(t,e,n){var r=f(t);return r.xu(),new ya(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:ur.bind(null,t),Tu:fr.bind(null,t),Cu:cr.bind(null,t),Du:hr.bind(null,t)}),t.Ju.push(function(n){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(e){switch(e.label){case 0:return n?(t.ah.lu(),[4,or(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ah.stop()];case 3:e.sent(),t.zu.length>0&&(o("RemoteStore","Stopping write stream with "+t.zu.length+" pending writes"),t.zu=[]),e.label=4;case 4:return[2]}})})})),t.ah}function vr(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a;return mi.__generator(this,function(u){switch(u.label){case 0:return n=qr(t),(o=n.Nh.get(e))?(r=o.targetId,n.Sh.Oi(r),i=o.view.yh(),[3,4]):[3,1];case 1:return[4,Mn(n.ju,Te(e))];case 2:return s=u.sent(),a=n.Sh.Oi(s.targetId),r=s.targetId,[4,yr(n,e,r,"current"===a)];case 3:i=u.sent(),n.Uh&&Wn(n.ph,s),u.label=4;case 4:return[2,i]}})})}function yr(t,e,n,r){return mi.__awaiter(this,void 0,void 0,function(){var i,o,s,a,u,c;return mi.__generator(this,function(h){switch(h.label){case 0:return t.Qh=function(e,n,r){return function(t,e,n,r){return mi.__awaiter(this,void 0,void 0,function(){var i,o,s;return mi.__generator(this,function(a){switch(a.label){case 0:return i=e.view.wh(n),i.Eh?[4,Un(t.ju,e.query,!1).then(function(t){var n=t.documents;return e.view.wh(n,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.zt.get(e.targetId),s=e.view.yr(i,t.Uh,o),[2,(Nr(t,e.targetId,s.Rh),s.snapshot)]}})})}(t,e,n,r)},[4,Un(t.ju,e,!0)];case 1:return i=h.sent(),o=new Ia(e,i.Fc),s=o.wh(i.documents),a=ao.Zt(n,r&&"Offline"!==t.onlineState),u=o.yr(s,t.Uh,a),Nr(t,n,u.Rh),c=new Ea(e,n,o),[2,(t.Nh.set(e,c),t.Fh.has(n)?t.Fh.get(n).push(e):t.Fh.set(n,[e]),u.snapshot)]}})})}function gr(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i;return mi.__generator(this,function(o){switch(o.label){case 0:return n=f(t),r=n.Nh.get(e),(i=n.Fh.get(r.targetId)).length>1?[2,(n.Fh.set(r.targetId,i.filter(function(t){return!ke(t,e)})),void n.Nh.delete(e))]:n.Uh?(n.Sh.Bi(r.targetId),n.Sh.Fi(r.targetId)?[3,2]:[4,jn(n.ju,r.targetId,!1).then(function(){n.Sh.Ui(r.targetId),Kn(n.ph,r.targetId),Ar(n,r.targetId)}).catch(Bn)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ar(n,r.targetId),[4,jn(n.ju,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function mr(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r;return mi.__generator(this,function(i){switch(i.label){case 0:n=f(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xn(n.ju,e)];case 2:return r=i.sent(),e.zt.forEach(function(t,e){var r=n.kh.get(e);r&&(h(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?h(r.Vh):t.se.size>0&&(h(r.Vh),r.Vh=!1))}),[4,Dr(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Bn(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function br(t,e,n){var r=f(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach(function(t,n){var r=n.view.Qs(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=f(t);n.onlineState=e;var r=!1;n.Bs.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Qs(e)&&(r=!0)}),r&&Ye(n)}(r.bh,e),i.length&&r.Ch.yu(i),r.onlineState=e,r.Uh&&r.Sh.Ki(e)}}function wr(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,o,s,a,u;return mi.__generator(this,function(c){switch(c.label){case 0:return(r=f(t)).Sh.Qi(e,"rejected",n),i=r.kh.get(e),(o=i&&i.key)?(s=(s=new Ki(Li.i)).ot(o,new jo(o,Gi.min())),a=$().add(o),u=new so(Gi.min(),new Map,new Ji(P),s,a),[4,mr(r,u)]):[3,2];case 1:return c.sent(),r.$h=r.$h.remove(o),r.kh.delete(e),Or(r),[3,4];case 2:return[4,jn(r.ju,e,!1).then(function(){return Ar(r,e,n)}).catch(Bn)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function _r(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i;return mi.__generator(this,function(o){switch(o.label){case 0:n=f(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ln(n.ju,e)];case 2:return i=o.sent(),Tr(n,r,null),Er(n,r),n.Sh.ki(r,"acknowledged"),[4,Dr(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Bn(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ir(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i;return mi.__generator(this,function(o){switch(o.label){case 0:r=f(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=f(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Sr.Oo(t,e).next(function(e){return h(null!==e),r=e.keys(),n.Sr.Wo(t,e)}).next(function(){return n.Sr.zo(t)}).next(function(){return n.Cc.kr(t,r)})})}(r.ju,e)];case 2:return i=o.sent(),Tr(r,e,n),Er(r,e),r.Sh.ki(e,"rejected",n),[4,Dr(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Bn(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Er(t,e){(t.Lh.get(e)||[]).forEach(function(t){t.resolve()}),t.Lh.delete(e)}function Tr(t,e,n){var r=f(t),i=r.Oh[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Oh[r.currentUser.ti()]=i}}function Ar(t,e,n){void 0===n&&(n=null),t.Sh.Bi(e);for(var r=0,i=t.Fh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Wh(o,n)}t.Fh.delete(e),t.Uh&&t.Mh.Uc(e).forEach(function(e){t.Mh.Ho(e)||Sr(t,e)})}function Sr(t,e){var n=t.$h.get(e);null!==n&&(Kn(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),Or(t))}function Nr(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof wa?(t.Mh.Da(s.key,e),kr(t,s)):s instanceof _a?(o("SyncEngine","Document no longer in limbo: "+s.key),t.Mh.Na(s.key,e),t.Mh.Ho(s.key)||Sr(t,s.key)):c()}}function kr(t,e){var n=e.key;t.$h.get(n)||(o("SyncEngine","New document in limbo: "+n),t.xh.push(n),Or(t))}function Or(t){for(;t.xh.length>0&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new Ta(e)),t.$h=t.$h.ot(e,n),Wn(t.ph,new Hi(Te(ge(e.path)),n,2,fs.ai))}}function Dr(e,n,r){return mi.__awaiter(this,void 0,void 0,function(){var i,s,a,u;return mi.__generator(this,function(c){switch(c.label){case 0:return i=f(e),s=[],a=[],u=[],i.Nh.m()?[3,3]:(i.Nh.forEach(function(t,e){u.push(i.Qh(e,n,r).then(function(t){if(t){i.Uh&&i.Sh.Qi(e.targetId,t.fromCache?"not-current":"current"),s.push(t);var n=As.zr(e.targetId,t);a.push(n)}}))}),[4,t.all(u)]);case 1:return c.sent(),i.Ch.yu(s),[4,function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,s,a,u,c,h,l;return mi.__generator(this,function(p){switch(p.label){case 0:n=f(t),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return $o.forEach(e,function(e){return $o.forEach(e.Kr,function(r){return n.persistence.No.Da(t,e.targetId,r)}).next(function(){return $o.forEach(e.Gr,function(r){return n.persistence.No.Na(t,e.targetId,r)})})})})];case 2:return p.sent(),[3,4];case 3:if(!Ve(r=p.sent()))throw r;return o("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=s[i],u=a.targetId,a.fromCache||(c=n.bc.get(u),h=c.nt,l=c.rt(h),n.bc=n.bc.ot(u,l));return[2]}})})}(i.ju,a)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function Cr(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r;return mi.__generator(this,function(i){switch(i.label){case 0:return(n=f(t)).currentUser.isEqual(e)?[3,3]:(o("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return mi.__generator(this,function(s){switch(s.label){case 0:return n=f(t),r=n.Sr,i=n.Cc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Sr.Uo(t).next(function(s){return o=s,r=n.persistence.mc(e),i=new Ts(n.Dc,r,n.persistence.Ic()),r.Uo(t)}).next(function(e){for(var n=[],r=[],s=$(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.kr(t,s).next(function(t){return{jh:t,Kh:n,Gh:r}})})})];case 1:return o=s.sent(),[2,(n.Sr=r,n.Cc=i,n.Vc.Nc(n.Cc),o)]}})})}(n.ju,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Lh.forEach(function(t){t.forEach(function(t){t.reject(new Si(Ai.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Lh.clear()}(n),n.Sh.ji(e,r.Kh,r.Gh),[4,Dr(n,r.jh)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Lr(t,e){var n=f(t),r=n.kh.get(e);if(r&&r.Vh)return $().add(r.key);var i=$(),o=n.Fh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Nh.get(u);i=i.kt(c.view.dh)}return i}function Rr(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i;return mi.__generator(this,function(o){switch(o.label){case 0:return[4,Un((n=f(t)).ju,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ph(r),[2,(n.Uh&&Nr(n,e.targetId,i.Rh),i)]}})})}function xr(t,e,n,r){return mi.__awaiter(this,void 0,void 0,function(){var i,s;return mi.__generator(this,function(a){switch(a.label){case 0:return[4,function(t,e){var n=f(t),r=f(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Lo(t,e).next(function(e){return e?n.Cc.kr(t,e):$o.resolve(null)})})}((i=f(t)).ju,e)];case 1:return null===(s=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,or(i.ph)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Tr(i,e,r||null),Er(i,e),function(t,e){f(f(t).Sr).Ko(e)}(i.ju,e)):c(),a.label=4;case 4:return[4,Dr(i,s)];case 5:return a.sent(),[3,7];case 6:o("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}})})}function Pr(e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,o,s,a,u,c,h;return mi.__generator(this,function(l){switch(l.label){case 0:return qr(r=f(e)),Br(r),!0!==n||!0===r.qh?[3,3]:(i=r.Sh.Ci(),[4,Mr(r,i.A())]);case 1:return o=l.sent(),r.qh=!0,[4,lr(r.ph,!0)];case 2:for(l.sent(),s=0,a=o;s<a.length;s++)u=a[s],Wn(r.ph,u);return[3,7];case 3:return!1!==n||!1===r.qh?[3,7]:(c=[],h=t.resolve(),r.Fh.forEach(function(t,e){r.Sh.qi(e)?c.push(e):h=h.then(function(){return Ar(r,e),jn(r.ju,e,!0)}),Kn(r.ph,e)}),[4,h]);case 4:return l.sent(),[4,Mr(r,c)];case 5:return l.sent(),function(t){var e=f(t);e.kh.forEach(function(t,n){Kn(e.ph,n)}),e.Mh.Qc(),e.kh=new Map,e.$h=new Ki(Li.i)}(r),r.qh=!1,[4,lr(r.ph,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}})})}function Mr(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,p,d,v,y;return mi.__generator(this,function(g){switch(g.label){case 0:n=f(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Fh.get(a))&&0!==c.length?[4,Mn(n.ju,Te(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(p=l[h],d=n.Nh.get(p),[4,Rr(n,d)]):[3,6];case 4:(v=g.sent()).snapshot&&i.push(v.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Vn(n.ju,a)];case 8:return y=g.sent(),[4,Mn(n.ju,y)];case 9:return u=g.sent(),[4,yr(n,jr(y),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Ch.yu(i),r)]}})})}function jr(t){return ye(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ur(t){return f(f(f(t).ju).persistence).pi()}function Vr(t,e,n,r){return mi.__awaiter(this,void 0,void 0,function(){var i,s,a;return mi.__generator(this,function(u){switch(u.label){case 0:return(i=f(t)).qh?(o("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Fh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Fn(i.ju)];case 3:return s=u.sent(),a=so.Xt(e,"current"===n),[4,Dr(i,s,a)];case 4:return u.sent(),[3,8];case 5:return[4,jn(i.ju,e,!0)];case 6:return u.sent(),Ar(i,e,r),[3,8];case 7:c(),u.label=8;case 8:return[2]}})})}function Fr(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,s,a,u,c,h,f,l,p;return mi.__generator(this,function(d){switch(d.label){case 0:if(!(r=qr(t)).qh)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?(a=s[i],r.Fh.has(a)?(o("SyncEngine","Adding an already active target "+a),[3,5]):[4,Vn(r.ju,a)]):[3,6];case 2:return u=d.sent(),[4,Mn(r.ju,u)];case 3:return c=d.sent(),[4,yr(r,jr(u),c.targetId,!1)];case 4:d.sent(),Wn(r.ph,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return mi.__generator(this,function(e){switch(e.label){case 0:return r.Fh.has(t)?[4,jn(r.ju,t,!1).then(function(){Kn(r.ph,t),Ar(r,t)}).catch(Bn)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}})})}function qr(t){var e=f(t);return e.ph.Gu.sh=mr.bind(null,e),e.ph.Gu.qe=Lr.bind(null,e),e.ph.Gu.nh=wr.bind(null,e),e.Ch.yu=Ke.bind(null,e.bh),e.Ch.Wh=Xe.bind(null,e.bh),e}function Br(t){var e=f(t);return e.ph.Gu.ih=_r.bind(null,e),e.ph.Gu.rh=Ir.bind(null,e),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Gr(t){return new go(t,!0)}function zr(t,e,n){return new ou({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}function Hr(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw c()}}function Wr(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Zr("Data must be an object, but it was:",s,r);var a,u,h=Qr(r,s);if(o.merge)a=new Eo(s.We),u=s.fieldTransforms;else if(o.mergeFields){for(var f=[],l=0,p=o.mergeFields;l<p.length;l++){var d=p[l],v=void 0;if(d instanceof za)v=d.t_;else{if("string"!=typeof d)throw c();v=ei(e,d,n)}if(!s.contains(v))throw new Si(Ai.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");ri(f,v)||f.push(v)}a=new Eo(f),u=s.fieldTransforms.filter(function(t){return a.Ye(t.field)})}else a=null,u=s.fieldTransforms;return new ru(new Ro(h),a,u)}function Kr(t,e,n,r){var i=t.P_(1,e,n);Zr("Data must be an object, but it was:",i,r);var o=[],s=new xo;p(r,function(t,r){var a=ei(e,t,n),u=i.A_(a);if(r instanceof Xa||r instanceof tu&&r.l_ instanceof Xa)o.push(a);else{var c=Jr(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Eo(o);return new iu(s.Xe(),a,i.fieldTransforms)}function Xr(t,e,n,r,i,o){var s=t.P_(1,e,n),a=[ti(e,r,n)],u=[i];if(o.length%2!=0)throw new Si(Ai.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ti(e,o[c])),u.push(o[c+1]);for(var h=[],f=new xo,l=a.length-1;l>=0;--l)if(!ri(h,a[l])){var p=a[l],d=u[l],v=s.A_(p);if(d instanceof Xa||d instanceof tu&&d.l_ instanceof Xa)h.push(p);else{var y=Jr(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Eo(h);return new iu(f.Xe(),g,s.fieldTransforms)}function Yr(t,e,n,r){return void 0===r&&(r=!1),Jr(n,t.P_(r?4:3,e))}function Jr(t,e){if(t instanceof tu&&(t=t.l_),$r(t))return Zr("Unsupported field value:",e,t),Qr(t,e);if(t instanceof Ka)return function(t,e){if(!Hr(e.s_))throw e.i_(t.e_+"() can only be used with update() and set()");if(!e.path)throw e.i_(t.e_+"() is not currently supported inside arrays");var n=t.n_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.We.push(e.path),t instanceof Array){if(e.settings.o_&&4!==e.s_)throw e.i_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Jr(o[i],e.R_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Et(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Bi.fromDate(t);return{timestampValue:Tt(e.serializer,n)}}if(t instanceof Bi){var r=new Bi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tt(e.serializer,r)}}if(t instanceof Za)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ji)return{bytesValue:At(e.serializer,t.q)};if(t instanceof nu){var i=e.U,o=t.__;if(!o.isEqual(i))throw e.i_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:kt(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_("Unsupported field value: "+N(t))}(t,e)}function Qr(t,e){var n={};return d(t)?e.path&&e.path.length>0&&e.We.push(e.path):p(t,function(t,r){var i=Jr(r,e.E_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function $r(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bi||t instanceof Za||t instanceof ji||t instanceof nu||t instanceof Ka)}function Zr(t,e,n){if(!$r(n)||!S(n)){var r=N(n);throw"an object"===r?e.i_(t+" a custom object"):e.i_(t+" "+r)}}function ti(t,e,n){if(e instanceof za)return e.t_;if("string"==typeof e)return ei(t,e);throw ni("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function ei(t,e,n){try{return function(t){if(t.search(Wa)>=0)throw new Si(Ai.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ha.bind.apply(Ha,mi.__spreadArrays([void 0],t.split("."))))}catch(e){throw new Si(Ai.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).t_}catch(e){throw ni((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function ni(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Si(Ai.INVALID_ARGUMENT,(a+=". ")+t+u)}function ri(t,e){return t.some(function(t){return t.isEqual(e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ii(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function oi(t,e,n,r,i,o,s){var a;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new Si(Ai.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ui(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(ai(r,t,f))}a={arrayValue:{values:u}}}else a=ai(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ui(s,o),a=Yr(n,e,s,"in"===o||"not-in"===o);var l=Fo.create(i,o,a);return function(t,e){if(e.hn()){var n=_e(t);if(null!==n&&!n.isEqual(e.field))throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=we(t);null!==r&&ci(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Si(Ai.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Si(Ai.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}function si(t,e,n){if(null!==t.startAt)throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yo(e,n);return function(t,e){if(null===we(t)){var n=_e(t);null!==n&&ci(t,n,e.field)}}(t,r),r}function ai(t,e,n){if("string"==typeof n){if(""===n)throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ie(e)&&-1!==n.indexOf("/"))throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Oi.g(n));if(!Li.F(r))throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vt(t,new Li(r))}if(n instanceof nu)return vt(t,n.f_);throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+N(n)+".")}function ui(t,e){if(!Array.isArray(t)||0===t.length)throw new Si(Ai.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Si(Ai.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new Si(Ai.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter(function(t){return Number.isNaN(t)}).length>0)throw new Si(Ai.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ci(t,e,n){if(!n.isEqual(e))throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function hi(t){if(be(t)&&0===t.on.length)throw new Si(Ai.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function fi(t,e){if(void 0===e)return{merge:!1};if(O(t,e,["merge","mergeFields"]),I(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+N(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Si(Ai.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+N(r[o]))}(t,"mergeFields",0,r,i)}(t,0,0,e.mergeFields,function(t){return"string"==typeof t||t instanceof Ha}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Si(Ai.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function li(t,e){return void 0===e?{}:(O(t,e,["serverTimestamps"]),E(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function pi(t,e){w(t,"object",1,e),e&&(O(t,e,["source"]),E(t,0,"source",e.source,["default","server","cache"]))}function di(t,e,n){if(e instanceof nu){if(e.firestore!==n)throw new Si(Ai.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw D(t,"DocumentReference",1,e)}function vi(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return c()}}function yi(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function gi(t){!function(t,e){t.INTERNAL.registerComponent(new Ei.Component("firestore",function(t){return function(t,e){var n=new Ba,r=new qa(n);return new pu(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Tu)))}(t),t.registerVersion("@firebase/firestore","1.18.0")}Object.defineProperty(e,"__esModule",{value:!0});var mi=n(2),bi=n(3),wi=n(7),_i=n(4),Ii=n(18),Ei=n(6),Ti=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(bi),Ai={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Si=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return mi.__extends(e,t),e}(Error),Ni=new wi.Logger("@firebase/firestore"),ki=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&c(),void 0===n?n=t.length-e:n>t.length-e&&c(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Si(Ai.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.P=function(){return new e([])},e}(ki),Di=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.V=function(t){return Di.test(t)},e.prototype.R=function(){return this.A().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Si(Ai.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Si(Ai.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Si(Ai.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Si(Ai.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.P=function(){return new e([])},e}(ki),Li=function(){function t(t){this.path=t}return t.D=function(e){return new t(Oi.g(e))},t.C=function(e){return new t(Oi.g(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Oi.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return Oi.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new Oi(e.slice()))},t}(),Ri=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=x(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}(),xi=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.M,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return P(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();xi.B=new xi("");var Pi,Mi,ji=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(xi.fromBase64String(e))}catch(e){throw new Si(Ai.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(xi.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}(),Ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.fromBase64String=function(t){y("Blob.fromBase64String",arguments,1),b("Blob.fromBase64String","string",1,t),V();try{return new e(xi.fromBase64String(t))}catch(t){throw new Si(Ai.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(y("Blob.fromUint8Array",arguments,1),U(),!(t instanceof Uint8Array))throw D("Blob.fromUint8Array","Uint8Array",1,t);return new e(xi.fromUint8Array(t))},e.prototype.toBase64=function(){return y("Blob.toBase64",arguments,0),V(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return y("Blob.toUint8Array",arguments,0),U(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(ji),Vi=function(t,e,n,r,i,o){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=o},Fi=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return P(this.projectId,t.projectId)||P(this.database,t.database)},t}(),qi=function(){function t(t,e){this.K=t,this.G=e,this.H={}}return t.prototype.get=function(t){var e=this.K(t),n=this.H[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.G(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.K(t),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.H[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.H[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){p(this.H,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}})},t.prototype.m=function(){return d(this.H)},t}(),Bi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Si(Ai.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Si(Ai.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Si(Ai.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Si(Ai.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.Y=function(t){return this.seconds===t.seconds?P(this.nanoseconds,t.nanoseconds):P(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Gi=function(){function t(t){this.timestamp=t}return t.J=function(e){return new t(e)},t.min=function(){return new t(new Bi(0,0))},t.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Z=function(){return this.timestamp},t}(),zi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null},Hi=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Gi.min()),void 0===o&&(o=Gi.min()),void 0===s&&(s=xi.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),Wi=function(t){this.count=t};(Mi=Pi||(Pi={}))[Mi.OK=0]="OK",Mi[Mi.CANCELLED=1]="CANCELLED",Mi[Mi.UNKNOWN=2]="UNKNOWN",Mi[Mi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mi[Mi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mi[Mi.NOT_FOUND=5]="NOT_FOUND",Mi[Mi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mi[Mi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mi[Mi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mi[Mi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mi[Mi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mi[Mi.ABORTED=10]="ABORTED",Mi[Mi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mi[Mi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mi[Mi.INTERNAL=13]="INTERNAL",Mi[Mi.UNAVAILABLE=14]="UNAVAILABLE",Mi[Mi.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ki=function(){function t(t,e){this.i=t,this.root=e||Yi.EMPTY}return t.prototype.ot=function(e,n){return new t(this.i,this.root.ot(e,n,this.i).copy(null,null,Yi.at,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,Yi.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.ht(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new Xi(this.root,null,this.i,!1)},t.prototype.ft=function(t){return new Xi(this.root,t,this.i,!1)},t.prototype.dt=function(){return new Xi(this.root,null,this.i,!0)},t.prototype.wt=function(t){return new Xi(this.root,t,this.i,!0)},t}(),Xi=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),Yi=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).gt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).gt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.m()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.gt()},t.prototype.yt=function(){return this.color},t.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw c();if(this.right.yt())throw c();var t=this.left.Nt();if(t!==this.right.Nt())throw c();return t+(this.yt()?0:1)},t}();Yi.EMPTY=null,Yi.RED=!0,Yi.at=!1,Yi.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw c()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new Yi(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ji=function(){function t(t){this.i=t,this.data=new Ki(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht(function(e,n){return t(e),!1})},t.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.$t=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new Qi(this.data._t())},t.prototype.ft=function(t){return new Qi(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Qi=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),$i=new Ki(Li.i),Zi=new Ki(Li.i),to=new Ki(Li.i),eo=new Ji(Li.i),no=new Ji(P),ro=function(){function t(t){this.i=t?function(e,n){return t(e,n)||Li.i(e.key,n.key)}:function(t,e){return Li.i(t.key,e.key)},this.Ot=Q(),this.Lt=new Ki(this.i)}return t.Bt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.m=function(){return this.Lt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Ot=e,r.Lt=n,r},t}(),io=function(){function t(){this.qt=new Ki(Li.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):c():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht(function(e,n){t.push(n)}),t},t}(),oo=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=o,this.jt=s,this.Kt=a}return t.Gt=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ro.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&ke(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),so=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,ao.Zt(e,n)),new t(Gi.min(),r,Z(),Y(),$())},t}(),ao=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(xi.B,n,$(),$(),$())},t}(),uo=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},co=function(t,e){this.targetId=t,this.oe=e},ho=function(t,e,n,r){void 0===n&&(n=xi.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fo=function(){function t(){this.ae=0,this.ce=et(),this.ue=xi.B,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=$(),e=$(),n=$();return this.ce.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:c()}}),new ao(this.ue,this.he,t,e,n)},t.prototype.me=function(){this.le=!1,this.ce=et()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.Ie=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),lo=function(){function t(t){this.ge=t,this.Pe=new Map,this.ye=Y(),this.Ve=tt(),this.pe=new Ji(P)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof Mo?this.ve(r,t.re):t.re instanceof jo&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,function(n){var r=e.Ne(n);switch(t.state){case 0:e.Fe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.me(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.Fe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.Fe(n)&&(e.xe(n),r.de(t.resumeToken));break;default:c()}})},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach(function(t,r){n.Fe(r)&&e(r)})},t.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(W(i))if(0===n){var o=new Li(i.path);this.Se(e,o,new jo(o,Gi.min()))}else h(1===n);else this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.Pe.forEach(function(r,i){var o=e.ke(i);if(o){if(r.te&&W(o.target)){var s=new Li(o.target.path);null!==e.ye.get(s)||e.Le(i,s)||e.Se(i,s,new jo(s,t))}r.fe&&(n.set(i,r.we()),r.me())}});var r=$();this.Ve.forEach(function(t,n){var i=!0;n.xt(function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)}),i&&(r=r.add(t))});var i=new so(t,n,this.pe,this.ye,r);return this.ye=Y(),this.Ve=tt(),this.pe=new Ji(P),i},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.Fe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},t.prototype.Ie=function(t){this.Ne(t).Ie()},t.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new fo,this.Pe.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new Ji(P),this.Ve=this.Ve.ot(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.ke(t);return e||o("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new fo),this.ge.qe(t).forEach(function(n){e.Se(t,n,null)})},t.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},t}(),po=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),vo={asc:"ASCENDING",desc:"DESCENDING"},yo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},go=function(t,e){this.U=t,this.Qe=e},mo=function(){this.He=void 0},bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e}(mo),wo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mi.__extends(e,t),e}(mo),_o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return mi.__extends(e,t),e}(mo),Io=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.je=n,r}return mi.__extends(e,t),e}(mo),Eo=function(){function t(t){this.fields=t,t.sort(Ci.i)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return M(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),To=function(t,e){this.field=t,this.transform=e},Ao=function(t,e){this.version=t,this.transformResults=e},So=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),No=function(){},ko=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return mi.__extends(e,t),e}(No),Oo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.We=r,o.Ge=i,o.type=1,o}return mi.__extends(e,t),e}(No),Do=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=So.exists(!0),r}return mi.__extends(e,t),e}(No),Co=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return mi.__extends(e,t),e}(No),Lo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return mi.__extends(e,t),e}(No),Ro=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!wt(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return st(this.proto,t.proto)},t}(),xo=function(){function t(t){void 0===t&&(t=Ro.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ot(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Xe=function(){var t=this.nn(Ci.P(),this.tn);return null!=t?new Ro(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=wt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}(),Po=function(t,e){this.key=t,this.version=e},Mo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return mi.__extends(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Po),jo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return mi.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Po),Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Po),Vo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null,this.startAt,this.endAt},Fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return mi.__extends(e,t),e.create=function(t,n,r){if(t.p())return"in"===n||"not-in"===n?this.ln(t,n,r):new qo(t,n,r);if(mt(r)){if("=="!==n&&"!="!==n)throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,r)}if(bt(r)){if("=="!==n&&"!="!==n)throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,r)}return"array-contains"===n?new zo(t,r):"in"===n?new Ho(t,r):"not-in"===n?new Wo(t,r):"array-contains-any"===n?new Ko(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Bo(t,n):new Go(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(ut(e,this.value)):null!==e&&ot(this.value)===ot(e)&&this._n(ut(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return c()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),qo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Li.C(r.referenceValue),i}return mi.__extends(e,t),e.prototype.matches=function(t){var e=Li.i(t.key,this.key);return this._n(e)},e}(Fo),Bo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Re("in",n),r}return mi.__extends(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Fo),Go=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Re("not-in",n),r}return mi.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Fo),zo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return mi.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return gt(e)&&at(e.arrayValue,this.value)},e}(Fo),Ho=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return mi.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&at(this.value.arrayValue,e)},e}(Fo),Wo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return mi.__extends(e,t),e.prototype.matches=function(t){if(at(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!at(this.value.arrayValue,e)},e}(Fo),Ko=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return mi.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!gt(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return at(e.value.arrayValue,t)})},e}(Fo),Xo=function(t,e){this.position=t,this.before=e},Yo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},Jo=function(){var e=this;this.promise=new t(function(t,n){e.resolve=t,e.reject=n})},Qo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.En=0},t.prototype.Rn=function(){this.En=this.Tn},t.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.In=this.fn.yn(this.dn,i,function(){return e.An=Date.now(),t()}),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},t.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},t.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.En},t}(),$o=function(){function e(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t(function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)},function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.Dn&&c(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(t,this.result):new e(function(e,i){r.bn=function(n){r.Nn(t,n).next(e,i)},r.vn=function(t){r.Cn(n,t).next(e,i)}})},e.prototype.Fn=function(){var e=this;return new t(function(t,n){e.next(t,n)})},e.prototype.xn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.Nn=function(t,n){return t?this.xn(function(){return t(n)}):e.resolve(n)},e.prototype.Cn=function(t,n){return t?this.xn(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.$n=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},e.kn=function(t){for(var n=e.resolve(!1),r=0,i=t;r<i.length;r++)!function(t){n=n.next(function(n){return n?e.resolve(n):t()})}(i[r]);return n},e.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.$n(r)},e}(),Zo=function(){function e(t,n,r){this.name=t,this.version=n,this.Mn=r,12.2===e.On(_i.getUA())&&s("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return o("SimpleDb","Removing database:",t),Fe(window.indexedDB.deleteDatabase(t)).Fn()},e.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(e.Bn())return!0;var t=_i.getUA(),n=e.On(t),r=0<n&&n<10,i=e.qn(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.Bn=function(){var t;return void 0!==r&&"YES"===(null===(t=r.env)||void 0===t?void 0:t.Un)},e.Qn=function(t,e){return t.store(e)},e.On=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.Wn=function(e){return mi.__awaiter(this,void 0,void 0,function(){var n,r=this;return mi.__generator(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(o("SimpleDb","Opening database:",this.name),n=this,[4,new t(function(t,n){var i=indexedDB.open(r.name,r.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){n(new es(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var r=t.target.error;n("VersionError"===r.name?new Si(Ai.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new es(e,r))},i.onupgradeneeded=function(t){o("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;r.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,r.version).next(function(){o("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return r.jn(t)}),this.db)]}})})},e.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(e,n,r,i){return mi.__awaiter(this,void 0,void 0,function(){var s,a,u,c,h;return mi.__generator(this,function(f){switch(f.label){case 0:s="readonly"===n,a=0,u=function(){var n,u,h,f,l;return mi.__generator(this,function(p){switch(p.label){case 0:++a,p.label=1;case 1:return p.trys.push([1,4,,5]),[4,c.Wn(e)];case 2:return c.db=p.sent(),n=ns.open(c.db,e,s?"readonly":"readwrite",r),u=i(n).catch(function(t){return n.abort(t),$o.reject(t)}).Fn(),h={},u.catch(function(){}),[4,n.Gn];case 3:return[2,(h.value=(p.sent(),u),h)];case 4:return f=p.sent(),l="FirebaseError"!==f.name&&a<3,o("SimpleDb","Transaction failed with error:",f.message,"Retrying:",l),c.close(),l?[3,5]:[2,{value:t.reject(f)}];case 5:return[2]}})},c=this,f.label=1;case 1:return[5,u()];case 2:if("object"==typeof(h=f.sent()))return[2,h.value];f.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),ts=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Fe(this.zn.delete())},t}(),es=function(t){function e(e,n){var r=this;return(r=t.call(this,Ai.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return mi.__extends(e,t),e}(Si),ns=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new Jo,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new es(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=qe(e.target.error);n.Zn.reject(new es(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new es(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(o("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new rs(e)},t}(),rs=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(o("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(o("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Fe(n)},t.prototype.add=function(t){return o("SimpleDb","ADD",this.store.name,t,t),Fe(this.store.add(t))},t.prototype.get=function(t){var e=this;return Fe(this.store.get(t)).next(function(n){return void 0===n&&(n=null),o("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return o("SimpleDb","DELETE",this.store.name,t),Fe(this.store.delete(t))},t.prototype.count=function(){return o("SimpleDb","COUNT",this.store.name),Fe(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.ns=function(t,e){o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,function(t,e,n){return n.delete()})},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new $o(function(n,r){e.onerror=function(t){var e=qe(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.es=function(t,e){var n=[];return new $o(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ts(i),s=e(i.primaryKey,i.value,o);if(s instanceof $o){var a=s.catch(function(t){return o.done(),$o.reject(t)});n.push(a)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}}).next(function(){return $o.$n(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}(),is=!1,os=function(){function e(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new Jo,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(t){})}return e._s=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(t){var e=this;this.fs=setTimeout(function(){return e.ds()},t)},e.prototype.pn=function(){return this.ds()},e.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new Si(Ai.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.ds=function(){var e=this;this.cs.ws(function(){return null!==e.fs?(e.clearTimeout(),e.op().then(function(t){return e.ls.resolve(t)})):t.resolve()})},e.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},e}(),ss=function(){function e(){var e=this;this.Ts=t.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new Qo(this,"async_queue_retry"),this.Vs=function(){var t=Ge();t&&o("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.ys.Vn()};var n=Ge();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(e.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),e.prototype.ws=function(t){this.enqueue(t)},e.prototype.bs=function(t){this.vs(),this.Ss(t)},e.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=Ge();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},e.prototype.enqueue=function(e){return this.vs(),this.Is?new t(function(t){}):this.Ss(e)},e.prototype.Cs=function(t){var e=this;this.ws(function(){return e.Es.push(t),e.Ns()})},e.prototype.Ns=function(){return mi.__awaiter(this,void 0,void 0,function(){var t,e=this;return mi.__generator(this,function(n){switch(n.label){case 0:if(0===this.Es.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return n.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!Ve(t=n.sent()))throw t;return o("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Es.length>0&&this.ys.gn(function(){return e.Ns()}),n.label=5;case 5:return[2]}})})},e.prototype.Ss=function(t){var e=this,n=this.Ts.then(function(){return e.gs=!0,t().catch(function(t){throw e.Rs=t,e.gs=!1,s("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gs=!1,t})});return this.Ts=n,n},e.prototype.yn=function(t,e,n){var r=this;this.vs(),this.Ps.indexOf(t)>-1&&(e=0);var i=os._s(this,t,e,n,function(t){return r.Fs(t)});return this.As.push(i),i},e.prototype.vs=function(){this.Rs&&c()},e.prototype.xs=function(){},e.prototype.$s=function(){return mi.__awaiter(this,void 0,void 0,function(){var t;return mi.__generator(this,function(e){switch(e.label){case 0:return[4,t=this.Ts];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ts)return[3,0];e.label=3;case 3:return[2]}})})},e.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},e.prototype.Ms=function(t){var e=this;return this.$s().then(function(){e.As.sort(function(t,e){return t.us-e.us});for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.$s()})},e.prototype.Os=function(t){this.Ps.push(t)},e.prototype.Fs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},e}(),as=function(){this.Ls=void 0,this.listeners=[]},us=function(){this.Bs=new qi(function(t){return Oe(t)},ke),this.onlineState="Unknown",this.qs=new Set},cs=function(){function t(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new oo(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.Ks.error(t)},t.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.m()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.jt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=oo.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},t}(),hs=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
hs.UNAUTHENTICATED=new hs(null),hs.ei=new hs("google-credentials-uid"),hs.ni=new hs("first-party-uid");/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fs=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();fs.ai=-1;var ls=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ci=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new Si(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(s("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ps=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ci=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Si(r.error.code,r.error.message)),i?new t(e,r.state,o):(s("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ds=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ci=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Z(),a=0;i&&a<r.activeTargetIds.length;++a)i=B(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(s("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),vs=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ci=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(s("SharedClientState","Failed to parse online state: "+e),null)},t}(),ys=function(){function t(){this.activeTargetIds=Z()}return t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gs=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Ki(P),this.Ei=!1,this.Ii=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=Je(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new ys),this.gi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return mi.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,h,f=this;return mi.__generator(this,function(l){switch(l.label){case 0:return[4,this.fi.pi()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._i&&(i=this.getItem(Je(this.persistenceKey,r)))&&(o=ds.ci(r,i))&&(this.Ti=this.Ti.ot(o.clientId,o));for(this.bi(),(s=this.storage.getItem(this.Vi))&&(a=this.vi(s))&&this.Si(a),u=0,c=this.Ii;u<c.length;u++)h=c[u],this.mi(h);return this.Ii=[],this.window.addEventListener("unload",function(){return f.Di()}),this.Ei=!0,[2]}})})},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.Fi=function(t){var e=!1;return this.Ti.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.xi=function(t){this.$i(t,"pending")},t.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},t.prototype.Oi=function(t){var e="not-current";if(this.Fi(t)){var n=this.storage.getItem($e(this.persistenceKey,t));if(n){var r=ps.ci(t,n);r&&(e=r.state)}}return this.Li.hi(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem($e(this.persistenceKey,t))},t.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},t.prototype.ji=function(t,e,n){var r=this;e.forEach(function(t){r.Mi(t)}),this.currentUser=t,n.forEach(function(t){r.xi(t)})},t.prototype.Ki=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return o("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){o("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){o("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.mi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(o("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void s("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return mi.__awaiter(e,void 0,void 0,function(){var t,e,r,i,o,a;return mi.__generator(this,function(u){if(this.Ei){if(null!==n.key)if(this.gi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Yi(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(r=this.Ji(n.key,n.newValue)))return[2,this.Xi(r)]}else if(this.yi.test(n.key)){if(null!==n.newValue&&(i=this.Zi(n.key,n.newValue)))return[2,this.tr(i)]}else if(n.key===this.Vi){if(null!==n.newValue&&(o=this.vi(n.newValue)))return[2,this.Si(o)]}else n.key===this.Ri&&(a=function(t){var e=fs.ai;if(null!=t)try{var n=JSON.parse(t);h("number"==typeof n),e=n}catch(t){s("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==fs.ai&&this.si(a)}else this.Ii.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},t.prototype.$i=function(t,e,n){var r=new ls(this.currentUser,t,e,n),i=Qe(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ui())},t.prototype.Mi=function(t){var e=Qe(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.Vi,JSON.stringify(e))},t.prototype.Wi=function(t,e,n){var r=$e(this.persistenceKey,t),i=new ps(t,e,n);this.setItem(r,i.ui())},t.prototype.zi=function(t){var e=this.gi.exec(t);return e?e[1]:null},t.prototype.Yi=function(t,e){var n=this.zi(t);return ds.ci(n,e)},t.prototype.Ji=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ls.ci(new hs(i),r,e)},t.prototype.Zi=function(t,e){var n=this.yi.exec(t),r=Number(n[1]);return ps.ci(r,e)},t.prototype.vi=function(t){return vs.ci(t)},t.prototype.Xi=function(t){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(o("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.fi.sr(s,a).then(function(){n.Ti=r})},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=Z();return t.forEach(function(t,n){e=e.kt(n.activeTargetIds)}),e},t}(),ms=function(){function e(){this.ir=new ys,this.rr={},this.di=null,this.si=null}return e.prototype.xi=function(t){},e.prototype.ki=function(t,e,n){},e.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},e.prototype.Qi=function(t,e,n){this.rr[t]=e},e.prototype.Bi=function(t){this.ir.li(t)},e.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},e.prototype.Ui=function(t){delete this.rr[t]},e.prototype.Ci=function(){return this.ir.activeTargetIds},e.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},e.prototype.start=function(){return this.ir=new ys,t.resolve()},e.prototype.ji=function(t,e,n){},e.prototype.Ki=function(t){},e.prototype.Di=function(){},e.prototype.oi=function(t){},e}(),bs=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.cr=function(t,e,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=ae(o,e,r[i]))}return e},t.prototype.hr=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ue(i,e,e,this.ar))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=ue(u,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.hr(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},$())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&M(this.mutations,t.mutations,function(t,e){return he(t,e)})&&M(this.baseMutations,t.baseMutations,function(t,e){return he(t,e)})},t}(),ws=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.ur=n,this.dr=r}return t.from=function(e,n,r){h(e.mutations.length===r.length);for(var i=to,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),_s=function(){function t(){this.wr=new qi(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.mr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?$o.resolve(n):this.gr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},t.prototype.Ir=function(){},t}(),Is="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Es=function(){function t(){this.Vr=[]}return t.prototype.pr=function(t){this.Vr.push(t)},t.prototype.br=function(){this.Vr.forEach(function(t){return t()})},t}(),Ts=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next(function(r){return n.Fr(t,e,r)})},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].hr(e,t);return t})},t.prototype.$r=function(t,e,n){var r=J();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].hr(t,e);r=r.ot(t,e)}),r},t.prototype.kr=function(t,e){var n=this;return this.vr.getEntries(t,e).next(function(e){return n.Mr(t,e)})},t.prototype.Mr=function(t,e){var n=this;return this.Sr.Or(t,e).next(function(r){var i=n.$r(t,e,r),o=Y();return i.forEach(function(t,e){e||(e=new jo(t,Gi.min())),o=o.ot(t,e)}),o})},t.prototype.Lr=function(t,e,n){return function(t){return Li.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):Ie(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new Li(e)).next(function(t){var e=Q();return t instanceof Mo&&(e=e.ot(t.key,t)),e})},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=Q();return this.Dr.Qr(t,i).next(function(s){return $o.forEach(s,function(s){var a=function(t,e){return new Vo(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,a,n).next(function(t){t.forEach(function(t,e){o=o.ot(t,e)})})}).next(function(){return o})})},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next(function(n){return r=n,o.Sr.Wr(t,e)}).next(function(e){return i=e,o.jr(t,i,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),f=ue(u,h,h,o.ar);r=f instanceof Mo?r.ot(c,f):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Ce(e,n)||(r=r.remove(t))}),r})},t.prototype.jr=function(t,e,n){for(var r=$(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Oo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.vr.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Mo&&(c=c.ot(t,e))}),c})},t}(),As=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=r}return t.zr=function(e,n){for(var r=$(),i=$(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ss=function(){function t(t){this.Hr=t,this.buffer=new Ji(Ze),this.Yr=0}return t.prototype.Jr=function(){return++this.Yr},t.prototype.Xr=function(t){var e=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ze(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ns={Zr:!1,eo:0,no:0,so:0},ks=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.co,t.uo)},t}();ks.ho=-1,ks.lo=1048576,ks._o=41943040,ks.co=10,ks.uo=1e3,ks.fo=new ks(ks._o,ks.co,ks.uo),ks.do=new ks(ks.ho,0,0);var Os=function(){function t(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==ks.ho&&this.Eo(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t){var e=this,n=this.mo?3e5:6e4;o("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.cs.yn("lru_garbage_collection",n,function(){return mi.__awaiter(e,void 0,void 0,function(){var e;return mi.__generator(this,function(n){switch(n.label){case 0:this.To=null,this.mo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Io(this.wo)];case 2:return n.sent(),[3,7];case 3:return Ve(e=n.sent())?(o("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Bn(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eo(t)];case 8:return n.sent(),[2]}})})})},t}(),Ds=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.yo=function(t,e){var n=this;if(0===e)return $o.resolve(fs.ai);var r=new Ss(e);return this.Ao.Ce(t,function(t){return r.Xr(t.sequenceNumber)}).next(function(){return n.Ao.Vo(t,function(t){return r.Xr(t)})}).next(function(){return r.maxValue})},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===ks.ho?(o("LruGarbageCollector","Garbage collection skipped; disabled"),$o.resolve(Ns)):this.So(t).next(function(r){return r<n.params.io?(o("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),Ns):n.Do(t,e)})},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,s,a,u,c,h,f=this,l=Date.now();return this.Ro(t,this.params.ro).next(function(e){return e>f.params.oo?(o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.oo+" from "+e),r=f.params.oo):r=e,a=Date.now(),f.yo(t,r)}).next(function(r){return n=r,u=Date.now(),f.po(t,n,e)}).next(function(e){return s=e,c=Date.now(),f.bo(t,n)}).next(function(t){return h=Date.now(),i()<=wi.LogLevel.DEBUG&&o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-l)+"ms\n\tDetermined least recently used "+r+" in "+(u-a)+"ms\n\tRemoved "+s+" targets in "+(c-u)+"ms\n\tRemoved "+t+" documents in "+(h-c)+"ms\nTotal Duration: "+(h-l)+"ms"),$o.resolve({Zr:!0,eo:r,no:s,so:t})})},t}(),Cs=function(t){this.Co=t},Ls=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.Fo={}}return t.xo=function(e,n,r,i){return h(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yn(t).rs({index:qs.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.ko=function(t,e,n,r){var i=this,o=gn(t),s=yn(t);return s.add({}).next(function(a){h("number"==typeof a);for(var u=new bs(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return jt(t.Co,e)}),i=n.mutations.map(function(e){return jt(t.Co,e)});return new qs(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,u),f=[],l=new Ji(function(t,e){return P(t.R(),e.R())}),p=0,d=r;p<d.length;p++){var v=d[p],y=Bs.key(i.userId,v.key.path,a);l=l.add(v.key.path.h()),f.push(s.put(c)),f.push(o.put(y,Bs.PLACEHOLDER))}return l.forEach(function(e){f.push(i.Dr.Mo(t,e))}),t.pr(function(){i.Fo[a]=u.keys()}),$o.$n(f).next(function(){return u})})},t.prototype.Oo=function(t,e){var n=this;return yn(t).get(e).next(function(t){return t?(h(t.userId===n.userId),fn(n.serializer,t)):null})},t.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?$o.resolve(this.Fo[e]):this.Oo(t,e).next(function(t){if(t){var r=t.keys();return n.Fo[e]=r,r}return null})},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yn(t).rs({index:qs.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(h(e.batchId>=r),o=fn(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yn(t).rs({index:qs.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yn(t).ts(qs.userMutationsIndex,n).next(function(t){return t.map(function(t){return fn(e.serializer,t)})})},t.prototype.Nr=function(t,e){var n=this,r=Bs.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return gn(t).rs({range:i},function(r,i,s){var a=r[0],u=r[1],f=r[2],l=rn(u);if(a===n.userId&&e.path.isEqual(l))return yn(t).get(f).next(function(t){if(!t)throw c();h(t.userId===n.userId),o.push(fn(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.Or=function(t,e){var n=this,r=new Ji(P),i=[];return e.forEach(function(e){var o=Bs.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=gn(t).rs({range:s},function(t,i,o){var s=t[0],a=t[1],u=t[2],c=rn(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()});i.push(a)}),$o.$n(i).next(function(){return n.Qo(t,r)})},t.prototype.Wr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Bs.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ji(P);return gn(t).rs({range:s},function(t,e,o){var s=t[0],u=t[1],c=t[2],h=rn(u);s===n.userId&&r.T(h)?h.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.Qo(t,a)})},t.prototype.Qo=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(yn(t).get(e).next(function(t){if(null===t)throw c();h(t.userId===n.userId),r.push(fn(n.serializer,t))}))}),$o.$n(i).next(function(){return r})},t.prototype.Wo=function(t,e){var n=this;return vn(t.jo,this.userId,e).next(function(r){return t.pr(function(){n.Ko(e.batchId)}),$o.forEach(r,function(e){return n.No.Go(t,e)})})},t.prototype.Ko=function(t){delete this.Fo[t]},t.prototype.zo=function(t){var e=this;return this.$o(t).next(function(n){if(!n)return $o.resolve();var r=IDBKeyRange.lowerBound(Bs.prefixForUser(e.userId)),i=[];return gn(t).rs({range:r},function(t,n,r){if(t[0]===e.userId){var o=rn(t[1]);i.push(o)}else r.done()}).next(function(){h(0===i.length)})})},t.prototype.Ho=function(t,e){return dn(t,this.userId,e)},t.prototype.Yo=function(t){var e=this;return mn(t).get(this.userId).next(function(t){return t||new Fs(e.userId,-1,"")})},t}(),Rs=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Er=function(t,e,n){return wn(t).put(_n(e),n)},t.prototype.Ar=function(t,e){var n=wn(t),r=_n(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Jo(t,r)})},t.prototype.Rr=function(t,e){var n=this;return wn(t).get(_n(e)).next(function(t){return n.Xo(t)})},t.prototype.Zo=function(t,e){var n=this;return wn(t).get(_n(e)).next(function(t){var e=n.Xo(t);return e?{ta:e,size:In(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=J();return this.ea(t,e,function(t,e){var i=n.Xo(e);r=r.ot(t,i)}).next(function(){return r})},t.prototype.na=function(t,e){var n=this,r=J(),i=new Ki(Li.i);return this.ea(t,e,function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,In(e))):(r=r.ot(t,null),i=i.ot(t,0))}).next(function(){return{sa:r,ia:i}})},t.prototype.ea=function(t,e,n){if(e.m())return $o.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e._t(),o=i.It();return wn(t).rs({range:r},function(t,e,r){for(var s=Li.$(t);o&&Li.i(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.A()):r.done()}).next(function(){for(;o;)n(o,null),o=i.At()?i.It():null})},t.prototype.Lr=function(t,e,n){var r=this,i=Q(),o=e.path.length+1,s={};if(n.isEqual(Gi.min())){var a=e.path.A();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.A(),c=an(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Hs.collectionReadTimeIndex}return wn(t).rs(s,function(t,n,s){if(t.length===o){var a=on(r.serializer,n);e.path.T(a.key.path)?a instanceof Mo&&Ce(e,a)&&(i=i.ot(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.ra=function(t){return new xs(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return bn(t).get(Ws.key).next(function(t){return h(!!t),t})},t.prototype.Jo=function(t,e){return bn(t).put(Ws.key,e)},t.prototype.Xo=function(t){if(t){var e=on(this.serializer,t);return e instanceof jo&&e.version.isEqual(Gi.min())?null:e}return null},t}(),xs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ca=e,r.oa=n,r.ua=new qi(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return mi.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new Ji(function(t,e){return P(t.R(),e.R())});return this.wr.forEach(function(o,s){var a=e.ua.get(o);if(s){var u=sn(e.ca.serializer,s,e.readTime);i=i.add(o.path.h());var c=In(u);r+=c-a,n.push(e.ca.Er(t,o,u))}else if(r-=a,e.oa){var h=sn(e.ca.serializer,new jo(o,Gi.min()),e.readTime);n.push(e.ca.Er(t,o,h))}else n.push(e.ca.Ar(t,o))}),i.forEach(function(r){n.push(e.ca.Dr.Mo(t,r))}),n.push(this.ca.updateMetadata(t,r)),$o.$n(n)},e.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next(function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)})},e.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next(function(t){var e=t.sa;return t.ia.forEach(function(t,e){n.ua.set(t,e)}),e})},e}(_s),Ps=function(){function t(){this.ha=new Ms}return t.prototype.Mo=function(t,e){return this.ha.add(e),$o.resolve()},t.prototype.Qr=function(t,e){return $o.resolve(this.ha.getEntries(e))},t}(),Ms=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new Ji(Oi.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ji(Oi.i)).A()},t}(),js=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;h(n<r&&n>=0&&r<=10);var o=new ns("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Vs.store)}(t),function(t){t.createObjectStore(Fs.store,{keyPath:Fs.keyPath}),t.createObjectStore(qs.store,{keyPath:qs.keyPath,autoIncrement:!0}).createIndex(qs.userMutationsIndex,qs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Bs.store)}(t),En(t),function(t){t.createObjectStore(Hs.store)}(t));var s=$o.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Xs.store),t.deleteObjectStore(Ks.store),t.deleteObjectStore(Ys.store)}(t),En(t)),s=s.next(function(){return function(t){var e=t.store(Ys.store),n=new Ys(0,0,Gi.min().Z(),0);return e.put(Ys.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(qs.store).ts().next(function(n){t.deleteObjectStore(qs.store),t.createObjectStore(qs.store,{keyPath:qs.keyPath,autoIncrement:!0}).createIndex(qs.userMutationsIndex,qs.userMutationsKeyPath,{unique:!0});var r=e.store(qs.store),i=n.map(function(t){return r.put(t)});return $o.$n(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Qs.store,{keyPath:Qs.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Ws.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Hs.store);e.createIndex(Hs.readTimeIndex,Hs.readTimeIndexPath,{unique:!1}),e.createIndex(Hs.collectionReadTimeIndex,Hs.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Hs.store).rs(function(t,n){e+=In(n)}).next(function(){var n=new Ws(e);return t.store(Ws.store).put(Ws.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Fs.store),r=t.store(qs.store);return n.ts().next(function(n){return $o.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(qs.userMutationsIndex,i).next(function(r){return $o.forEach(r,function(r){h(r.userId===n.userId);var i=fn(e.serializer,r);return vn(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Xs.store),n=t.store(Hs.store);return t.store(Ys.store).get(Ys.key).next(function(t){var r=[];return n.rs(function(n,i){var o=new Oi(n),s=function(t){return[0,tn(t)]}(o);r.push(e.get(s).next(function(n){return n?$o.resolve():function(n){return e.put(new Xs(0,tn(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return $o.$n(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Js.store,{keyPath:Js.keyPath});var n=e.store(Js.store),r=new Ms,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:tn(i)})}};return e.store(Hs.store).rs({ss:!0},function(t,e){var n=new Oi(t);return i(n.h())}).next(function(){return e.store(Bs.store).rs({ss:!0},function(t,e){t[0];var n=t[1],r=(t[2],rn(n));return i(r.h())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Ks.store);return n.rs(function(t,r){var i=ln(r),o=pn(e.serializer,i);return n.put(o)})},t}(),Us=function(t,e){this.seconds=t,this.nanoseconds=e},Vs=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vs.store="owner",Vs.key="owner";var Fs=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Fs.store="mutationQueues",Fs.keyPath="userId";var qs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};qs.store="mutations",qs.keyPath="batchId",qs.userMutationsIndex="userMutationsIndex",qs.userMutationsKeyPath=["userId","batchId"];var Bs=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,tn(e)]},t.key=function(t,e,n){return[t,tn(e),n]},t}();Bs.store="documentMutations",Bs.PLACEHOLDER=new Bs;var Gs=function(t,e){this.path=t,this.readTime=e},zs=function(t,e){this.path=t,this.version=e},Hs=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Hs.store="remoteDocuments",Hs.readTimeIndex="readTimeIndex",Hs.readTimeIndexPath="readTime",Hs.collectionReadTimeIndex="collectionReadTimeIndex",Hs.collectionReadTimeIndexPath=["parentPath","readTime"];var Ws=function(t){this.byteSize=t};Ws.store="remoteDocumentGlobal",Ws.key="remoteDocumentGlobalKey";var Ks=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ks.store="targets",Ks.keyPath="targetId",Ks.queryTargetsIndexName="queryTargetsIndex",Ks.queryTargetsKeyPath=["canonicalId","targetId"];var Xs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Xs.store="targetDocuments",Xs.keyPath=["targetId","path"],Xs.documentTargetsIndex="documentTargetsIndex",Xs.documentTargetsKeyPath=["path","targetId"];var Ys=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ys.key="targetGlobalKey",Ys.store="targetGlobal";var Js=function(t,e){this.collectionId=t,this.parent=e};Js.store="collectionParents",Js.keyPath=["collectionId","parent"];var Qs=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Qs.store="clientMetadata",Qs.keyPath="clientId";var $s=mi.__spreadArrays(mi.__spreadArrays(mi.__spreadArrays([Fs.store,qs.store,Bs.store,Hs.store,Ks.store,Vs.store,Ys.store,Xs.store],[Qs.store]),[Ws.store]),[Js.store]),Zs=function(){function t(){this.la=new Ms}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e._(),i=e.h();t.pr(function(){n.la.add(e)});var o={collectionId:r,parent:tn(i)};return Tn(t).put(o)}return $o.resolve()},t.prototype.Qr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[j(e),""],!1,!0);return Tn(t).ts(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(rn(o.parent))}return n})},t}(),ta=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),ea=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.ma(t).next(function(n){var r=new ta(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next(function(){return n.highestTargetId})})},t.prototype.Ea=function(t){return this.ma(t).next(function(t){return Gi.J(new Bi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ia=function(t){return this.ma(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Aa=function(t,e,n){var r=this;return this.ma(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Z()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)})},t.prototype.Ra=function(t,e){var n=this;return this.ga(t,e).next(function(){return n.ma(t).next(function(r){return r.targetCount+=1,n.Pa(e,r),n.Ta(t,r)})})},t.prototype.ya=function(t,e){return this.ga(t,e)},t.prototype.Va=function(t,e){var n=this;return this.pa(t,e.targetId).next(function(){return An(t).delete(e.targetId)}).next(function(){return n.ma(t)}).next(function(e){return h(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)})},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return An(t).rs(function(s,a){var u=ln(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Va(t,u)))}).next(function(){return $o.$n(o)}).next(function(){return i})},t.prototype.Ce=function(t,e){return An(t).rs(function(t,n){var r=ln(n);e(r)})},t.prototype.ma=function(t){return Sn(t).get(Ys.key).next(function(t){return h(null!==t),t})},t.prototype.Ta=function(t,e){return Sn(t).put(Ys.key,e)},t.prototype.ga=function(t,e){return An(t).put(pn(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.ma(t).next(function(t){return t.targetCount})},t.prototype.va=function(t,e){var n=z(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return An(t).rs({range:r,index:Ks.queryTargetsIndexName},function(t,n,r){var o=ln(n);H(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=Nn(t);return e.forEach(function(e){var s=tn(e.path);i.push(o.put(new Xs(n,s))),i.push(r.No.Da(t,n,e))}),$o.$n(i)},t.prototype.Ca=function(t,e,n){var r=this,i=Nn(t);return $o.forEach(e,function(e){var o=tn(e.path);return $o.$n([i.delete([n,o]),r.No.Na(t,n,e)])})},t.prototype.pa=function(t,e){var n=Nn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Fa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Nn(t),i=$();return r.rs({range:n,ss:!0},function(t,e,n){var r=rn(t[1]),o=new Li(r);i=i.add(o)}).next(function(){return i})},t.prototype.Ho=function(t,e){var n=tn(e.path),r=IDBKeyRange.bound([n],[j(n)],!1,!0),i=0;return Nn(t).rs({index:Xs.documentTargetsIndex,ss:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Ue=function(t,e){return An(t).get(e).next(function(t){return t?ln(t):null})},t}(),na="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ra=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jo=e,r.xa=n,r}return mi.__extends(e,t),e}(Es),ia=function(){function e(n,r,i,o,a,u,c,h,f,l){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=i,this.fn=a,this.window=u,this.document=c,this.$a=f,this.ka=l,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(e){return t.resolve()},!e.Ln())throw new Si(Ai.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new oa(this,o),this.Wa=r+"main",this.serializer=new Cs(h),this.ja=new Zo(this.Wa,10,new js(this.serializer)),this.Ka=new ea(this.No,this.serializer),this.Dr=new Zs,this.vr=function(t,e){return new Rs(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===l&&s("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.Qn=function(t,e){if(t instanceof ra)return Zo.Qn(t.jo,e);throw c()},e.prototype.start=function(){var e=this;return this.za().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Si(Ai.FAILED_PRECONDITION,na);return e.Ha(),e.Ya(),e.Ja(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Ka.Ia(t)})}).then(function(t){e.Ma=new fs(t,e.$a)}).then(function(){e.Oa=!0}).catch(function(n){return e.ja&&e.ja.close(),t.reject(n)})},e.prototype.Xa=function(t){var e=this;return this.Qa=function(n){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(e){return this.Ei?[2,t(n)]:[2]})})},t(this.isPrimary)},e.prototype.Za=function(t){var e=this;this.ja.Kn(function(n){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},e.prototype.tc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws(function(){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},e.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return On(e).put(new Qs(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.ec(e).next(function(e){e||(t.isPrimary=!1,t.fn.Cs(function(){return t.Qa(!1)}))})}).next(function(){return t.nc(e)}).next(function(n){return t.isPrimary&&!n?t.sc(e).next(function(){return!1}):!!n&&t.ic(e).next(function(){return!0})})}).catch(function(e){if(Ve(e))return o("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return o("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.fn.Cs(function(){return t.Qa(e)}),t.isPrimary=e})},e.prototype.ec=function(t){var e=this;return kn(t).get(Vs.key).next(function(t){return $o.resolve(e.rc(t))})},e.prototype.oc=function(t){return On(t).delete(this.clientId)},e.prototype.ac=function(){return mi.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o=this;return mi.__generator(this,function(s){switch(s.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=e.Qn(t,Qs.store);return n.ts().next(function(t){var e=o.uc(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return $o.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(t=s.sent(),this.Ga)for(n=0,r=t;n<r.length;n++)i=r[n],this.Ga.removeItem(this.hc(i.clientId));s.label=2;case 2:return[2]}})})},e.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,function(){return t.za().then(function(){return t.ac()}).then(function(){return t.Ja()})})},e.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.nc=function(t){var e=this;return this.ka?$o.resolve(!0):kn(t).get(Vs.key).next(function(n){if(null!==n&&e.cc(n.leaseTimestampMs,5e3)&&!e.lc(n.ownerId)){if(e.rc(n)&&e.networkEnabled)return!0;if(!e.rc(n)){if(!n.allowTabSynchronization)throw new Si(Ai.FAILED_PRECONDITION,na);return!1}}return!(!e.networkEnabled||!e.inForeground)||On(t).ts().next(function(t){return void 0===e.uc(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&o("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},e.prototype.Di=function(){return mi.__awaiter(this,void 0,void 0,function(){var t=this;return mi.__generator(this,function(e){switch(e.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Vs.store,Qs.store],function(e){var n=new ra(e,fs.ai);return t.sc(n).next(function(){return t.oc(n)})})];case 1:return e.sent(),this.ja.close(),this.wc(),[2]}})})},e.prototype.uc=function(t,e){var n=this;return t.filter(function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)})},e.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return On(e).ts().next(function(e){return t.uc(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(e.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),e.prototype.mc=function(t){return Ls.xo(t,this.serializer,this.Dr,this.No)},e.prototype.Tc=function(){return this.Ka},e.prototype.Ec=function(){return this.vr},e.prototype.Ic=function(){return this.Dr},e.prototype.runTransaction=function(t,e,n){var r=this;o("IndexedDbPersistence","Starting transaction:",t);var i,a="readonly"===e?"readonly":"readwrite";return this.ja.runTransaction(t,a,$s,function(o){return i=new ra(o,r.Ma?r.Ma.next():fs.ai),"readwrite-primary"===e?r.ec(i).next(function(t){return!!t||r.nc(i)}).next(function(e){if(!e)throw s("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs(function(){return r.Qa(!1)}),new Si(Ai.FAILED_PRECONDITION,Is);return n(i)}).next(function(t){return r.ic(i).next(function(){return t})}):r.Ac(i).next(function(){return n(i)})}).then(function(t){return i.br(),t})},e.prototype.Ac=function(t){var e=this;return kn(t).get(Vs.key).next(function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Si(Ai.FAILED_PRECONDITION,na)})},e.prototype.ic=function(t){var e=new Vs(this.clientId,this.allowTabSynchronization,Date.now());return kn(t).put(Vs.key,e)},e.Ln=function(){return Zo.Ln()},e.prototype.sc=function(t){var e=this,n=kn(t);return n.get(Vs.key).next(function(t){return e.rc(t)?(o("IndexedDbPersistence","Releasing primary lease."),n.delete(Vs.key)):$o.resolve()})},e.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(s("Detected an update time that is in the future: "+t+" > "+n),1))},e.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws(function(){return t.inForeground="visible"===t.document.visibilityState,t.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},e.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},e.prototype.Ya=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws(function(){return e.Di()})},this.window.addEventListener("unload",this.La))},e.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},e.prototype.lc=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return o("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return s("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},e.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(t){s("Failed to set zombie client id.",t)}},e.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(t){}},e.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}(),oa=function(){function t(t,e){this.db=t,this.wo=new Ds(this,e)}return t.prototype.Po=function(t){var e=this.Rc(t);return this.db.Tc().ba(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Rc=function(t){var e=0;return this.Vo(t,function(t){e++}).next(function(){return e})},t.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},t.prototype.Vo=function(t,e){return this.gc(t,function(t,n){return e(n)})},t.prototype.Da=function(t,e,n){return Dn(t,n)},t.prototype.Na=function(t,e,n){return Dn(t,n)},t.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},t.prototype.Go=function(t,e){return Dn(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return mn(t).os(function(r){return dn(t,r,e).next(function(t){return t&&(n=!0),$o.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.Ec().ra(),i=[],o=0;return this.gc(t,function(s,a){if(a<=e){var u=n.Pc(t,s).next(function(e){if(!e)return o++,r.Rr(t,s).next(function(){return r.Ar(s),Nn(t).delete([0,tn(s.path)])})});i.push(u)}}).next(function(){return $o.$n(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.st(t.xa);return this.db.Tc().ya(t,n)},t.prototype.yc=function(t,e){return Dn(t,e)},t.prototype.gc=function(t,e){var n,r=Nn(t),i=fs.ai;return r.rs({index:Xs.documentTargetsIndex},function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==fs.ai&&e(new Li(rn(n)),i),i=a,n=s):i=fs.ai}).next(function(){i!==fs.ai&&e(new Li(rn(n)),i)})},t.prototype.So=function(t){return this.db.Ec().aa(t)},t}(),sa=function(){function t(t,e,n){this.persistence=t,this.Vc=e,this.bc=new Ki(P),this.vc=new qi(function(t){return z(t)},H),this.Sc=Gi.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new Ts(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.vo(n,e.bc)})},t}(),aa=function(){function t(){this.$c=new Ji(ua.kc),this.Mc=new Ji(ua.Oc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Da=function(t,e){var n=new ua(t,e);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},t.prototype.Lc=function(t,e){var n=this;t.forEach(function(t){return n.Da(t,e)})},t.prototype.Na=function(t,e){this.Bc(new ua(t,e))},t.prototype.qc=function(t,e){var n=this;t.forEach(function(t){return n.Na(t,e)})},t.prototype.Uc=function(t){var e=this,n=new Li(new Oi([])),r=new ua(n,t),i=new ua(n,t+1),o=[];return this.Mc.Ft([r,i],function(t){e.Bc(t),o.push(t.key)}),o},t.prototype.Qc=function(){var t=this;this.$c.forEach(function(e){return t.Bc(e)})},t.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},t.prototype.Wc=function(t){var e=new Li(new Oi([])),n=new ua(e,t),r=new ua(e,t+1),i=$();return this.Mc.Ft([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Ho=function(t){var e=new ua(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),ua=function(){function t(t,e){this.key=t,this.jc=e}return t.kc=function(t,e){return Li.i(t.key,e.key)||P(t.jc,e.jc)},t.Oc=function(t,e){return P(t.jc,e.jc)||Li.i(t.key,e.key)},t}(),ca=function(t,e){this.user=e,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+t},ha=function(){function e(){this.Gc=null}return e.prototype.getToken=function(){return t.resolve(null)},e.prototype.zc=function(){},e.prototype.Hc=function(t){this.Gc=t,t(hs.UNAUTHENTICATED)},e.prototype.Yc=function(){this.Gc=null},e}(),fa=function(){function e(t){var e=this;this.Jc=null,this.currentUser=hs.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then(function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)},function(){}))}return e.prototype.getToken=function(){var e=this,n=this.Zc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(t){return e.Zc!==n?(o("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(h("string"==typeof t.accessToken),new ca(t.accessToken,e.currentUser)):null}):t.resolve(null)},e.prototype.zc=function(){this.forceRefresh=!0},e.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},e.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},e.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return h(null===t||"string"==typeof t),new hs(t)},e}(),la=function(){function t(t,e){this.eu=t,this.nu=e,this.type="FirstParty",this.user=hs.ni}return Object.defineProperty(t.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),pa=function(){function e(t,e){this.eu=t,this.nu=e}return e.prototype.getToken=function(){return t.resolve(new la(this.eu,this.nu))},e.prototype.Hc=function(t){t(hs.ni)},e.prototype.Yc=function(){},e.prototype.zc=function(){},e}(),da=function(){function e(t,e,n,r,i,o){this.fn=t,this.su=n,this.iu=r,this.ru=i,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new Qo(t,e)}return e.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.uu=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.hu()},e.prototype.stop=function(){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.lu=function(){this.state=0,this.ys.reset()},e.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,function(){return t.fu()}))},e.prototype.du=function(t){this.wu(),this.stream.send(t)},e.prototype.fu=function(){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(t){return this.uu()?[2,this.close(0)]:[2]})})},e.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},e.prototype.close=function(t,e){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(n){switch(n.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==t?this.ys.reset():e&&e.code===Ai.RESOURCE_EXHAUSTED?(s(e.toString()),s("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===Ai.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},e.prototype.mu=function(){},e.prototype.auth=function(){var t=this;this.state=1;var e=this.Eu(this.ou),n=this.ou;this.ru.getToken().then(function(e){t.ou===n&&t.Iu(e)},function(n){e(function(){var e=new Si(Ai.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Au(e)})})},e.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu(function(){n(function(){return e.state=2,e.listener.gu()})}),this.stream.Tu(function(t){n(function(){return e.Au(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},e.prototype.hu=function(){var t=this;this.state=4,this.ys.gn(function(){return mi.__awaiter(t,void 0,void 0,function(){return mi.__generator(this,function(t){return this.state=0,this.start(),[2]})})})},e.prototype.Au=function(t){return o("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.Eu=function(e){var n=this;return function(r){n.fn.ws(function(){return n.ou===e?r():(o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),t.resolve())})}},e}(),va=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return mi.__extends(e,t),e.prototype.Ru=function(t){return this.iu.Pu("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:c()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Qe?(h(void 0===e||"string"==typeof e),xi.fromBase64String(e||"")):(h(void 0===e||e instanceof Uint8Array),xi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Ai.UNKNOWN:X(t.code);return new Si(e,t.message||"")}(s);n=new ho(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var f=Ct(t,u.document.name),l=Nt(u.document.updateTime),p=new Ro({mapValue:{fields:u.document.fields}}),d=new Mo(f,l,p,{}),v=u.targetIds||[],y=u.removedTargetIds||[];n=new uo(v,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;var g=e.documentDelete;g.document;var m=Ct(t,g.document),b=g.readTime?Nt(g.readTime):Gi.min(),w=new jo(m,b),_=g.removedTargetIds||[];n=new uo([],_,w.key,w)}else if("documentRemove"in e){e.documentRemove;var I=e.documentRemove;I.document;var E=Ct(t,I.document),T=I.removedTargetIds||[];n=new uo([],T,E,null)}else{if(!("filter"in e))return c();e.filter;var A=e.filter;A.targetId;var S=A.count||0,N=new Wi(S),k=A.targetId;n=new co(k,N)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Gi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gi.min():e.readTime?Nt(e.readTime):Gi.min()}(t);return this.listener.yu(e,n)},e.prototype.Vu=function(t){var e={};e.database=xt(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=W(r)?{documents:Vt(t,r)}:{query:Ft(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=At(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return c()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.du(e)},e.prototype.pu=function(t){var e={};e.database=xt(this.serializer),e.removeTarget=t,this.du(e)},e}(da),ya=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.bu=!1,s}return mi.__extends(e,t),Object.defineProperty(e.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mu=function(){this.bu&&this.Su([])},e.prototype.Ru=function(t){return this.iu.Pu("Write",t)},e.prototype.onMessage=function(t){if(h(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=function(t,e){return t&&t.length>0?(h(void 0!==e),t.map(function(t){return function(t,e){var n=Nt(t.updateTime?t.updateTime:e);n.isEqual(Gi.min())&&(n=Nt(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ao(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Nt(t.commitTime);return this.listener.Du(n,e)}return h(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},e.prototype.Nu=function(){var t={};t.database=xt(this.serializer),this.du(t)},e.prototype.Su=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return jt(e.serializer,t)})};this.du(n)},e}(da),ga=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.iu=n,i.serializer=r,i.Fu=!1,i}return mi.__extends(e,t),e.prototype.xu=function(){if(this.Fu)throw new Si(Ai.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.$u=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then(function(i){return r.iu.$u(t,e,n,i)}).catch(function(t){throw t.code===Ai.UNAUTHENTICATED&&r.credentials.zc(),t})},e.prototype.ku=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then(function(i){return r.iu.ku(t,e,n,i)}).catch(function(t){throw t.code===Ai.UNAUTHENTICATED&&r.credentials.zc(),t})},e.prototype.terminate=function(){this.Fu=!1},e}(function(){}),ma=function(){function e(t,e){this.cs=t,this.di=e,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return e.prototype.Bu=function(){var e=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,function(){return e.Ou=null,e.Uu("Backend didn't respond within 10 seconds."),e.qu("Offline"),t.resolve()}))},e.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):++this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline"))},e.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},e.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},e.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(s(e),this.Lu=!1):o("OnlineStateTracker",e)},e.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},e}(),ba=function(t,e,n,r,i){var s=this;this.ju=t,this.Ku=e,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=i,this.Xu.Zu(function(t){n.ws(function(){return mi.__awaiter(s,void 0,void 0,function(){return mi.__generator(this,function(t){switch(t.label){case 0:return $n(this)?(o("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return mi.__awaiter(this,void 0,void 0,function(){var e;return mi.__generator(this,function(n){switch(n.label){case 0:return(e=f(t)).Yu.add(4),[4,zn(e)];case 1:return n.sent(),e.th.set("Unknown"),e.Yu.delete(4),[4,Gn(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.th=new ma(n,r)},wa=function(t){this.key=t},_a=function(t){this.key=t},Ia=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=$(),this.Wt=$(),this._h=Le(t),this.fh=new ro(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.mh:new io,i=e?e.fh:this.fh,o=e?e.Wt:this.Wt,s=i,a=!1,u=me(this.query)&&i.size===this.query.limit?i.last():null,c=be(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht(function(t,e){var h=i.get(t),f=e instanceof Mo?e:null;f&&(f=Ce(n.query,f)?f:null);var l=!!h&&n.Wt.has(h.key),p=!!f&&(f.Je||n.Wt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Th(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n._h(f,u)>0||c&&n._h(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),me(this.query)||be(this.query))for(;s.size>this.query.limit;){var h=me(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fh:s,mh:r,Eh:a,Wt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.yr=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Wt=t.Wt;var o=t.mh.Ut();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return c()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)}),this.Ih(n);var s=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,u=a!==this.hh;return this.hh=a,0!==o.length||u?{snapshot:new oo(this.query,t.fh,i,o,t.Wt,0===a,u,!1),Rh:s}:{Rh:s}},t.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new io,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},t.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach(function(t){return e.uh=e.uh.add(t)}),t.ne.forEach(function(t){}),t.se.forEach(function(t){return e.uh=e.uh.delete(t)}),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=$(),this.fh.forEach(function(e){t.gh(e.key)&&(t.lh=t.lh.add(e.key))});var n=[];return e.forEach(function(e){t.lh.has(e)||n.push(new _a(e))}),this.lh.forEach(function(t){e.has(t)||n.push(new wa(t))}),n},t.prototype.Ph=function(t){this.uh=t.Fc,this.lh=$();var e=this.wh(t.documents);return this.yr(e,!0)},t.prototype.yh=function(){return oo.Gt(this.query,this.fh,this.Wt,0===this.hh)},t}(),Ea=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ta=function(t){this.key=t,this.Vh=!1},Aa=function(){function t(t,e,n,r,i,o){this.ju=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new qi(function(t){return Oe(t)},ke),this.Fh=new Map,this.xh=[],this.$h=new Ki(Li.i),this.kh=new Map,this.Mh=new aa,this.Oh={},this.Lh=new Map,this.Bh=ta.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}(),Sa=function(){function t(){}return t.prototype.Nc=function(t){this.zh=t},t.prototype.Lr=function(t,e,n,r){var s=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.p())}(e)||n.isEqual(Gi.min())?this.Hh(t,e):this.zh.kr(t,r).next(function(a){var u=s.Yh(e,a);return(me(e)||be(e))&&s.Eh(e.an,u,r,n)?s.Hh(t,e):(i()<=wi.LogLevel.DEBUG&&o("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),De(e)),s.zh.Lr(t,e,n).next(function(t){return u.forEach(function(e){t=t.ot(e.key,e)}),t}))})},t.prototype.Yh=function(t,e){var n=new Ji(Le(t));return e.forEach(function(e,r){r instanceof Mo&&Ce(t,r)&&(n=n.add(r))}),n},t.prototype.Eh=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Hh=function(t,e){return i()<=wi.LogLevel.DEBUG&&o("IndexFreeQueryEngine","Using full collection scan to execute query:",De(e)),this.zh.Lr(t,e,Gi.min())},t}(),Na=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new Ji(ua.kc)}return t.prototype.$o=function(t){return $o.resolve(0===this.Sr.length)},t.prototype.ko=function(t,e,n,r){var i=this.Jh;this.Jh++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new bs(i,e,n,r);this.Sr.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Xh=this.Xh.add(new ua(u.key,i)),this.Dr.Mo(t,u.key.path.h())}return $o.resolve(o)},t.prototype.Oo=function(t,e){return $o.resolve(this.Zh(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return $o.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return $o.resolve(0===this.Sr.length?-1:this.Jh-1)},t.prototype.Uo=function(t){return $o.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new ua(e,0),i=new ua(e,Number.POSITIVE_INFINITY),o=[];return this.Xh.Ft([r,i],function(t){var e=n.Zh(t.jc);o.push(e)}),$o.resolve(o)},t.prototype.Or=function(t,e){var n=this,r=new Ji(P);return e.forEach(function(t){var e=new ua(t,0),i=new ua(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,i],function(t){r=r.add(t.jc)})}),$o.resolve(this.el(r))},t.prototype.Wr=function(t,e){var n=e.path,r=n.length+1,i=n;Li.F(i)||(i=i.child(""));var o=new ua(new Li(i),0),s=new Ji(P);return this.Xh.xt(function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(s=s.add(t.jc)),!0)},o),$o.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.Zh(t);null!==r&&n.push(r)}),n},t.prototype.Wo=function(t,e){var n=this;h(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xh;return $o.forEach(e.mutations,function(i){var o=new ua(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)}).next(function(){n.Xh=r})},t.prototype.Ko=function(t){},t.prototype.Ho=function(t,e){var n=new ua(e,0),r=this.Xh.$t(n);return $o.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,$o.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zh=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),ka=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new Ki(Li.i),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.h())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return $o.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=J();return e.forEach(function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)}),$o.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=Q(),i=new Li(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.key,u=s.value,c=u.ta,h=u.readTime;if(!e.path.T(a.path))break;h.L(n)<=0||c instanceof Mo&&Ce(e,c)&&(r=r.ot(c.key,c))}return $o.resolve(r)},t.prototype.il=function(t,e){return $o.forEach(this.docs,function(t){return e(t)})},t.prototype.ra=function(t){return new Oa(this)},t.prototype.aa=function(t){return $o.resolve(this.size)},t}(),Oa=function(t){function e(e){var n=this;return(n=t.call(this)||this).ca=e,n}return mi.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[];return this.wr.forEach(function(r,i){i?n.push(e.ca.Er(t,i,e.readTime)):e.ca.Ar(r)}),$o.$n(n)},e.prototype.gr=function(t,e){return this.ca.Rr(t,e)},e.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},e}(_s),Da=function(){function t(t){this.persistence=t,this.rl=new qi(function(t){return z(t)},H),this.lastRemoteSnapshotVersion=Gi.min(),this.highestTargetId=0,this.ol=0,this.al=new aa,this.targetCount=0,this.cl=ta.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach(function(t,n){return e(n)}),$o.resolve()},t.prototype.Ea=function(t){return $o.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ia=function(t){return $o.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),$o.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),$o.resolve()},t.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new ta(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,$o.resolve()},t.prototype.ya=function(t,e){return this.ga(e),$o.resolve()},t.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),this.targetCount-=1,$o.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.rl.delete(s),o.push(r.pa(t,a.targetId)),i++)}),$o.$n(o).next(function(){return i})},t.prototype.ba=function(t){return $o.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return $o.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),$o.resolve()},t.prototype.Ca=function(t,e,n){this.al.qc(e,n);var r=this.persistence.No,i=[];return r&&e.forEach(function(e){i.push(r.Go(t,e))}),$o.$n(i)},t.prototype.pa=function(t,e){return this.al.Uc(e),$o.resolve()},t.prototype.Fa=function(t,e){var n=this.al.Wc(e);return $o.resolve(n)},t.prototype.Ho=function(t,e){return $o.resolve(this.al.Ho(e))},t}(),Ca=function(){function e(t){var e=this;this.ul={},this.Ma=new fs(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new Da(this),this.Dr=new Ps,this.vr=function(t,n){return new ka(t,function(t){return e.No.hl(t)})}(this.Dr)}return e.prototype.start=function(){return t.resolve()},e.prototype.Di=function(){return this.Oa=!1,t.resolve()},Object.defineProperty(e.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),e.prototype.Za=function(){},e.prototype.tc=function(){},e.prototype.Ic=function(){return this.Dr},e.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new Na(this.Dr,this.No),this.ul[t.ti()]=e),e},e.prototype.Tc=function(){return this.Ka},e.prototype.Ec=function(){return this.vr},e.prototype.runTransaction=function(t,e,n){var r=this;o("MemoryPersistence","Starting transaction:",t);var i=new La(this.Ma.next());return this.No.ll(),n(i).next(function(t){return r.No._l(i).next(function(){return t})}).Fn().then(function(t){return i.br(),t})},e.prototype.fl=function(t,e){return $o.kn(Object.values(this.ul).map(function(n){return function(){return n.Ho(t,e)}}))},e}(),La=function(t){function e(e){var n=this;return(n=t.call(this)||this).xa=e,n}return mi.__extends(e,t),e}(Es),Ra=function(){function t(t){this.persistence=t,this.dl=new aa,this.wl=null}return t.ml=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw c()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),$o.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),$o.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),$o.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach(function(t){return n.Tl.add(t.toString())});var r=this.persistence.Tc();return r.Fa(t,e.targetId).next(function(t){t.forEach(function(t){return n.Tl.add(t.toString())})}).next(function(){return r.Va(t,e)})},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.Ec().ra();return $o.forEach(this.Tl,function(r){var i=Li.D(r);return e.El(t,i).next(function(t){t||n.Ar(i)})}).next(function(){return e.wl=null,n.apply(t)})},t.prototype.yc=function(t,e){var n=this;return this.El(t,e).next(function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())})},t.prototype.hl=function(t){return 0},t.prototype.El=function(t,e){var n=this;return $o.kn([function(){return $o.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),xa=function(){function t(t){this.Il=t.Il,this.Al=t.Al}return t.prototype.gu=function(t){this.Rl=t},t.prototype.Tu=function(t){this.gl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.Il(t)},t.prototype.yl=function(){this.Rl()},t.prototype.Vl=function(t){this.gl(t)},t.prototype.pl=function(t){this.Pl(t)},t}(),Pa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ma=function(e){function n(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.W=t.W,n}return mi.__extends(n,e),n.prototype.Nl=function(e,n,r,i){return new t(function(t,s){var a=new Ii.XhrIo;a.listenOnce(Ii.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Ii.ErrorCode.NO_ERROR:var n=a.getResponseJson();o("Connection","XHR received:",JSON.stringify(n)),t(n);break;case Ii.ErrorCode.TIMEOUT:o("Connection",'RPC "'+e+'" timed out'),s(new Si(Ai.DEADLINE_EXCEEDED,"Request time out"));break;case Ii.ErrorCode.HTTP_ERROR:var r=a.getStatus();if(o("Connection",'RPC "'+e+'" failed with status:',r,"response text:",a.getResponseText()),r>0){var i=a.getResponseJson().error;if(i&&i.status&&i.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Ai).indexOf(e)>=0?e:Ai.UNKNOWN}(i.status);s(new Si(u,i.message))}else s(new Si(Ai.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Si(Ai.UNAVAILABLE,"Connection failed."));break;default:c()}}finally{o("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(i);a.send(n,"POST",u,r,15)})},n.prototype.Pu=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Ii.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(i.initMessageHeaders,e),_i.isMobileCordova()||_i.isReactNative()||_i.isElectron()||_i.isIE()||_i.isUWP()||_i.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");o("Connection","Creating WebChannel: "+s,i);var u=r.createWebChannel(s,i),c=!1,f=!1,l=new xa({Il:function(t){f?o("Connection","Not sending because WebChannel is closed:",t):(c||(o("Connection","Opening WebChannel transport."),u.open(),c=!0),o("Connection","WebChannel sending:",t),u.send(t))},Al:function(){return u.close()}}),p=function(t,e){u.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return p(Ii.WebChannel.EventType.OPEN,function(){f||o("Connection","WebChannel transport opened.")}),p(Ii.WebChannel.EventType.CLOSE,function(){f||(f=!0,o("Connection","WebChannel transport closed"),l.Vl())}),p(Ii.WebChannel.EventType.ERROR,function(t){f||(f=!0,a("Connection","WebChannel transport errored:",t),l.Vl(new Si(Ai.UNAVAILABLE,"The operation could not be completed")))}),p(Ii.WebChannel.EventType.MESSAGE,function(t){var e;if(!f){var n=t.data[0];h(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){o("Connection","WebChannel received error:",i);var s=i.status,a=function(t){var e=Pi[t];if(void 0!==e)return X(e)}(s),c=i.message;void 0===a&&(a=Ai.INTERNAL,c="Unknown error status: "+s+" with message "+i.message),f=!0,l.Vl(new Si(a,c)),u.close()}else o("Connection","WebChannel received:",n),l.pl(n)}}),setTimeout(function(){l.yl()},0),l},n}(function(){function t(t){this.bl=t,this.U=t.U;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.$u=function(t,e,n,r){var i=this.Dl(t,e);o("RestConnection","Sending: ",i,n);var s={};return this.Cl(s,r),this.Nl(t,i,s,n).then(function(t){return o("RestConnection","Received: ",t),t},function(e){throw a("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.ku=function(t,e,n,r){return this.$u(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},t.prototype.Dl=function(t,e){var n=Pa[t];return this.vl+"/v1/"+e+":"+n},t}()),ja=function(){function t(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return t.prototype.Zu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},t.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},t.prototype.xl=function(){o("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.kl=function(){o("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ua=function(){function t(){}return t.prototype.Zu=function(t){},t.prototype.Di=function(){},t}(),Va="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Fa=function(){function t(){}return t.prototype.initialize=function(t){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(e){switch(e.label){case 0:return this.Sh=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.ju=this.Ql(t),[2]}})})},t.prototype.Ul=function(t){return null},t.prototype.Ql=function(t){return e=this.persistence,n=new Sa,r=t.Wl,new sa(e,n,r);var e,n,r},t.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new Si(Ai.FAILED_PRECONDITION,Va);return new Ca(Ra.ml)},t.prototype.Ll=function(t){return new ms},t.prototype.terminate=function(){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}})})},t.prototype.clearPersistence=function(t,e){throw new Si(Ai.FAILED_PRECONDITION,Va)},t}(),qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.initialize=function(e){return mi.__awaiter(this,void 0,void 0,function(){var n,r=this;return mi.__generator(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Kl.fi,this.Sh instanceof gs?(this.Sh.fi={er:xr.bind(null,n),nr:Vr.bind(null,n),sr:Fr.bind(null,n),pi:Ur.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Xa(function(t){return mi.__awaiter(r,void 0,void 0,function(){return mi.__generator(this,function(e){switch(e.label){case 0:return[4,Pr(this.Kl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ei?this.ql.start(this.ju):t||this.ql.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=Be();if(!gs.Ln(e))throw new Si(Ai.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Cn(t.bl.U,t.bl.persistenceKey);return new gs(e,t.cs,n,t.clientId,t.Wl)}return new ms},e}(function(e){function n(t){var n=this;return(n=e.call(this)||this).Kl=t,n}return mi.__extends(n,e),n.prototype.initialize=function(t){return mi.__awaiter(this,void 0,void 0,function(){return mi.__generator(this,function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,qn(this.ju)];case 2:return n.sent(),[4,this.Kl.initialize(this,t)];case 3:return n.sent(),[4,Br(this.Kl.fi)];case 4:return n.sent(),[4,or(this.Kl.ph)];case 5:return n.sent(),[2]}})})},n.prototype.Ul=function(t){var e=this.persistence.No.wo;return new Os(e,t.cs)},n.prototype.Bl=function(t){var e=Cn(t.bl.U,t.bl.persistenceKey),n=Gr(t.bl.U);return new ia(t.persistenceSettings.synchronizeTabs,e,t.clientId,ks.ao(t.persistenceSettings.cacheSizeBytes),t.cs,Be(),Ge(),n,this.Sh,t.persistenceSettings.ka)},n.prototype.Ll=function(t){return new ms},n.prototype.clearPersistence=function(e,n){return function(e){return mi.__awaiter(this,void 0,void 0,function(){var n;return mi.__generator(this,function(r){switch(r.label){case 0:return Zo.Ln()?(n=e+"main",[4,Zo.delete(n)]):[2,t.resolve()];case 1:return r.sent(),[2]}})})}(Cn(e,n))},n}(Fa)),Ba=function(){function t(){}return t.prototype.initialize=function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n=this;return mi.__generator(this,function(r){switch(r.label){case 0:return this.ju?[3,2]:(this.ju=t.ju,this.Sh=t.Sh,this.Ku=this.Gl(e),this.ph=this.zl(e),this.bh=this.Hl(e),this.fi=this.Yl(e),this.Sh.di=function(t){return br(n.fi,t,1)},this.ph.Gu.Jl=Cr.bind(null,this.fi),[4,lr(this.ph,this.fi.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.Hl=function(t){return new us},t.prototype.Gl=function(t){var e,n=Gr(t.bl.U),r=(e=t.bl,new Ma(e));return function(t,e,n){return new ga(t,e,n)}(t.credentials,r,n)},t.prototype.zl=function(t){var e,n,r,i,o,s=this;return e=this.ju,n=this.Ku,r=t.cs,i=function(t){return br(s.fi,t,0)},o=ja.Ln()?new ja:new Ua,new ba(e,n,r,i,o)},t.prototype.Yl=function(t){return function(t,e,n,r,i,o,s){var a=new Aa(t,e,n,r,i,o);return s&&(a.qh=!0),a}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return Hn(this.ph)},t}(),Ga=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Zl=function(){this.muted=!0},t.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),za=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Si(Ai.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+R(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(b("FieldPath","string",e,t[e]),0===t[e].length)throw new Si(Ai.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new Ci(t)},Ha=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return mi.__extends(e,t),e.documentId=function(){return new e(Ci.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw D("isEqual","FieldPath",1,t);return this.t_.isEqual(t.t_)},e}(za),Wa=new RegExp("[~\\*/\\[\\]]"),Ka=function(t){this.e_=t},Xa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.n_=function(t){if(2!==t.s_)throw 1===t.s_?t.i_(this.e_+"() can only appear at the top level of your update data"):t.i_(this.e_+"() cannot be used with set() unless you pass {merge:true}");return t.We.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ka),Ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.n_=function(t){return new To(t.path,new bo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ka),Ja=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return mi.__extends(e,t),e.prototype.n_=function(t){var e=zr(this,t,!0),n=this.a_.map(function(t){return Jr(t,e)}),r=new wo(n);return new To(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ka),Qa=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return mi.__extends(e,t),e.prototype.n_=function(t){var e=zr(this,t,!0),n=this.a_.map(function(t){return Jr(t,e)}),r=new _o(n);return new To(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ka),$a=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).c_=n,r}return mi.__extends(e,t),e.prototype.n_=function(t){var e=new Io(t.serializer,Et(t.serializer,this.c_));return new To(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ka),Za=function(){function t(t,e){if(y("GeoPoint",arguments,2),b("GeoPoint","number",1,t),b("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Si(Ai.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Si(Ai.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.u_=t,this.h_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},t.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},t.prototype.Y=function(t){return P(this.u_,t.u_)||P(this.h_,t.h_)},t}(),tu=function(t){this.l_=t},eu=/^__.*__$/,nu=function(t,e,n){this.__=t,this.f_=e,this.d_=n},ru=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[];return null!==this.We?n.push(new Oo(t,this.data,this.We,e)):n.push(new ko(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Do(t,this.fieldTransforms)),n},t}(),iu=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[new Oo(t,this.data,this.We,e)];return this.fieldTransforms.length>0&&n.push(new Do(t,this.fieldTransforms)),n},t}(),ou=function(){function t(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),t.prototype.T_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.I_(t),r},t.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.m_(),r},t.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},t.prototype.i_=function(t){return ni(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},t.prototype.contains=function(t){return void 0!==this.We.find(function(e){return t.T(e)})||void 0!==this.fieldTransforms.find(function(e){return t.T(e.field)})},t.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(Hr(this.s_)&&eu.test(t))throw this.i_('Document fields cannot begin and end with "__"')},t}(),su=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||Gr(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new ou({s_:t,methodName:e,r_:n,path:Ci.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}(),au=function(){function t(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return t.prototype.v_=function(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n=this;return mi.__generator(this,function(r){switch(r.label){case 0:if(this.S_(),this.mutations.length>0)throw new Si(Ai.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a;return mi.__generator(this,function(u){switch(u.label){case 0:return n=f(t),r=xt(n.serializer)+"/documents",i={documents:e.map(function(t){return Dt(n.serializer,t)})},[4,n.ku("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){h(!!e.found),e.found.name,e.found.updateTime;var n=Ct(t,e.found.name),r=Nt(e.found.updateTime),i=new Ro({mapValue:{fields:e.found.fields}});return new Mo(n,r,i,{})}(t,e):"missing"in e?function(t,e){h(!!e.missing),h(!!e.readTime);var n=Ct(t,e.missing),r=Nt(e.readTime);return new jo(n,r)}(t,e):c()}(n.serializer,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());h(!!e),a.push(e)}),a)]}})})}(this.Ku,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof jo||t instanceof Mo?n.D_(t):c()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},t.prototype.delete=function(t){this.write([new Co(t,this.Ge(t))]),this.b_.add(t.toString())},t.prototype.commit=function(){return mi.__awaiter(this,void 0,void 0,function(){var t,e=this;return mi.__generator(this,function(n){switch(n.label){case 0:if(this.S_(),this.p_)throw this.p_;return t=this.y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Li.D(n);e.mutations.push(new Lo(r,e.Ge(r)))}),[4,function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i;return mi.__generator(this,function(o){switch(o.label){case 0:return n=f(t),r=xt(n.serializer)+"/documents",i={writes:e.map(function(t){return jt(n.serializer,t)})},[4,n.$u("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Ku,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}})})},t.prototype.D_=function(t){var e;if(t instanceof Mo)e=t.version;else{if(!(t instanceof jo))throw c();e=Gi.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Si(Ai.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?So.updateTime(e):So.ze()},t.prototype.C_=function(t){var e=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&e){if(e.isEqual(Gi.min()))throw new Si(Ai.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return So.updateTime(e)}return So.exists(!0)},t.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},t.prototype.S_=function(){},t}(),uu=function(){function e(t,e,n,r){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new Qo(this.cs,"transaction_retry")}return e.prototype.run=function(){this.F_()},e.prototype.F_=function(){var t=this;this.ys.gn(function(){return mi.__awaiter(t,void 0,void 0,function(){var t,e,n=this;return mi.__generator(this,function(r){return t=new au(this.Ku),(e=this.x_(t))&&e.then(function(e){n.cs.ws(function(){return t.commit().then(function(){n.ls.resolve(e)}).catch(function(t){n.k_(t)})})}).catch(function(t){n.k_(t)}),[2]})})})},e.prototype.x_=function(t){try{var e=this.updateFunction(t);return!F(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},e.prototype.k_=function(e){var n=this;this.N_>0&&this.M_(e)?(this.N_-=1,this.cs.ws(function(){return n.F_(),t.resolve()})):this.ls.reject(e)},e.prototype.M_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!K(e)}return!1},e}(),cu=function(){function e(t,e){this.credentials=t,this.cs=e,this.clientId=Ri.k(),this.O_=new Jo}return e.prototype.start=function(t,e,n,r){var i=this;this.L_(),this.bl=t;var s=new Jo,a=!1;return this.credentials.Hc(function(t){if(!a)return a=!0,o("FirestoreClient","Initializing. user=",t.uid),i.B_(e,n,r,t,s).then(i.O_.resolve,i.O_.reject);i.cs.Cs(function(){return function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r;return mi.__generator(this,function(i){switch(i.label){case 0:return(n=f(t)).cs.xs(),o("RemoteStore","RemoteStore received new credentials"),r=$n(n),n.Yu.add(3),[4,zn(n)];case 1:return i.sent(),r&&n.th.set("Unknown"),[4,n.Gu.Jl(e)];case 2:return i.sent(),n.Yu.delete(3),[4,Gn(n)];case 3:return i.sent(),[2]}})})}(i.ph,t)})}),this.cs.ws(function(){return i.O_.promise}),s.promise},e.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue(function(){return t.persistence.tc(!0),function(t){var e=f(t);return e.Yu.delete(0),Gn(e)}(t.ph)})},e.prototype.B_=function(t,e,n,r,i){return mi.__awaiter(this,void 0,void 0,function(){var o,s,a=this;return mi.__generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),o={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:r,Dh:100,persistenceSettings:n},[4,t.initialize(o)];case 1:return u.sent(),[4,e.initialize(t,o)];case 2:return u.sent(),this.persistence=t.persistence,this.Sh=t.Sh,this.ju=t.ju,this.ql=t.ql,this.Ku=e.Ku,this.ph=e.ph,this.fi=e.fi,this.q_=e.bh,this.q_.Us=vr.bind(null,this.fi),this.q_.js=gr.bind(null,this.fi),this.persistence.Za(function(){return mi.__awaiter(a,void 0,void 0,function(){return mi.__generator(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),i.resolve(),[3,4];case 3:if(s=u.sent(),i.reject(s),!this.U_(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.B_(new Fa,new Ba,{jl:!1},r,i))];case 4:return[2]}})})},e.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===Ai.FAILED_PRECONDITION||t.code===Ai.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},e.prototype.L_=function(){if(this.cs.ps)throw new Si(Ai.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue(function(){return t.persistence.tc(!1),function(t){return mi.__awaiter(this,void 0,void 0,function(){var e;return mi.__generator(this,function(n){switch(n.label){case 0:return(e=f(t)).Yu.add(0),[4,zn(e)];case 1:return n.sent(),e.th.set("Offline"),[2]}})})}(t.ph)})},e.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new Jo;return this.cs.bs(function(){return mi.__awaiter(t,void 0,void 0,function(){var t,n;return mi.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Hn(this.ph)];case 1:return r.sent(),[4,this.Sh.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yc(),e.resolve(),[3,5];case 4:return t=r.sent(),n=ze(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}})})}),e.promise},e.prototype.waitForPendingWrites=function(){var t=this;this.L_();var e=new Jo;return this.cs.ws(function(){return function(t,e){return mi.__awaiter(this,void 0,void 0,function(){var n,r,i,s,a;return mi.__generator(this,function(u){switch(u.label){case 0:$n((n=f(t)).ph)||o("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=f(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Sr.qo(t)})}(n.ju)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Lh.get(r)||[]).push(e),n.Lh.set(r,i),[3,4]);case 3:return s=u.sent(),a=ze(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}})})}(t.fi,e)}),e.promise},e.prototype.listen=function(t,e,n){var r=this;this.L_();var i=new Ga(n),o=new cs(t,i,e);return this.cs.ws(function(){return He(r.q_,o)}),function(){i.Zl(),r.cs.ws(function(){return We(r.q_,o)})}},e.prototype.Q_=function(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n=this;return mi.__generator(this,function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),e=new Jo,[2,(this.cs.ws(function(){return function(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,o;return mi.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=f(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Cc.Cr(t,e)})}(t,e)];case 1:return(r=s.sent())instanceof Mo?n.resolve(r):r instanceof jo?n.resolve(null):n.reject(new Si(Ai.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=ze(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}})})}(n.ju,t,e)}),e.promise)]}})})},e.prototype.W_=function(t,e){return void 0===e&&(e={}),mi.__awaiter(this,void 0,void 0,function(){var n,r=this;return mi.__generator(this,function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),n=new Jo,[2,(this.cs.ws(function(){return function(t,e,n,r,i){var o=new Ga({next:function(o){e.ws(function(){return We(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Si(Ai.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Si(Ai.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new cs(ge(n.path),o,{includeMetadataChanges:!0,Xs:!0});return He(t,s)}(r.q_,r.cs,t,e,n)}),n.promise)]}})})},e.prototype.j_=function(t){return mi.__awaiter(this,void 0,void 0,function(){var e,n=this;return mi.__generator(this,function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),e=new Jo,[2,(this.cs.ws(function(){return function(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,o,s,a,u;return mi.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Un(t,e,!0)];case 1:return r=c.sent(),i=new Ia(e,r.Fc),o=i.wh(r.documents),s=i.yr(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=ze(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}})})}(n.ju,t,e)}),e.promise)]}})})},e.prototype.K_=function(t,e){return void 0===e&&(e={}),mi.__awaiter(this,void 0,void 0,function(){var n,r=this;return mi.__generator(this,function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),n=new Jo,[2,(this.cs.ws(function(){return function(t,e,n,r,i){var o=new Ga({next:function(n){e.ws(function(){return We(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Si(Ai.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new cs(n,o,{includeMetadataChanges:!0,Xs:!0});return He(t,s)}(r.q_,r.cs,t,e,n)}),n.promise)]}})})},e.prototype.write=function(t){var e=this;this.L_();var n=new Jo;return this.cs.ws(function(){return function(t,e,n){return mi.__awaiter(this,void 0,void 0,function(){var r,i,o,s;return mi.__generator(this,function(a){switch(a.label){case 0:r=Br(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=f(t),i=Bi.now(),o=e.reduce(function(t,e){return t.add(e.key)},$());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Cc.kr(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=ce(c,n.get(c.key));null!=h&&s.push(new Oo(c.key,h,ve(h.proto.mapValue),So.exists(!0)))}return r.Sr.ko(t,i,s,e)})}).then(function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}})}(r.ju,e)];case 2:return i=a.sent(),r.Sh.xi(i.batchId),function(t,e,n){var r=t.Oh[t.currentUser.ti()];r||(r=new Ki(P)),r=r.ot(e,n),t.Oh[t.currentUser.ti()]=r}(r,i.batchId,n),[4,Dr(r,i.wr)];case 3:return a.sent(),[4,or(r.ph)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ze(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}(e.fi,t,n)}),n.promise},e.prototype.U=function(){return this.bl.U},e.prototype.G_=function(t){var e=this;this.L_();var n=new Ga(t);return this.cs.ws(function(){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(t){return[2,function(t,e){f(t).qs.add(e),e.next()}(this.q_,n)]})})}),function(){n.Zl(),e.cs.ws(function(){return mi.__awaiter(e,void 0,void 0,function(){return mi.__generator(this,function(t){return[2,function(t,e){f(t).qs.delete(e)}(this.q_,n)]})})})}},Object.defineProperty(e.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),e.prototype.transaction=function(e){var n=this;this.L_();var r=new Jo;return this.cs.ws(function(){return new uu(n.cs,n.Ku,e,r).run(),t.resolve()}),r.promise},e}(),hu=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=r,this.J_=i}return t.prototype.X_=function(t){switch(ot(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pt(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(dt(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw c()}},t.prototype.if=function(t){var e=this,n={};return p(t.fields||{},function(t,r){n[t]=e.X_(r)}),n},t.prototype.nf=function(t){return new Za(pt(t.latitude),pt(t.longitude))},t.prototype.sf=function(t){var e=this;return(t.values||[]).map(function(t){return e.X_(t)})},t.prototype.tf=function(t){switch(this.H_){case"previous":var e=rt(t);return null==e?null:this.X_(e);case"estimate":return this.Z_(it(t));default:return null}},t.prototype.Z_=function(t){var e=lt(t),n=new Bi(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.ef=function(t){var e=Oi.g(t);h($t(e));var n=new Fi(e.get(1),e.get(3)),r=new Li(e.u(5));return n.isEqual(this.U)||s("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(r)},t}(),fu=ks.ho,lu=function(){function t(t){var e,n,r,i,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Si(Ai.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else _("settings","non-empty string","host",t.host),this.host=t.host,I("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(O("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),I("settings","object","credentials",t.credentials),this.credentials=t.credentials,I("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),I("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?s("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&s("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,I("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ks._o;else{if(t.cacheSizeBytes!==fu&&t.cacheSizeBytes<ks.lo)throw new Si(Ai.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ks.lo);this.cacheSizeBytes=t.cacheSizeBytes}I("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i,I("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(o=t.experimentalAutoDetectLongPolling)&&void 0!==o&&o,function(t,e,n,r){if(!0===e&&!0===r)throw new Si(Ai.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),pu=function(){function t(e,n,r,i){var o=this;if(void 0===r&&(r=new Fa),void 0===i&&(i=new Ba),this.rf=r,this.af=i,this.cf=null,this.uf=new ss,this.INTERNAL={delete:function(){return mi.__awaiter(o,void 0,void 0,function(){return mi.__generator(this,function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof e.options){var s=e;this.cf=s,this.__=t._f(s),this.ff=s.name,this.df=new fa(n)}else{var a=e;if(!a.projectId)throw new Si(Ai.INVALID_ARGUMENT,"Must provide projectId");this.__=new Fi(a.projectId,a.database),this.ff="[DEFAULT]",this.df=new ha}this.wf=new lu({})}return Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new su(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){y("Firestore.settings",arguments,1),b("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var e=new lu(t);if(this.lf&&!this.wf.isEqual(e))throw new Si(Ai.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=e,void 0!==e.credentials&&(this.df=function(t){if(!t)return new ha;switch(t.type){case"gapi":var e=t.client;return h(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new pa(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Si(Ai.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.lf)throw new Si(Ai.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&s("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Si(Ai.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:r,ka:i})},t.prototype.clearPersistence=function(){return mi.__awaiter(this,void 0,void 0,function(){var t,e=this;return mi.__generator(this,function(n){if(void 0!==this.lf&&!this.lf.z_)throw new Si(Ai.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Jo,[2,(this.uf.bs(function(){return mi.__awaiter(e,void 0,void 0,function(){var e;return mi.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}})})}),t.promise)]})})},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.hf(),ii(t))return this.lf.G_(t);b("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.lf.G_(e)},t.prototype.hf=function(){return this.lf||this.Ef(new Fa,new Ba,{jl:!1}),this.lf},t.prototype.Af=function(){return new Vi(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},t.prototype.Ef=function(t,e,n){var r=this.Af();return this.lf=new cu(this.df,this.uf),this.lf.start(r,t,e,n)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Si(Ai.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Si(Ai.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Fi(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new Si(Ai.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return y("Firestore.collection",arguments,1),b("Firestore.collection","non-empty string",1,t),this.hf(),new Iu(Oi.g(t),this,null)},t.prototype.doc=function(t){return y("Firestore.doc",arguments,1),b("Firestore.doc","non-empty string",1,t),this.hf(),yu.Rf(Oi.g(t),this,null)},t.prototype.collectionGroup=function(t){if(y("Firestore.collectionGroup",arguments,1),b("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new Si(Ai.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new wu(function(t){return new Vo(Oi.P(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return y("Firestore.runTransaction",arguments,1),b("Firestore.runTransaction","function",1,t),this.hf().transaction(function(n){return t(new du(e,n))})},t.prototype.batch=function(){return this.hf(),new vu(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(i()){case wi.LogLevel.DEBUG:return"debug";case wi.LogLevel.ERROR:return"error";case wi.LogLevel.SILENT:return"silent";case wi.LogLevel.WARN:return"warn";case wi.LogLevel.INFO:return"info";case wi.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;y("Firestore.setLogLevel",arguments,1),T("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,Ni.setLogLevel(e)},t.prototype.gf=function(){return this.wf.timestampsInSnapshots},t.prototype.Pf=function(){return this.wf},t}(),du=function(){function t(t,e){this.yf=t,this.Vf=e}return t.prototype.get=function(t){var e=this;y("Transaction.get",arguments,1);var n=di("Transaction.get",t,this.yf);return this.Vf.v_([n.f_]).then(function(t){if(!t||1!==t.length)return c();var r=t[0];if(r instanceof jo)return new mu(e.yf,n.f_,null,!1,!1,n.d_);if(r instanceof Mo)return new mu(e.yf,n.f_,r,!1,!1,n.d_);throw c()})},t.prototype.set=function(t,e,n){m("Transaction.set",arguments,2,3);var r=di("Transaction.set",t,this.yf);n=fi("Transaction.set",n);var i=yi(r.d_,e,n),o=Wr(this.yf.mf,"Transaction.set",r.f_,i,null!==r.d_,n);return this.Vf.set(r.f_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Ha?(g("Transaction.update",arguments,3),r=di("Transaction.update",t,this.yf),i=Xr(this.yf.mf,"Transaction.update",r.f_,e,n,o)):(y("Transaction.update",arguments,2),r=di("Transaction.update",t,this.yf),i=Kr(this.yf.mf,"Transaction.update",r.f_,e)),this.Vf.update(r.f_,i),this},t.prototype.delete=function(t){y("Transaction.delete",arguments,1);var e=di("Transaction.delete",t,this.yf);return this.Vf.delete(e.f_),this},t}(),vu=function(){function e(t){this.yf=t,this.pf=[],this.bf=!1}return e.prototype.set=function(t,e,n){m("WriteBatch.set",arguments,2,3),this.vf();var r=di("WriteBatch.set",t,this.yf);n=fi("WriteBatch.set",n);var i=yi(r.d_,e,n),o=Wr(this.yf.mf,"WriteBatch.set",r.f_,i,null!==r.d_,n);return this.pf=this.pf.concat(o.w_(r.f_,So.ze())),this},e.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.vf(),"string"==typeof e||e instanceof Ha?(g("WriteBatch.update",arguments,3),r=di("WriteBatch.update",t,this.yf),i=Xr(this.yf.mf,"WriteBatch.update",r.f_,e,n,o)):(y("WriteBatch.update",arguments,2),r=di("WriteBatch.update",t,this.yf),i=Kr(this.yf.mf,"WriteBatch.update",r.f_,e)),this.pf=this.pf.concat(i.w_(r.f_,So.exists(!0))),this},e.prototype.delete=function(t){y("WriteBatch.delete",arguments,1),this.vf();var e=di("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new Co(e.f_,So.ze())),this},e.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):t.resolve()},e.prototype.vf=function(){if(this.bf)throw new Si(Ai.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),yu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.__,e,r)||this).f_=e,i.firestore=n,i.d_=r,i.lf=i.firestore.hf(),i}return mi.__extends(e,t),e.Rf=function(t,n,r){if(t.length%2!=0)throw new Si(Ai.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new Li(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Iu(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(y("DocumentReference.collection",arguments,1),b("DocumentReference.collection","non-empty string",1,t),!t)throw new Si(Ai.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Oi.g(t);return new Iu(this.f_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw D("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},e.prototype.set=function(t,e){m("DocumentReference.set",arguments,1,2),e=fi("DocumentReference.set",e);var n=yi(this.d_,t,e),r=Wr(this.firestore.mf,"DocumentReference.set",this.f_,n,null!==this.d_,e);return this.lf.write(r.w_(this.f_,So.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Ha?(g("DocumentReference.update",arguments,2),n=Xr(this.firestore.mf,"DocumentReference.update",this.f_,t,e,r)):(y("DocumentReference.update",arguments,1),n=Kr(this.firestore.mf,"DocumentReference.update",this.f_,t)),this.lf.write(n.w_(this.f_,So.exists(!0)))},e.prototype.delete=function(){return y("DocumentReference.delete",arguments,0),this.lf.write([new Co(this.f_,So.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];m("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ii(i[a])||(O("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),I("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(ii(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else b("DocumentReference.onSnapshot","function",a,i[a]),w("DocumentReference.onSnapshot","function",a+1,i[a+1]),w("DocumentReference.onSnapshot","function",a+2,i[a+2]);var h={next:function(t){i[a]&&i[a](r.Sf(t))},error:i[a+1],complete:i[a+2]};return this.lf.listen(ge(this.f_.path),u,h)},e.prototype.get=function(t){var e=this;m("DocumentReference.get",arguments,0,1),pi("DocumentReference.get",t);var n=this.firestore.hf();return t&&"cache"===t.source?n.Q_(this.f_).then(function(t){return new mu(e.firestore,e.f_,t,!0,t instanceof Mo&&t.Je,e.d_)}):n.W_(this.f_,t).then(function(t){return e.Sf(t)})},e.prototype.withConverter=function(t){return new e(this.f_,this.firestore,t)},e.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new mu(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},e}(nu),gu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),mu=function(){function t(t,e,n,r,i,o){this.yf=t,this.f_=e,this.Df=n,this.Cf=r,this.Nf=i,this.d_=o}return t.prototype.data=function(t){var e=this;if(m("DocumentSnapshot.data",arguments,0,1),t=li("DocumentSnapshot.data",t),this.Df){if(this.d_){var n=new bu(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new hu(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",function(t){return new yu(t,e.yf,null)},function(t){return new Ui(t)}).X_(this.Df.rn())}},t.prototype.get=function(t,e){var n=this;if(m("DocumentSnapshot.get",arguments,1,2),e=li("DocumentSnapshot.get",e),this.Df){var r=this.Df.data().field(ti("DocumentSnapshot.get",t,this.f_));if(null!==r)return new hu(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",function(t){return new yu(t,n.yf,n.d_)},function(t){return new Ui(t)}).X_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yu(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new gu(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw D("isEqual","DocumentSnapshot",1,e);return this.yf===e.yf&&this.Cf===e.Cf&&this.f_.isEqual(e.f_)&&(null===this.Df?null===e.Df:this.Df.isEqual(e.Df))&&this.d_===e.d_},t}(),bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(mu),wu=function(){function t(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}return t.prototype.where=function(e,n,r){y("Query.where",arguments,3),k("Query.where",3,r);var i=T("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=ti("Query.where",e),s=oi(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new Vo(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Ff,s),this.firestore,this.d_)},t.prototype.orderBy=function(e,n){var r;if(m("Query.orderBy",arguments,1,2),w("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Si(Ai.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=ti("Query.orderBy",e),o=si(this.Ff,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new Vo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Ff,o),this.firestore,this.d_)},t.prototype.limit=function(e){return y("Query.limit",arguments,1),b("Query.limit","number",1,e),C("Query.limit",1,e),new t(Ae(this.Ff,e,"F"),this.firestore,this.d_)},t.prototype.limitToLast=function(e){return y("Query.limitToLast",arguments,1),b("Query.limitToLast","number",1,e),C("Query.limitToLast",1,e),new t(Ae(this.Ff,e,"L"),this.firestore,this.d_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g("Query.startAt",arguments,1);var i=this.xf("Query.startAt",e,n,!0);return new t(Se(this.Ff,i),this.firestore,this.d_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g("Query.startAfter",arguments,1);var i=this.xf("Query.startAfter",e,n,!1);return new t(Se(this.Ff,i),this.firestore,this.d_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g("Query.endBefore",arguments,1);var i=this.xf("Query.endBefore",e,n,!0);return new t(Ne(this.Ff,i),this.firestore,this.d_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g("Query.endAt",arguments,1);var i=this.xf("Query.endAt",e,n,!1);return new t(Ne(this.Ff,i),this.firestore,this.d_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw D("isEqual","Query",1,e);return this.firestore===e.firestore&&ke(this.Ff,e.Ff)&&this.d_===e.d_},t.prototype.withConverter=function(e){return new t(this.Ff,this.firestore,e)},t.prototype.xf=function(t,e,n,r){if(k(t,1,e),e instanceof mu)return y(t,mi.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new Si(Ai.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ee(t);s<a.length;s++){var u=a[s];if(u.field.p())o.push(vt(e,r.key));else{var c=r.field(u.field);if(nt(c))throw new Si(Ai.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.R();throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Xo(o,i)}(this.Ff,this.firestore.__,t,e.Df,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new Si(Ai.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.p()){if("string"!=typeof c)throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ie(t)&&-1!==c.indexOf("/"))throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Oi.g(c));if(!Li.F(h))throw new Si(Ai.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Li(h);a.push(vt(e,f))}else{var l=Yr(n,r,c);a.push(l)}}return new Xo(a,o)}(this.Ff,this.firestore.__,this.firestore.mf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];m("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||ii(i[a])||(O("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),I("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),ii(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else b("Query.onSnapshot","function",a,i[a]),w("Query.onSnapshot","function",a+1,i[a+1]),w("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new _u(r.firestore,r.Ff,t,r.d_))},error:i[a+1],complete:i[a+2]};return hi(this.Ff),this.firestore.hf().listen(this.Ff,s,c)},t.prototype.get=function(t){var e=this;m("Query.get",arguments,0,1),pi("Query.get",t),hi(this.Ff);var n=this.firestore.hf();return(t&&"cache"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then(function(t){return new _u(e.firestore,e.Ff,t,e.d_)})},t}(),_u=function(){function t(t,e,n,r){this.yf=t,this.$f=e,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new gu(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;m("QuerySnapshot.forEach",arguments,1,2),b("QuerySnapshot.forEach","function",1,t),this.kf.docs.forEach(function(r){t.call(e,n.Lf(r,n.metadata.fromCache,n.kf.Wt.has(r.key)))})},Object.defineProperty(t.prototype,"query",{get:function(){return new wu(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(O("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),I("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.kf.Kt)throw new Si(Ai.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===e||(this.Mf=function(t,e,n){if(t.Qt.m()){var r=0;return t.docChanges.map(function(e){var i=n(e.doc,t.fromCache,t.Wt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}})}var i=t.Qt;return t.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var r=n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:vi(e.type),doc:r,oldIndex:o,newIndex:s}})}(this.kf,e,this.Lf.bind(this)),this.Of=e),this.Mf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw D("isEqual","QuerySnapshot",1,e);return this.yf===e.yf&&ke(this.$f,e.$f)&&this.kf.isEqual(e.kf)&&this.d_===e.d_},t.prototype.Lf=function(t,e,n){return new bu(this.yf,t.key,t,e,n,this.d_)},t}(),Iu=function(t){function e(e,n,r){var i=this;if((i=t.call(this,ge(e),n,r)||this).Bf=e,e.length%2!=1)throw new Si(Ai.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return mi.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Ff.path.h();return t.m()?null:new yu(new Li(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){m("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ri.k()),b("CollectionReference.doc","non-empty string",1,t);var e=Oi.g(t);return yu.Rf(this.Ff.path.child(e),this.firestore,this.d_)},e.prototype.add=function(t){y("CollectionReference.add",arguments,1);var e=this.d_?this.d_.toFirestore(t):t;b("CollectionReference.add","object",1,e);var n=this.doc();return new yu(n.f_,this.firestore,null).set(e).then(function(){return n})},e.prototype.withConverter=function(t){return new e(this.Bf,this.firestore,t)},e}(wu),Eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mi.__extends(e,t),e.serverTimestamp=function(){v("FieldValue.serverTimestamp",arguments);var t=new Ya("serverTimestamp");return t.e_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){v("FieldValue.delete",arguments);var t=new Xa("deleteField");return t.e_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];g("FieldValue.arrayUnion",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return g("arrayUnion()",arguments,1),new Ja("arrayUnion",t)}.apply(void 0,t);return r.e_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];g("FieldValue.arrayRemove",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return g("arrayRemove()",arguments,1),new Qa("arrayRemove",t)}.apply(void 0,t);return r.e_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){b("FieldValue.increment","number",1,t),y("FieldValue.increment",arguments,1);var n=function(t){return new $a("increment",t)}(t);return n.e_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},e}(tu),Tu={Firestore:pu,GeoPoint:Za,Timestamp:Bi,Blob:Ui,Transaction:du,WriteBatch:vu,DocumentReference:yu,DocumentSnapshot:mu,Query:wu,QueryDocumentSnapshot:bu,QuerySnapshot:_u,CollectionReference:Iu,FieldPath:Ha,FieldValue:Eu,setLogLevel:pu.setLogLevel,CACHE_SIZE_UNLIMITED:fu};gi(Ti.default),e.__PRIVATE_registerFirestore=gi}).call(e,n(0),n(5))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function r(t,e){function n(){this.constructor=t}fn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(){}function s(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function a(t){var e=s(t);return"array"==e||"object"==e&&"number"==typeof t.length}function u(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function c(t){return Object.prototype.hasOwnProperty.call(t,vn)&&t[vn]||(t[vn]=++yn)}function h(t,e,n){return t.call.apply(t.bind,arguments)}function f(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function l(t,e,n){return l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:f,l.apply(null,arguments)}function p(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function d(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function v(){this.j=this.j,this.i=this.i}function y(t){t:{for(var e=Se,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}function g(t){return Array.prototype.concat.apply([],arguments)}function m(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function b(t){return/^[\s\xa0]*$/.test(t)}function w(t,e){return-1!=t.indexOf(e)}function _(t,e){return t<e?-1:t>e?1:0}function I(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function E(t){var e={};for(var n in t)e[n]=t[n];return e}function T(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<Tn.length;o++)n=Tn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function A(t){return A[" "](t),t}function S(t,e){var n=Mn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function N(){var t=dn.document;return t?t.documentMode:void 0}function k(t){return S(t,function(){for(var e=0,n=_n(String(An)).split("."),r=_n(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=_(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||_(0==s[2].length,0==a[2].length)||_(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}function O(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function D(t,e){if(O.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Dn){t:{try{A(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Bn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}function C(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++zn,this.Y=this.Z=!1}function L(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function R(t){this.src=t,this.a={},this.b=0}function x(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=bn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(L(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function P(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}function M(t,e,n,r,i){if(r&&r.once)return V(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)M(t,e[o],n,r,i);return null}return n=W(n),t&&t[Gn]?t.va(e,n,u(r)?!!r.capture:!!r,i):j(t,e,n,!1,r,i)}function j(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=u(i)?!!i.capture:!!i;if(s&&!Vn)return null;var a=H(t);if(a||(t[Hn]=a=new R(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=U(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)qn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(B(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function U(){var t=z,e=Vn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function V(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)V(t,e[o],n,r,i);return null}return n=W(n),t&&t[Gn]?t.wa(e,n,u(r)?!!r.capture:!!r,i):j(t,e,n,!0,r,i)}function F(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)F(t,e[o],n,r,i);else r=u(r)?!!r.capture:!!r,n=W(n),t&&t[Gn]?(t=t.c,(e=String(e).toString())in t.a&&(o=t.a[e],-1<(n=P(o,n,r,i))&&(L(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=H(t))&&(e=t.a[e.toString()],t=-1,e&&(t=P(e,n,r,i)),(n=-1<t?e[t]:null)&&q(n))}function q(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Gn])x(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(B(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=H(e))?(x(n,t),0==n.b&&(n.src=null,e[Hn]=null)):L(t)}}}function B(t){return t in Wn?Wn[t]:Wn[t]="on"+t}function G(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&q(t),n.call(r,e)}function z(t,e){if(t.Y)return!0;if(!Vn){if(!e)t:{e=["window","event"];for(var n=dn,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return e=new D(e,this),G(t,e)}return G(t,new D(e,this))}function H(t){return t=t[Hn],t instanceof R?t:null}function W(t){return"function"==s(t)?t:(t[Kn]||(t[Kn]=function(e){return t.handleEvent(e)}),t[Kn])}function K(){v.call(this),this.c=new R(this),this.J=this,this.C=null}function X(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&x(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Y(){this.b=this.a=null}function J(){var t=$n,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Q(){this.next=this.b=this.a=null}function $(t){dn.setTimeout(function(){throw t},0)}function Z(t,e){Jn||tt(),Qn||(Jn(),Qn=!0),$n.add(t,e)}function tt(){var t=dn.Promise.resolve(void 0);Jn=function(){t.then(et)}}function et(){for(var t;t=J();){try{t.a.call(t.b)}catch(t){$(t)}var e=Yn;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Qn=!1}function nt(t,e){K.call(this),this.b=t||1,this.a=e||dn,this.f=l(this.Ya,this),this.g=gn()}function rt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function it(t,e,n){if("function"==s(t))n&&(t=l(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=l(t.handleEvent,t)}return 2147483647<Number(e)?-1:dn.setTimeout(t,e||0)}function ot(t){t.a=it(function(){t.a=null,t.c&&(t.c=!1,ot(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}function st(t){v.call(this),this.b=t,this.a={}}function at(t,e,n,r){Array.isArray(n)||(n&&(tr[0]=n.toString()),n=tr);for(var i=0;i<n.length;i++){var o=M(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ut(t){I(t.a,function(t,e){this.a.hasOwnProperty(e)&&q(t)},t),t.a={}}function ct(){this.a=!0}function ht(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}function ft(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}function lt(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+dt(t,n)+(r?" "+r:"")})}function pt(t,e){t.info(function(){return"TIMEOUT: "+e})}function dt(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Xn(n)}catch(t){return e}}function vt(){return er=er||new K}function yt(t){O.call(this,"serverreachability",t)}function gt(t){var e=vt();e.dispatchEvent(new yt(e,t))}function mt(t){O.call(this,"statevent",t)}function bt(t){var e=vt();e.dispatchEvent(new mt(e,t))}function wt(t){O.call(this,"timingevent",t)}function _t(t,e){if("function"!=s(t))throw Error("Fn must not be null and must be a function");return dn.setTimeout(function(){t()},e)}function It(){}function Et(t){var e;return(e=t.a)||(e=t.a={}),e}function Tt(){}function At(){O.call(this,"d")}function St(){O.call(this,"c")}function Nt(){}function kt(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new st(this),this.P=sr,t=On?125:void 0,this.R=new nt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}function Ot(t,e,n){t.H=1,t.i=$t(Wt(e)),t.j=n,t.I=!0,Dt(t,null)}function Dt(t,e){t.u=gn(),Rt(t),t.l=Wt(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),ue(n.b,"t",r),t.D=0,t.a=nn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Zn(l(t.Ca,t,t.a),t.O)),at(t.J,t.a,"readystatechange",t.Wa),e=t.B?E(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),gt(1),ht(t.c,t.m,t.l,t.f,t.T,t.j)}function Ct(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Lt(t,n);if(i==ur){4==e&&(t.h=4,bt(14),r=!1),lt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ar){t.h=4,bt(15),lt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}lt(t.c,t.f,i,null),Ut(t,i)}4==e&&0==n.length&&(t.h=1,bt(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,e=t.g,e.a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xe(e),e.F=!0)):(lt(t.c,t.f,n,"[Invalid Chunked Response]"),jt(t),Mt(t))}function Lt(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ur:(n=Number(e.substring(n,r)),isNaN(n)?ar:(r+=1)+n>e.length?ur:(e=e.substr(r,n),t.D=r+n,e))}function Rt(t){t.U=gn()+t.P,xt(t,t.P)}function xt(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=_t(l(t.Ua,t),e)}function Pt(t){t.o&&(dn.clearTimeout(t.o),t.o=null)}function Mt(t){0==t.g.v||t.A||Qe(t.g,t)}function jt(t){Pt(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,rt(t.R),ut(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ut(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ve(n.b,t)))if(n.I=t.N,!t.C&&ve(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Je(n),Ue(n)}Ke(n),bt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=_t(l(n.Ra,n),6e3));if(1>=de(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Ze(n,11)}else if((t.C||n.a==t)&&Je(n),!b(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(w(h,"spdy")||w(h,"quic")||w(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(ye(f,f.b),f.b=null))}if(u.A){var p=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;p&&(u.na=p,Qt(u.B,u.A,p))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=gn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),u=n;var d=t;if(u.la=en(u,u.C?u.ga:null,u.fa),d.C){ge(u.b,d);var v=d,y=u.D;y&&v.setTimeout(y),v.o&&(Pt(v),Rt(v)),u.a=d}else We(u);0<n.g.length&&qe(n)}else"stop"!=i[0]&&"close"!=i[0]||Ze(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ze(n,7):je(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);gt(4)}catch(t){}}function Vt(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(a(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return t=e}function Ft(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(a(t)||"string"==typeof t)wn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(a(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=Vt(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qt(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qt)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Bt(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Gt(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Gt(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function zt(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ht(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ht){this.a=void 0!==e?e:t.a,Kt(this,t.f),this.j=t.j,Xt(this,t.c),Yt(this,t.h),this.g=t.g,e=t.b;var n=new ie;n.c=e.c,e.a&&(n.a=new qt(e.a),n.b=e.b),Jt(this,n),this.i=t.i}else t&&(n=String(t).match(cr))?(this.a=!!e,Kt(this,n[1]||"",!0),this.j=ee(n[2]||""),Xt(this,n[3]||"",!0),Yt(this,n[4]),this.g=ee(n[5]||"",!0),Jt(this,n[6]||"",!0),this.i=ee(n[7]||"")):(this.a=!!e,this.b=new ie(null,this.a))}function Wt(t){return new Ht(t)}function Kt(t,e,n){t.f=n?ee(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Xt(t,e,n){t.c=n?ee(e,!0):e}function Yt(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Jt(t,e,n){e instanceof ie?(t.b=e,he(t.b,t.a)):(n||(e=ne(e,pr)),t.b=new ie(e,t.a))}function Qt(t,e,n){t.b.set(e,n)}function $t(t){return Qt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^gn()).toString(36)),t}function Zt(t){return t instanceof Ht?Wt(t):new Ht(t,void 0)}function te(t,e,n,r){var i=new Ht(null,void 0);return t&&Kt(i,t),e&&Xt(i,e),n&&Yt(i,n),r&&(i.g=r),i}function ee(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ne(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,re),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function re(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function ie(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function oe(t){t.a||(t.a=new qt,t.b=0,t.c&&zt(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function se(t,e){oe(t),e=ce(t,e),Gt(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Gt(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Bt(t)))}function ae(t,e){return oe(t),e=ce(t,e),Gt(t.a.b,e)}function ue(t,e,n){se(t,e),0<n.length&&(t.c=null,t.a.set(ce(t,e),m(n)),t.b+=n.length)}function ce(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function he(t,e){e&&!t.f&&(oe(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(se(this,e),ue(this,n,t))},t)),t.f=e}function fe(t,e){this.b=t,this.a=e}function le(t){this.g=t||vr,dn.PerformanceNavigationTiming?(t=dn.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(dn.ia&&dn.ia.ya&&dn.ia.ya()&&dn.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}function pe(t){return!!t.b||!!t.a&&t.a.size>=t.f}function de(t){return t.b?1:t.a?t.a.size:0}function ve(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ye(t,e){t.a?t.a.add(e):t.b=e}function ge(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function me(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),s=o.next();!s.done;s=o.next()){var a=s.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return m(t.c)}function be(){}function we(){this.a=new be}function _e(t,e,n){var r=n||"";try{Ft(t,function(t,n){var i=t;u(t)&&(i=Xn(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Ie(t,e){var n=new ct;if(dn.Image){var r=new Image;r.onload=p(Ee,n,r,"TestLoadImage: loaded",!0,e),r.onerror=p(Ee,n,r,"TestLoadImage: error",!1,e),r.onabort=p(Ee,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=p(Ee,n,r,"TestLoadImage: timeout",!1,e),dn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ee(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Te(t){K.call(this),this.headers=new qt,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gr,this.D=this.F=!1}function Ae(t){return Nn&&k(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function Se(t){return"content-type"==t.toLowerCase()}function Ne(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ke(t),De(t)}function ke(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Oe(t){if(t.b&&void 0!==pn&&(!t.s[1]||4!=Le(t)||2!=t.X()))if(t.l&&4==Le(t))it(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==Le(t)){t.b=!1;try{var e=t.X();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=0===e){var o=String(t.B).match(cr)[1]||null;if(!o&&dn.self&&dn.self.location){var s=dn.self.location.protocol;o=s.substr(0,s.length-1)}i=!mr.test(o?o.toLowerCase():"")}r=i}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Le(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",ke(t)}}finally{De(t)}}}function De(t,e){if(t.a){Ce(t);var n=t.a,r=t.s[0]?o:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Ce(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(dn.clearTimeout(t.m),t.m=null)}function Le(t){return t.a?t.a.readyState:0}function Re(t){var e="";return I(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function xe(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Re(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Qt(t,e,n))}function Pe(t,e,n){return n&&n.internalChannelParams?n.internalChannelParams[t]||e:e}function Me(t){this.pa=0,this.g=[],this.c=new ct,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Pe("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Pe("baseRetryDelayMs",5e3,t),this.Ma=Pe("retryDelaySeedMs",1e4,t),this.Ja=Pe("forwardChannelMaxRetries",2,t),this.ma=Pe("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new le(t&&t.concurrentRequestLimit),this.ka=new we,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function je(t){if(Ve(t),3==t.v){var e=t.R++,n=Wt(t.B);Qt(n,"SID",t.J),Qt(n,"RID",e),Qt(n,"TYPE","terminate"),ze(t,n),e=new kt(t,t.c,e,void 0),e.H=2,e.i=$t(Wt(n)),n=!1,dn.navigator&&dn.navigator.sendBeacon&&(n=dn.navigator.sendBeacon(e.i.toString(),"")),!n&&dn.Image&&((new Image).src=e.i,n=!0),n||(e.a=nn(e.g,null),e.a.ba(e.i)),e.u=gn(),Rt(e)}tn(t)}function Ue(t){t.a&&(Xe(t),t.a.cancel(),t.a=null)}function Ve(t){Ue(t),t.j&&(dn.clearTimeout(t.j),t.j=null),Je(t),t.b.cancel(),t.h&&("number"==typeof t.h&&dn.clearTimeout(t.h),t.h=null)}function Fe(t,e){t.g.push(new fe(t.La++,e)),3==t.v&&qe(t)}function qe(t){pe(t.b)||t.h||(t.h=!0,Z(t.Ba,t),t.u=0)}function Be(t,e){return!(de(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja))&&(t.h=_t(l(t.Ba,t,e),$e(t,t.u)),t.u++,!0))}function Ge(t,e){var n;n=e?e.f:t.R++;var r=Wt(t.B);Qt(r,"SID",t.J),Qt(r,"RID",n),Qt(r,"AID",t.P),ze(t,r),t.i&&t.l&&xe(r,t.i,t.l),n=new kt(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=He(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ye(t.b,n),Ot(n,r,e)}function ze(t,e){t.f&&Ft({},function(t,n){Qt(e,n,t)})}function He(t,e,n){n=Math.min(t.g.length,n);var r=t.f?l(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{_e(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function We(t){t.a||t.j||(t.U=1,Z(t.Aa,t),t.o=0)}function Ke(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=_t(l(t.Aa,t),$e(t,t.o)),t.o++,!0)}function Xe(t){null!=t.s&&(dn.clearTimeout(t.s),t.s=null)}function Ye(t){t.a=new kt(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Wt(t.la);Qt(e,"RID","rpc"),Qt(e,"SID",t.J),Qt(e,"CI",t.H?"0":"1"),Qt(e,"AID",t.P),ze(t,e),Qt(e,"TYPE","xmlhttp"),t.i&&t.l&&xe(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=$t(Wt(e)),n.j=null,n.I=!0,Dt(n,t)}function Je(t){null!=t.m&&(dn.clearTimeout(t.m),t.m=null)}function Qe(t,e){var n=null;if(t.a==e){Je(t),Xe(t),t.a=null;var r=2}else{if(!ve(t.b,e))return;n=e.s,ge(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=gn()-e.u;var i=t.u;r=vt(),r.dispatchEvent(new wt(r,n,e,i)),qe(t)}else We(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&Be(t,e)||2==r&&Ke(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ze(t,5);break;case 4:Ze(t,10);break;case 3:Ze(t,6);break;default:Ze(t,2)}}function $e(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Ze(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=l(t.Xa,t);n||(n=new Ht("//www.google.com/images/cleardot.gif"),dn.location&&"http"==dn.location.protocol||Kt(n,"https"),$t(n)),Ie(n.toString(),r)}else bt(2);t.v=0,t.f&&t.f.ra(e),tn(t),Ve(t)}function tn(t){t.v=0,t.I=-1,t.f&&(0==me(t.b).length&&0==t.g.length||(t.b.c.length=0,m(t.g),t.g.length=0),t.f.qa())}function en(t,e,n){var r=Zt(n);if(""!=r.c)e&&Xt(r,e+"."+r.c),Yt(r,r.h);else{var i=dn.location;r=te(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&I(t.W,function(t,e){Qt(r,e,t)}),e=t.A,n=t.na,e&&n&&Qt(r,e,n),Qt(r,"VER",t.ha),ze(t,r),r}function nn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Te(t.Ka),e.F=t.C,e}function rn(){}function on(){if(Nn&&!(10<=Number(Un)))throw Error("Environmental error: no available transport.")}function sn(t,e){K.call(this),this.a=new Me(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!b(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!b(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new cn(this)}function an(t){At.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function un(){St.call(this),this.status=1}function cn(t){this.a=t}n.d(e,"ErrorCode",function(){return _r}),n.d(e,"EventType",function(){return Ir}),n.d(e,"WebChannel",function(){return Er}),n.d(e,"XhrIo",function(){return Tr}),n.d(e,"createWebChannelTransport",function(){return wr});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hn,fn=function(t,e){return(fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},pn=pn||{},dn=ln||self,vn="closure_uid_"+(1e9*Math.random()>>>0),yn=0,gn=Date.now;v.prototype.j=!1,v.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),!1)){c(this)}},v.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var mn,bn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},_n=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};t:{var In=dn.navigator;if(In){var En=In.userAgent;if(En){mn=En;break t}}mn=""}var Tn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");A[" "]=o;var An,Sn=w(mn,"Opera"),Nn=w(mn,"Trident")||w(mn,"MSIE"),kn=w(mn,"Edge"),On=kn||Nn,Dn=w(mn,"Gecko")&&!(w(mn.toLowerCase(),"webkit")&&!w(mn,"Edge"))&&!(w(mn,"Trident")||w(mn,"MSIE"))&&!w(mn,"Edge"),Cn=w(mn.toLowerCase(),"webkit")&&!w(mn,"Edge");t:{var Ln="",Rn=function(){var t=mn;return Dn?/rv:([^\);]+)(\)|;)/.exec(t):kn?/Edge\/([\d\.]+)/.exec(t):Nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Cn?/WebKit\/(\S+)/.exec(t):Sn?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Rn&&(Ln=Rn?Rn[1]:""),Nn){var xn=N();if(null!=xn&&xn>parseFloat(Ln)){An=String(xn);break t}}An=Ln}var Pn,Mn={};if(dn.document&&Nn){var jn=N();Pn=jn||(parseInt(An,10)||void 0)}else Pn=void 0;var Un=Pn,Vn=!Nn||9<=Number(Un),Fn=Nn&&!k("9"),qn=function(){if(!dn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{dn.addEventListener("test",o,e),dn.removeEventListener("test",o,e)}catch(t){}return t}();O.prototype.b=function(){this.defaultPrevented=!0},d(D,O);var Bn={2:"touch",3:"pen",4:"mouse"};D.prototype.b=function(){D.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Fn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Gn="closure_listenable_"+(1e6*Math.random()|0),zn=0;R.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=P(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):(e=new C(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var Hn="closure_lm_"+(1e6*Math.random()|0),Wn={},Kn="__closure_events_fn_"+(1e9*Math.random()>>>0);d(K,v),K.prototype[Gn]=!0,hn=K.prototype,hn.addEventListener=function(t,e,n,r){M(this,t,e,n,r)},hn.removeEventListener=function(t,e,n,r){F(this,t,e,n,r)},hn.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new O(t,n);else if(t instanceof O)t.target=t.target||n;else{var i=t;t=new O(r,n),T(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=X(s,r,!0,t)&&i}if(s=t.a=n,i=X(s,r,!0,t)&&i,i=X(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.a=e[o],i=X(s,r,!1,t)&&i;return i},hn.G=function(){if(K.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)L(n[r]);delete e.a[t],e.b--}}this.C=null},hn.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},hn.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Xn=dn.JSON.stringify,Yn=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())(function(){return new Q},function(t){t.reset()},100);Y.prototype.add=function(t,e){var n=Yn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Q.prototype.reset=function(){this.next=this.b=this.a=null};var Jn,Qn=!1,$n=new Y;d(nt,K),hn=nt.prototype,hn.aa=!1,hn.M=null,hn.Ya=function(){if(this.aa){var t=gn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(rt(this),this.start()))}},hn.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=gn())},hn.G=function(){nt.S.G.call(this),rt(this),delete this.a};var Zn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return r(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ot(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(dn.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(v);d(st,v);var tr=[];st.prototype.G=function(){st.S.G.call(this),ut(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ct.prototype.info=function(){};var er=null;d(yt,O),d(mt,O),d(wt,O);var nr={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},rr={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};It.prototype.a=null;var ir={OPEN:"a",$a:"b",Ea:"c",jb:"d"};d(At,O),d(St,O);var or;d(Nt,It),or=new Nt;var sr=45e3,ar={},ur={};hn=kt.prototype,hn.setTimeout=function(t){this.P=t},hn.Wa=function(t){t=t.target;var e=this.F;e&&3==Le(t)?e.f():this.Ca(t)},hn.Ca=function(t){try{if(t==this.a)t:{var e=Le(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!On&&!this.a.$())){this.A||4!=e||7==n||gt(8==n||0>=r?3:2),Pt(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,ft(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,bt(12),jt(this),Mt(this);break t}lt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ut(this,u)}this.I?(Ct(this,e,o),On&&this.b&&3==e&&(at(this.J,this.R,"tick",this.Va),this.R.start())):(lt(this.c,this.f,o,null),Ut(this,o)),4==e&&jt(this),this.b&&!this.A&&(4==e?Qe(this.g,this):(this.b=!1,Rt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,bt(12)):(this.h=0,bt(13)),jt(this),Mt(this)}}}catch(t){}},hn.Va=function(){if(this.a){var t=Le(this.a),e=this.a.$();this.D<e.length&&(Pt(this),Ct(this,t,e),this.b&&4!=t&&Rt(this))}},hn.cancel=function(){this.A=!0,jt(this)},hn.Ua=function(){this.o=null;var t=gn();0<=t-this.U?(pt(this.c,this.l),2!=this.H&&(gt(3),bt(17)),jt(this),this.h=2,Mt(this)):xt(this,this.U-t)},hn=qt.prototype,hn.K=function(){Bt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},hn.L=function(){return Bt(this),this.a.concat()},hn.get=function(t,e){return Gt(this.b,t)?this.b[t]:e},hn.set=function(t,e){Gt(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},hn.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var cr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Ht.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ne(e,hr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ne(e,hr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ne(n,"/"==n.charAt(0)?lr:fr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ne(n,dr)),t.join("")};var hr=/[#\/\?@]/g,fr=/[#\?:]/g,lr=/[#\?]/g,pr=/[#\?@]/g,dr=/#/g;hn=ie.prototype,hn.add=function(t,e){oe(this),this.c=null,t=ce(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},hn.forEach=function(t,e){oe(this),this.a.forEach(function(n,r){wn(n,function(n){t.call(e,n,r,this)},this)},this)},hn.L=function(){oe(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},hn.K=function(t){oe(this);var e=[];if("string"==typeof t)ae(this,t)&&(e=g(e,this.a.get(ce(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=g(e,t[n])}return e},hn.set=function(t,e){return oe(this),this.c=null,t=ce(this,t),ae(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},hn.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e},hn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var vr=10;le.prototype.cancel=function(){var t,e;if(this.c=me(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){var o=r.value;o.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},be.prototype.stringify=function(t){return dn.JSON.stringify(t,void 0)},be.prototype.parse=function(t){return dn.JSON.parse(t,void 0)};var yr=dn.JSON.parse;d(Te,K);var gr="",mr=/^https?$/i,br=["POST","PUT"];hn=Te.prototype,hn.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=Et(this.H?this.H:or),this.a.onreadystatechange=l(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ne(this,t)}t=n||"";var i=new qt(this.headers);r&&Ft(r,function(t,e){i.set(e,t)}),r=y(i.L()),n=dn.FormData&&t instanceof dn.FormData,!(0<=bn(br,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ce(this),0<this.o&&((this.D=Ae(this.a))?(this.a.timeout=this.o,this.a.ontimeout=l(this.xa,this)):this.m=it(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ne(this,t)}},hn.xa=function(){void 0!==pn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},hn.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),De(this))},hn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),De(this,!0)),Te.S.G.call(this)},hn.za=function(){this.j||(this.A||this.l||this.g?Oe(this):this.Ta())},hn.Ta=function(){Oe(this)},hn.X=function(){try{return 2<Le(this)?this.a.status:-1}catch(t){return-1}},hn.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},hn.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yr(e)}},hn.ua=function(){return this.h},hn.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},hn=Me.prototype,hn.ha=8,hn.v=1,hn.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new kt(this,this.c,t,void 0),n=this.l;this.O&&(n?(n=E(n),T(n,this.O)):n=this.O),null===this.i&&(e.B=n);var r;if(this.da)t:{for(var i=r=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.g.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=He(this,e,r),i=Wt(this.B),Qt(i,"RID",t),Qt(i,"CVER",22),this.A&&Qt(i,"X-HTTP-Session-Id",this.A),ze(this,i),this.i&&n&&xe(i,this.i,n),ye(this.b,e),this.Ga&&Qt(i,"TYPE","init"),this.da?(Qt(i,"$req",r),Qt(i,"SID","null"),e.V=!0,Ot(e,i,null)):Ot(e,i,r),this.v=2}}else 3==this.v&&(t?Ge(this,t):0==this.g.length||pe(this.b)||Ge(this))},hn.Aa=function(){if(this.j=null,Ye(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=_t(l(this.Sa,this),t)}},hn.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ue(this),Ye(this))},hn.Ra=function(){null!=this.m&&(this.m=null,Ue(this),Ke(this),bt(19))},hn.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),bt(2)):(this.c.info("Failed to ping google.com"),bt(1))},hn=rn.prototype,hn.ta=function(){},hn.sa=function(){},hn.ra=function(){},hn.qa=function(){},hn.Ha=function(){},on.prototype.a=function(t,e){return new sn(t,e)},d(sn,K),hn=sn.prototype,hn.addEventListener=function(t,e,n,r){sn.S.addEventListener.call(this,t,e,n,r)},hn.removeEventListener=function(t,e,n,r){sn.S.removeEventListener.call(this,t,e,n,r)},hn.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;bt(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=en(t,null,t.fa),qe(t)},hn.close=function(){je(this.a)},hn.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Fe(this.a,e)}else this.g?(e={},e.__data__=Xn(t),Fe(this.a,e)):Fe(this.a,t)},hn.G=function(){this.a.f=null,delete this.f,je(this.a),delete this.a,sn.S.G.call(this)},d(an,At),d(un,St),d(cn,rn),cn.prototype.ta=function(){this.a.dispatchEvent("a")},cn.prototype.sa=function(t){this.a.dispatchEvent(new an(t))},cn.prototype.ra=function(t){this.a.dispatchEvent(new un(t))},cn.prototype.qa=function(){this.a.dispatchEvent("b")},on.prototype.createWebChannel=on.prototype.a,sn.prototype.send=sn.prototype.Pa,sn.prototype.open=sn.prototype.Oa,sn.prototype.close=sn.prototype.close,nr.NO_ERROR=0,nr.TIMEOUT=8,nr.HTTP_ERROR=6,rr.COMPLETE="complete",Tt.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",K.prototype.listen=K.prototype.va,Te.prototype.listenOnce=Te.prototype.wa,Te.prototype.getLastError=Te.prototype.Qa,Te.prototype.getLastErrorCode=Te.prototype.ua,Te.prototype.getStatus=Te.prototype.X,Te.prototype.getResponseJson=Te.prototype.Na,Te.prototype.getResponseText=Te.prototype.$,Te.prototype.send=Te.prototype.ba;var wr=function(){return new on},_r=nr,Ir=rr,Er=Tt,Tr=Te,Ar={createWebChannelTransport:wr,ErrorCode:_r,EventType:Ir,WebChannel:Er,XhrIo:Tr};e.default=Ar}.call(e,n(1))}])});