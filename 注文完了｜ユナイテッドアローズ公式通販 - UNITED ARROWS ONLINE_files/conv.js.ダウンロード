!function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"App";e(this,t),this.os=n,this.bridge=o,this.windowAsAny=window}var o,r,i;return o=t,r=[{key:"resolveMethod",value:function(e){var n,t,o,r,i=this;if("android"===this.os){if(void 0===(null===(n=this.windowAsAny[this.bridge])||void 0===n?void 0:n[e]))throw new Error("window[".concat(this.bridge,"][").concat(e,"] does not exist"));return function(n,t){var o=JSON.stringify({callback:n,parameter:t[0]});i.windowAsAny[i.bridge][e](o)}}if(void 0===(null===(r=null===(o=null===(t=this.windowAsAny.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===o?void 0:o[e])||void 0===r?void 0:r.postMessage))throw new Error("window.webkit.messageHandlers[".concat(e,"].postMessage does not exist"));return function(n,t){var o=JSON.stringify({callback:n,parameter:t[0]});i.windowAsAny.webkit.messageHandlers[e].postMessage(o)}}},{key:"invoke",value:function(e){for(var n=this,o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return new Promise((function(o,i){var a="".concat(e,"-").concat(t.callbackIdentifier++);n.windowAsAny[a]=function(e){var t=void 0!==e?JSON.parse(e):void 0;void 0!==(null==t?void 0:t["error-".concat(a)])?i(new Error(t["error-".concat(a)])):o(t),delete n.windowAsAny[a]},n.resolveMethod(e)(a,r)}))}}],r&&n(o.prototype,r),i&&n(o,i),Object.defineProperty(o,"prototype",{writable:!1}),t}();function o(e){try{var n=window[e],t="__storage_test__";return n.setItem(t,t),n.removeItem(t),!0}catch(e){return!1}}function r(e){var n={name:e.name,message:e.message,fileName:e.fileName,stack:e.stack};(new Image).src="https://i.smartnews-ads.com/pe?b=".concat(encodeURIComponent(JSON.stringify(n)))}t.callbackIdentifier=0;var i=0;function a(){return new t("ios","SmartNewsAds").invoke("retrieveUUID").catch((function(){return new t("android","SmartNewsAds").invoke("retrieveUUID")})).catch((function(){return t=window.parent===window.self,null!==(e=window.webkit)&&void 0!==e&&null!==(n=e.messageHandlers)&&void 0!==n&&n.UUIDResolver&&t?new Promise((function(e){var n,t,o,r="_smartnews_ads_legacy_callback_".concat(i++);window[r]=function(n){delete window[r],e(n)},null===(n=window.webkit)||void 0===n||null===(t=n.messageHandlers)||void 0===t||null===(o=t.UUIDResolver)||void 0===o||o.postMessage(r)})):Promise.reject(new Error("UUIDResolver does not exist"));var e,n,t})).catch((function(){return Promise.resolve(null)}))}function s(e,n,t){return["https://api.smartnews-ads.com/s/web/v1/beacon/",e.id,""===e.event?"":"/".concat(e.event),"/img.png?",null===t?"":"u=".concat(t,"&"),"exid=".concat(n,"&"),(new Date).getTime()].join("")}function c(e,n){if("Promise"in window)return Promise.race([a(),new Promise((function(e){window.setTimeout((function(){return e(null)}),1e3)}))]).then((function(t){(new Image).src=s(e,n,t)})).catch((function(e){r(e)}));(new Image).src=s(e,n,null)}try{!function(){var e,n,t="snexid",r=function(e){for(var n=document.cookie.split(";"),t=0;t<n.length;t++){var r=n[t].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").split("=");if(r[0]===e)return decodeURIComponent(r[1])}if(o("localStorage"))return window.localStorage.getItem(e)||void 0}(t)||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}));e=t,n=r,document.cookie="".concat(e,"=").concat(encodeURIComponent(n),"; path=/; max-age=").concat(63072e3),o("localStorage")&&window.localStorage.setItem(e,n);for(var i=document.getElementsByTagName("script"),a=[],s=0;s<i.length;s++){var l=i[s].getAttribute("data-smartnews-ads");if(null!==l)try{var d=c(JSON.parse(l),r);void 0!==d&&a.push(d)}catch(e){}}}()}catch(e){r(e)}}();
